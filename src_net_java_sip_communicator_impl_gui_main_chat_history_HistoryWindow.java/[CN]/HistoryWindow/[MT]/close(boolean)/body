{
  if (chatConvPanel.getRightButtonMenu().isVisible()) {
    chatConvPanel.getRightButtonMenu().setVisible(false);
  }
 else   if (historyMenu.isPopupMenuVisible()) {
    MenuSelectionManager menuSelectionManager=MenuSelectionManager.defaultManager();
    menuSelectionManager.clearSelectedPath();
  }
 else {
    mainFrame.getHistoryWindowManager().removeHistoryWindowForContact(historyContact);
    this.dispose();
  }
}
