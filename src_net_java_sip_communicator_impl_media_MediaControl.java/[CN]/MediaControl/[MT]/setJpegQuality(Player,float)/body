{
  if ((player == null) || (player.getState() < Player.Realized))   return;
  Control cs[]=player.getControls();
  QualityControl qc=null;
  VideoFormat jpegFmt=new VideoFormat(VideoFormat.JPEG);
  for (  Control c : cs) {
    if (c instanceof QualityControl && c instanceof Owned) {
      Object owner=((Owned)c).getOwner();
      if (owner instanceof Codec) {
        Format fmts[]=((Codec)owner).getSupportedOutputFormats(null);
        for (        Format fmt : fmts) {
          if (fmt.matches(jpegFmt)) {
            qc=(QualityControl)c;
            qc.setQuality(val);
            if (logger.isDebugEnabled())             logger.debug("Setting quality to " + val + " on "+ qc);
            break;
          }
        }
      }
      if (qc != null) {
        break;
      }
    }
  }
}
