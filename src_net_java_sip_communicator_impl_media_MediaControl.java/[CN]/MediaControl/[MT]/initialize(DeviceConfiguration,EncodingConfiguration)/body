{
  this.deviceConfiguration=deviceConfig;
  this.encodingConfiguration=encodingConfig;
  encodingConfig.initializeFormatPreferences();
  encodingConfig.registerCustomPackages();
  String debugDataSourceURL=MediaActivator.getConfigurationService().getString(DEBUG_DATA_SOURCE_URL_PROPERTY_NAME);
  if (debugDataSourceURL == null) {
    initCaptureDevices();
  }
 else {
    initDebugDataSource(debugDataSourceURL);
  }
  deviceConfiguration.addPropertyChangeListener(new PropertyChangeListener(){
    public void propertyChange(    PropertyChangeEvent evt){
      if (evt.getPropertyName().equals(DeviceConfiguration.AUDIO_CAPTURE_DEVICE)) {
        try {
          initCaptureDevices();
        }
 catch (        MediaException e) {
          logger.error("Cannot init capture devices after change",e);
        }
      }
    }
  }
);
}
