{
synchronized (messageListeners) {
    for (int i=0; i < messageListeners.size(); i++) {
      MessageListener l=(MessageListener)messageListeners.get(i);
      if (evt instanceof MessageDeliveredEvent) {
        l.messageDelivered((MessageDeliveredEvent)evt);
      }
 else       if (evt instanceof MessageReceivedEvent) {
        l.messageReceived((MessageReceivedEvent)evt);
      }
 else       if (evt instanceof MessageDeliveryFailedEvent) {
        l.messageDeliveryFailed((MessageDeliveryFailedEvent)evt);
      }
    }
  }
}
