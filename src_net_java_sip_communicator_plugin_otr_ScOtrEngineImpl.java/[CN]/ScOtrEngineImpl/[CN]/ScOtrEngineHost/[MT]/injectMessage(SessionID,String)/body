{
  Contact contact=getContact(sessionID);
  OperationSetBasicInstantMessaging imOpSet=contact.getProtocolProvider().getOperationSet(OperationSetBasicInstantMessaging.class);
  String otrHtmlFallbackMessage="<a href=\"http://en.wikipedia.org/wiki/Off-the-Record_Messaging\">";
  String contentType=messageText.contains(otrHtmlFallbackMessage) ? OperationSetBasicInstantMessaging.HTML_MIME_TYPE : OperationSetBasicInstantMessaging.DEFAULT_MIME_TYPE;
  Message message=imOpSet.createMessage(messageText,contentType,OperationSetBasicInstantMessaging.DEFAULT_MIME_ENCODING,null);
  injectedMessageUIDs.add(message.getMessageUID());
  imOpSet.sendInstantMessage(contact,message);
}
