{
  if (devices != null)   return devices;
  DeviceConfiguration deviceConfiguration=getDeviceConfiguration();
  CaptureDeviceInfo[] infos;
switch (type) {
case AUDIO:
    infos=deviceConfiguration.getAvailableAudioCaptureDevices();
  break;
case VIDEO:
infos=deviceConfiguration.getAvailableVideoCaptureDevices();
break;
default :
throw new IllegalStateException("type");
}
final int deviceCount=infos.length;
if (deviceCount < 1) devices=NO_CAPTURE_DEVICES;
 else {
devices=new CaptureDevice[deviceCount];
for (int i=0; i < deviceCount; i++) {
devices[i]=new CaptureDevice(infos[i]);
}
}
return devices;
}
