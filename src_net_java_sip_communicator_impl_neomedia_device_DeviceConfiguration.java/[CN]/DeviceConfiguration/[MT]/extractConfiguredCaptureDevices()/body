{
  ConfigurationService config=NeomediaActivator.getConfigurationService();
  logger.info("Scanning for configured Audio Devices.");
  CaptureDeviceInfo[] audioCaptureDevices=getAvailableAudioCaptureDevices();
  if (config.getBoolean(PROP_AUDIO_DEVICE_IS_DISABLED,false)) {
    audioCaptureDevice=null;
    audioSystem=AUDIO_SYSTEM_NONE;
  }
 else   if (audioCaptureDevices.length < 1) {
    logger.warn("No Audio Device was found.");
    audioCaptureDevice=null;
    audioSystem=AUDIO_SYSTEM_NONE;
  }
 else {
    logger.debug("Found " + audioCaptureDevices.length + " capture devices: "+ audioCaptureDevices);
    String audioDevName=config.getString(PROP_AUDIO_DEVICE);
    if (audioDevName == null) {
      setAudioSystem(AUDIO_SYSTEM_JAVASOUND,null);
    }
 else {
      for (      CaptureDeviceInfo captureDeviceInfo : audioCaptureDevices) {
        if (audioDevName.equals(captureDeviceInfo.getName())) {
          setAudioSystem(getAudioSystem(captureDeviceInfo),captureDeviceInfo);
          break;
        }
      }
      if (getAudioSystem() == null) {
        logger.warn("Computer sound config changed or " + "there is a problem since last config was saved, " + "will back to default javasound");
        setAudioPlaybackDevice(null);
        setAudioNotifyDevice(null);
        setAudioCaptureDevice(null);
        setAudioSystem(AUDIO_SYSTEM_JAVASOUND,null);
      }
    }
    if (audioCaptureDevice != null)     logger.info("Found " + audioCaptureDevice.getName() + " as an audio capture device.");
  }
  if (config.getBoolean(PROP_VIDEO_DEVICE_IS_DISABLED,false))   videoCaptureDevice=null;
 else {
    logger.info("Scanning for configured Video Devices.");
    videoCaptureDevice=extractConfiguredVideoCaptureDevice(VideoFormat.RGB);
    if (videoCaptureDevice == null) {
      videoCaptureDevice=extractConfiguredVideoCaptureDevice(VideoFormat.YUV);
      if (videoCaptureDevice == null)       logger.info("No Video Device was found.");
    }
  }
}
