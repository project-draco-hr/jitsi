{
  if (this.audioPlaybackDevice != audioPlaybackDevice) {
    CaptureDeviceInfo oldDev=this.audioPlaybackDevice;
    this.audioPlaybackDevice=audioPlaybackDevice;
    if (this.audioPlaybackDevice != null) {
      PlugInManager.removePlugIn("com.sun.media.renderer.audio.JavaSoundRenderer",PlugInManager.RENDERER);
      PortAudioRenderer.setDefaultLocator(this.audioPlaybackDevice.getLocator());
      PlugInManager.addPlugIn("net.java.sip.communicator.impl.neomedia.jmfext.media" + ".renderer.audio.PortAudioRenderer",new PortAudioRenderer().getSupportedInputFormats(),null,PlugInManager.RENDERER);
    }
    if (save) {
      ConfigurationService config=NeomediaActivator.getConfigurationService();
      if (audioPlaybackDevice != null) {
        config.setProperty(PROP_AUDIO_PLAYBACK_DEVICE,audioPlaybackDevice.getName());
        config.setProperty(PROP_AUDIO_DEVICE_IS_DISABLED,false);
      }
 else       config.setProperty(PROP_AUDIO_PLAYBACK_DEVICE,null);
    }
    firePropertyChange(AUDIO_PLAYBACK_DEVICE,oldDev,audioPlaybackDevice);
  }
}
