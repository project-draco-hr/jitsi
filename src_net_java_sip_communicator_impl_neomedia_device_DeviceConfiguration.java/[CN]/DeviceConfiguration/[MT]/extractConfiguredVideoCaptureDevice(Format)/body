{
  List<CaptureDeviceInfo> videoCaptureDevices=CaptureDeviceManager.getDeviceList(format);
  CaptureDeviceInfo videoCaptureDevice=null;
  if (videoCaptureDevices.size() > 0) {
    String videoDevName=NeomediaActivator.getConfigurationService().getString(PROP_VIDEO_DEVICE);
    if (videoDevName == null)     videoCaptureDevice=videoCaptureDevices.get(0);
 else {
      for (      CaptureDeviceInfo captureDeviceInfo : videoCaptureDevices) {
        if (videoDevName.equals(captureDeviceInfo.getName())) {
          videoCaptureDevice=captureDeviceInfo;
          break;
        }
      }
    }
    if (videoCaptureDevice != null) {
      logger.info("Found " + videoCaptureDevice.getName() + " as a "+ format+ " Video Device.");
    }
  }
  return videoCaptureDevice;
}
