{
  CallPeerMediaHandlerJabberImpl mediaHandler=getMediaHandler();
  List<ContentPacketExtension> contents=content.getContentList();
  Iterable<ContentPacketExtension> answerContents;
  JingleIQ contentIQ;
  try {
    mediaHandler.processOffer(contents);
    mediaHandler.getTransportManager().wrapupConnectivityEstablishment();
    answerContents=mediaHandler.generateSessionAccept();
    contentIQ=null;
  }
 catch (  Exception e) {
    logger.warn("Exception occurred",e);
    answerContents=null;
    contentIQ=JinglePacketFactory.createContentReject(getProtocolProvider().getOurJID(),this.peerJID,getJingleSID(),answerContents);
  }
  if (contentIQ == null) {
    contentIQ=JinglePacketFactory.createContentAccept(getProtocolProvider().getOurJID(),this.peerJID,getJingleSID(),answerContents);
  }
  getProtocolProvider().getConnection().sendPacket(contentIQ);
  mediaHandler.start();
}
