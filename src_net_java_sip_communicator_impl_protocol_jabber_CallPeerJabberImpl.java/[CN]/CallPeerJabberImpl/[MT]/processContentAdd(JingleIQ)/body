{
  List<ContentPacketExtension> contents=content.getContentList();
  JingleIQ contentIQ=null;
  Iterable<ContentPacketExtension> answerContents;
  try {
    getMediaHandler().processOffer(contents);
    answerContents=getMediaHandler().generateSessionAccept();
  }
 catch (  Exception e) {
    logger.warn("Exception occurred",e);
    answerContents=null;
    contentIQ=JinglePacketFactory.createContentReject(getProtocolProvider().getOurJID(),this.peerJID,getJingleSID(),answerContents);
  }
  if (contentIQ == null) {
    contentIQ=JinglePacketFactory.createContentAccept(getProtocolProvider().getOurJID(),this.peerJID,getJingleSID(),answerContents);
  }
  getProtocolProvider().getConnection().sendPacket(contentIQ);
  getMediaHandler().start();
}
