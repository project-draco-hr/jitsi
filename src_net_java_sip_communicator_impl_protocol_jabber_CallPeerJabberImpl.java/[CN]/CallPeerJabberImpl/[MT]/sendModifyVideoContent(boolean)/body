{
  CallPeerMediaHandlerJabberImpl mediaHandler=getMediaHandler();
  if (!allowed && mediaHandler.isRTPTranslationEnabled(MediaType.VIDEO))   allowed=true;
  ContentPacketExtension remoteContent=mediaHandler.getRemoteContent(MediaType.VIDEO.toString());
  if (remoteContent == null) {
    if (allowed)     sendAddVideoContent();
    return;
  }
  SendersEnum senders=remoteContent.getSenders();
  if (!allowed) {
    boolean initiator=isInitiator();
    if ((!initiator && (senders == SendersEnum.initiator)) || (initiator && (senders == SendersEnum.responder))) {
      sendRemoveVideoContent();
      return;
    }
  }
  if (allowed) {
    if (senders == SendersEnum.none) {
      senders=isInitiator() ? SendersEnum.responder : SendersEnum.initiator;
    }
 else {
      senders=SendersEnum.both;
    }
  }
 else {
    if ((senders == SendersEnum.both) || (senders == null)) {
      senders=isInitiator() ? SendersEnum.initiator : SendersEnum.responder;
    }
 else {
      senders=SendersEnum.none;
    }
  }
  ContentPacketExtension ext=new ContentPacketExtension();
  String remoteContentName=remoteContent.getName();
  ext.setSenders(senders);
  ext.setCreator(remoteContent.getCreator());
  ext.setName(remoteContentName);
  ProtocolProviderServiceJabberImpl protocolProvider=getProtocolProvider();
  JingleIQ contentIQ=JinglePacketFactory.createContentModify(protocolProvider.getOurJID(),this.peerJID,getSID(),ext);
  protocolProvider.getConnection().sendPacket(contentIQ);
  try {
    mediaHandler.reinitContent(remoteContentName,ext,false);
    mediaHandler.start();
  }
 catch (  Exception e) {
    logger.warn("Exception occurred during media reinitialization",e);
  }
}
