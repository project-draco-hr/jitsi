{
  JMenuItem menuItem=(JMenuItem)e.getSource();
  String itemName=menuItem.getName();
  ConferenceChatManager conferenceManager=GuiActivator.getUIService().getConferenceChatManager();
  String[] joinOptions;
  String subject=null;
  if (itemName.equals("removeChatRoom")) {
    conferenceManager.removeChatRoom(chatRoomWrapper);
  }
 else   if (itemName.equals("leaveChatRoom")) {
    conferenceManager.leaveChatRoom(chatRoomWrapper);
  }
 else   if (itemName.equals("joinChatRoom")) {
    String nickName=null;
    nickName=ConfigurationUtils.getChatRoomProperty(chatRoomWrapper.getParentProvider().getProtocolProvider(),chatRoomWrapper.getChatRoomID(),"userNickName");
    if (nickName == null) {
      joinOptions=conferenceManager.getJoinOptions(chatRoomWrapper.getParentProvider().getProtocolProvider(),chatRoomWrapper.getChatRoomID());
      nickName=joinOptions[0];
      subject=joinOptions[1];
    }
    if (nickName != null)     GuiActivator.getMUCService().joinChatRoom(chatRoomWrapper,nickName,null,subject);
  }
 else   if (itemName.equals("openChatRoom")) {
    if (chatRoomWrapper.getChatRoom() == null) {
      chatRoomWrapper=GuiActivator.getMUCService().createChatRoom(chatRoomWrapper.getChatRoomName(),chatRoomWrapper.getParentProvider().getProtocolProvider(),new ArrayList<String>(),"",false,false,true);
    }
    if (!chatRoomWrapper.getChatRoom().isJoined()) {
      String nickName=null;
      nickName=ConfigurationUtils.getChatRoomProperty(chatRoomWrapper.getParentProvider().getProtocolProvider(),chatRoomWrapper.getChatRoomID(),"userNickName");
      if (nickName == null) {
        joinOptions=conferenceManager.getJoinOptions(chatRoomWrapper.getParentProvider().getProtocolProvider(),chatRoomWrapper.getChatRoomID());
        nickName=joinOptions[0];
        subject=joinOptions[1];
      }
      if (nickName != null)       GuiActivator.getMUCService().joinChatRoom(chatRoomWrapper,nickName,null,subject);
 else       return;
    }
    ChatWindowManager chatWindowManager=GuiActivator.getUIService().getChatWindowManager();
    ChatPanel chatPanel=chatWindowManager.getMultiChat(chatRoomWrapper,true);
    chatWindowManager.openChat(chatPanel,true);
  }
 else   if (itemName.equals("joinAsChatRoom")) {
    joinOptions=conferenceManager.getJoinOptions(chatRoomWrapper.getParentProvider().getProtocolProvider(),chatRoomWrapper.getChatRoomID());
    if (joinOptions[0] == null)     return;
    GuiActivator.getMUCService().joinChatRoom(chatRoomWrapper,joinOptions[0],null,joinOptions[1]);
  }
 else   if (itemName.equals("nickNameChatRoom")) {
    conferenceManager.getJoinOptions(true,chatRoomWrapper.getParentProvider().getProtocolProvider(),chatRoomWrapper.getChatRoomID());
  }
}
