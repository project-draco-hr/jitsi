{
  if (protocolProviderListener == null) {
    protocolProviderListener=new ProtocolProviderListener(parentMenu);
    GuiActivator.bundleContext.addServiceListener(protocolProviderListener);
  }
  for (  ProtocolProviderFactory providerFactory : GuiActivator.getProtocolProviderFactories().values()) {
    ServiceReference serRef;
    ProtocolProviderService protocolProvider;
    for (    AccountID accountID : providerFactory.getRegisteredAccounts()) {
      serRef=providerFactory.getProviderForAccount(accountID);
      protocolProvider=(ProtocolProviderService)GuiActivator.bundleContext.getService(serRef);
      addAccountInternal(protocolProvider,parentMenu);
    }
  }
  if (ConfigurationUtils.isAutoAnswerDisableSubmenu() && getAutoAnswerItemCount(parentMenu) == 1) {
    updateItem(getAutoAnswerItem(parentMenu,0),true);
  }
}
