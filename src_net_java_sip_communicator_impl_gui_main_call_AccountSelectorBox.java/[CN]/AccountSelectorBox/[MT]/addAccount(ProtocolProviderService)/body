{
  Image img=ImageLoader.getAccountStatusImage(pps);
  JMenuItem menuItem=new JMenuItem(pps.getAccountID().getDisplayName(),new ImageIcon(img));
  menuItem.addActionListener(this);
  this.accountsTable.put(pps,menuItem);
  this.menu.add(menuItem);
  if (accountsTable.size() < 2) {
    this.setSelected(pps);
  }
 else {
    OperationSetPresence presence=(OperationSetPresence)pps.getOperationSet(OperationSetPresence.class);
    OperationSetPresence selectedPresence=(OperationSetPresence)selectedProvider.getOperationSet(OperationSetPresence.class);
    if (presence != null && selectedPresence != null && (selectedPresence.getPresenceStatus().getStatus() < presence.getPresenceStatus().getStatus())) {
      setSelected(pps);
    }
 else     if (pps.isRegistered() && !selectedProvider.isRegistered()) {
      setSelected(pps);
    }
  }
}
