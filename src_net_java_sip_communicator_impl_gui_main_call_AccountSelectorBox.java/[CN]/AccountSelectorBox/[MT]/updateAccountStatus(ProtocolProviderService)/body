{
  JMenuItem menuItem=accountsTable.get(pps);
  Icon icon=ImageLoader.getAccountStatusImage(pps);
  ProtocolProviderService selectedPPS=(ProtocolProviderService)menu.getSelectedObject();
  if (selectedPPS.equals(pps) && !pps.isRegistered()) {
    ProtocolProviderService newPPS=findFirstRegisteredProvider();
    if (newPPS != null)     this.setSelected(newPPS);
  }
  if (!selectedPPS.equals(pps) && !selectedPPS.isRegistered() && pps.isRegistered()) {
    this.setSelected(pps);
  }
  menuItem.setIcon(icon);
  if (menu.getSelectedObject().equals(pps)) {
    this.menu.setIcon(icon);
  }
  menuItem.repaint();
  this.menu.repaint();
}
