{
  Image statusImage;
  OperationSetPresence presence=callManager.getMainFrame().getProtocolPresenceOpSet(pps);
  if (presence != null) {
    statusImage=ImageLoader.getBytesInImage(presence.getPresenceStatus().getStatusIcon());
  }
 else   if (pps.isRegistered()) {
    statusImage=ImageLoader.getBytesInImage(pps.getProtocolIcon().getIcon(ProtocolIcon.ICON_SIZE_16x16));
  }
 else {
    statusImage=LightGrayFilter.createDisabledImage(ImageLoader.getBytesInImage(pps.getProtocolIcon().getIcon(ProtocolIcon.ICON_SIZE_16x16)));
  }
  int index=callManager.getMainFrame().getProviderIndex(pps);
  Image img=null;
  if (index > 0) {
    BufferedImage buffImage=new BufferedImage(22,16,BufferedImage.TYPE_INT_ARGB);
    Graphics2D g=(Graphics2D)buffImage.getGraphics();
    AlphaComposite ac=AlphaComposite.getInstance(AlphaComposite.SRC_OVER);
    AntialiasingManager.activateAntialiasing(g);
    g.setColor(Color.DARK_GRAY);
    g.setFont(Constants.FONT.deriveFont(Font.BOLD,9));
    g.drawImage(statusImage,0,0,null);
    g.setComposite(ac);
    g.drawString(new Integer(index + 1).toString(),14,8);
    img=buffImage;
  }
 else {
    img=statusImage;
  }
  return img;
}
