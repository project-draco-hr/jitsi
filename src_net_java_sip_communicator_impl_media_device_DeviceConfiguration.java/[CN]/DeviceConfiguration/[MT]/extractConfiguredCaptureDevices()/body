{
  ConfigurationService config=MediaActivator.getConfigurationService();
  logger.info("Scanning for configured Audio Devices.");
  CaptureDeviceInfo[] audioCaptureDevices=getAvailableAudioCaptureDevices();
  if (config.getBoolean(PROP_AUDIO_DEVICE_IS_DISABLED,false))   audioCaptureDevice=null;
 else   if (audioCaptureDevices.length < 1) {
    logger.warn("No Audio Device was found.");
    audioCaptureDevice=null;
  }
 else {
    logger.debug("Found " + audioCaptureDevices.length + " capture devices: "+ audioCaptureDevices);
    String audioDevName=config.getString(PROP_AUDIO_DEVICE);
    if (audioDevName == null)     audioCaptureDevice=audioCaptureDevices[0];
 else {
      for (      CaptureDeviceInfo captureDeviceInfo : audioCaptureDevices) {
        if (audioDevName.equals(captureDeviceInfo.getName())) {
          audioCaptureDevice=captureDeviceInfo;
          break;
        }
      }
    }
    if (audioCaptureDevice != null)     logger.info("Found " + audioCaptureDevice.getName() + " as an audio capture device.");
  }
  if (config.getBoolean(PROP_VIDEO_DEVICE_IS_DISABLED,false))   videoCaptureDevice=null;
 else {
    logger.info("Scanning for configured Video Devices.");
    videoCaptureDevice=extractConfiguredVideoCaptureDevice(VideoFormat.RGB);
    if (videoCaptureDevice == null) {
      videoCaptureDevice=extractConfiguredVideoCaptureDevice(VideoFormat.YUV);
      if (videoCaptureDevice == null)       logger.info("No Video Device was found.");
    }
  }
}
