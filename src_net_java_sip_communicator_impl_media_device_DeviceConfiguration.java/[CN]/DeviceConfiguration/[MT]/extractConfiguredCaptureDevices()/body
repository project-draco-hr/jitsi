{
  logger.info("Scanning for configured Audio Devices.");
  CaptureDeviceInfo[] audioCaptureDevices=getAvailableAudioCaptureDevices();
  if (audioCaptureDevices.length < 1) {
    logger.warn("No Audio Device was found.");
    audioCaptureDevice=null;
  }
 else {
    logger.debug("Found " + audioCaptureDevices.length + " capture devices: "+ audioCaptureDevices);
    String audioDevName=(String)MediaActivator.getConfigurationService().getProperty(PROP_AUDIO_DEVICE);
    if (audioDevName == null)     audioCaptureDevice=audioCaptureDevices[0];
 else {
      for (int i=0; i < audioCaptureDevices.length; i++) {
        CaptureDeviceInfo captureDeviceInfo=audioCaptureDevices[i];
        if (audioDevName.equals(captureDeviceInfo.getName()))         audioCaptureDevice=captureDeviceInfo;
      }
    }
    logger.info("Found " + audioCaptureDevice.getName() + " as an audio capture device.");
  }
  logger.info("Scanning for configured Video Devices.");
  Vector videoCaptureDevices=CaptureDeviceManager.getDeviceList(new VideoFormat(VideoFormat.RGB));
  if (videoCaptureDevices.size() > 0) {
    String videoDevName=(String)MediaActivator.getConfigurationService().getProperty(PROP_VIDEO_DEVICE);
    if (videoDevName == null) {
      videoCaptureDevice=(CaptureDeviceInfo)videoCaptureDevices.get(0);
    }
 else {
      for (int i=0; i < videoCaptureDevices.size(); i++) {
        CaptureDeviceInfo captureDeviceInfo=(CaptureDeviceInfo)videoCaptureDevices.get(i);
        if (videoDevName.equals(captureDeviceInfo.getName()))         videoCaptureDevice=captureDeviceInfo;
      }
    }
    logger.info("Found " + videoCaptureDevice.getName() + " as an RGB Video Device.");
  }
 else {
    videoCaptureDevices=CaptureDeviceManager.getDeviceList(new VideoFormat(VideoFormat.YUV));
    if (videoCaptureDevices.size() > 0) {
      String videoDevName=(String)MediaActivator.getConfigurationService().getProperty(PROP_VIDEO_DEVICE);
      if (videoDevName == null) {
        videoCaptureDevice=(CaptureDeviceInfo)videoCaptureDevices.get(0);
      }
 else {
        for (int i=0; i < videoCaptureDevices.size(); i++) {
          CaptureDeviceInfo captureDeviceInfo=(CaptureDeviceInfo)videoCaptureDevices.get(i);
          if (videoDevName.equals(captureDeviceInfo.getName()))           videoCaptureDevice=captureDeviceInfo;
        }
      }
      logger.info("Found " + videoCaptureDevice.getName() + " as an YUV Video Device.");
    }
 else {
      logger.info("No Video Device was found.");
      videoCaptureDevice=null;
    }
  }
}
