{
  assertConnected();
  if (!(to instanceof ContactIcqImpl))   throw new IllegalArgumentException("The specified contact is not a Icq contact." + to);
  ImConversation imConversation=icqProvider.getAimConnection().getIcbmService().getImConversation(new Screenname(to.getAddress()));
  if (to.getPresenceStatus().isOnline()) {
    imConversation.sendMessage(new SimpleMessage(message.getContent()));
  }
 else   imConversation.sendMessage(new SimpleMessage(message.getContent()),true);
  MessageDeliveredEvent msgDeliveredEvt=new MessageDeliveredEvent(message,to,new Date());
  fireMessageEvent(msgDeliveredEvt);
}
