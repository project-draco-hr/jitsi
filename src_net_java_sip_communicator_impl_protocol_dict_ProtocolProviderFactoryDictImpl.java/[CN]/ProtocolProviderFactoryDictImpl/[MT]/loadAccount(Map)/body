{
  if (bundleContext == null) {
    throw new NullPointerException("The specified BundleContext was null");
  }
  String userIDStr=(String)accountProperties.get(USER_ID);
  AccountID accountID=new DictAccountID(userIDStr,accountProperties);
  Hashtable properties=new Hashtable();
  properties.put(PROTOCOL,ProtocolNames.DICT);
  properties.put(USER_ID,userIDStr);
  ProtocolProviderServiceDictImpl dictProtocolProvider=new ProtocolProviderServiceDictImpl();
  dictProtocolProvider.initialize(userIDStr,accountID);
  ServiceRegistration registration=bundleContext.registerService(ProtocolProviderService.class.getName(),dictProtocolProvider,properties);
  registeredAccounts.put(accountID,registration);
  return accountID;
}
