{
  NotificationService notificationService=GuiActivator.getNotificationService();
  if (notificationService == null)   return;
  NotificationActionHandler popupActionHandler=null;
  Chat chatPanel=null;
  if (contact instanceof Contact)   chatPanel=GuiActivator.getUIService().getChat((Contact)contact);
 else   if (contact instanceof ChatRoom) {
    if (((ChatRoom)contact).isSystem())     return;
    chatPanel=GuiActivator.getUIService().getChat((ChatRoom)contact);
  }
  if (eventType.equals(INCOMING_MESSAGE) && chatPanel.isChatFocused()) {
    popupActionHandler=notificationService.getEventNotificationActionHandler(eventType,NotificationService.ACTION_POPUP_MESSAGE);
    popupActionHandler.setEnabled(false);
  }
  notificationService.fireNotification(eventType,messageTitle,message,contact);
  if (popupActionHandler != null)   popupActionHandler.setEnabled(true);
}
