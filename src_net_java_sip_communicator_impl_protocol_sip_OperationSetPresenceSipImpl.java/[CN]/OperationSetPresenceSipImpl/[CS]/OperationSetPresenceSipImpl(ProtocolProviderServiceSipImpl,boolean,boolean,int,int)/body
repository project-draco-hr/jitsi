{
  this.parentProvider=provider;
  this.contactListRoot=new ContactGroupSipImpl("RootGroup",provider);
  this.parentProvider.addRegistrationStateChangeListener(new RegistrationListener());
  this.parentProvider.registerMethodProcessor(Request.SUBSCRIBE,this);
  this.parentProvider.registerMethodProcessor(Request.NOTIFY,this);
  this.parentProvider.registerMethodProcessor(Request.PUBLISH,this);
  this.parentProvider.registerEvent("presence");
  logger.debug("presence initialized with :" + isPresenceEnabled + ", "+ forceP2PMode+ ", "+ pollingPeriod+ ", "+ subscriptionExpiration+ " for "+ provider.getOurDisplayName());
  if (pollingPeriod > 0) {
    this.pollingTaskPeriod=pollingPeriod * 1000;
  }
  this.useDistantPA=!forceP2PMode;
  if (subscriptionDuration > 0) {
    this.subscriptionDuration=subscriptionExpiration;
  }
  this.presenceEnabled=isPresenceEnabled;
  this.sipStatusEnum=parentProvider.getSipStatusEnum();
  this.presenceStatus=sipStatusEnum.getStatus(SipStatusEnum.OFFLINE);
}
