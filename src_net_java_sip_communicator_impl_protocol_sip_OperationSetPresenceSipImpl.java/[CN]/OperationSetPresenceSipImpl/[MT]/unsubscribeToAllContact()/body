{
  if (logger.isDebugEnabled())   logger.debug("trying to unsubscribe to every contact");
  Iterator<Contact> rootContactsIter=getServerStoredContactListRoot().contacts();
  while (rootContactsIter.hasNext()) {
    ContactSipImpl contact=(ContactSipImpl)rootContactsIter.next();
    try {
      unsubscribe(contact,false);
    }
 catch (    OperationFailedException ex) {
      logger.error("Failed to unsubscribe to contact " + contact,ex);
      return;
    }
  }
  Iterator<ContactGroup> groupsIter=getServerStoredContactListRoot().subgroups();
  while (groupsIter.hasNext()) {
    ContactGroup group=groupsIter.next();
    Iterator<Contact> contactsIter=group.contacts();
    while (contactsIter.hasNext()) {
      ContactSipImpl contact=(ContactSipImpl)contactsIter.next();
      try {
        unsubscribe(contact,false);
      }
 catch (      OperationFailedException ex) {
        logger.error("Failed to unsubscribe to contact " + contact,ex);
        return;
      }
    }
  }
}
