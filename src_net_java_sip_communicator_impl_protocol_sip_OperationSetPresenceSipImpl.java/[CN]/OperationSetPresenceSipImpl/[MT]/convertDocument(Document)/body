{
  DOMSource source=new DOMSource(document);
  StringWriter stringWriter=new StringWriter();
  StreamResult result=new StreamResult(stringWriter);
  try {
    if (this.transFactory == null)     this.transFactory=TransformerFactory.newInstance();
    if (this.transformer == null)     this.transformer=this.transFactory.newTransformer();
    this.transformer.transform(source,result);
  }
 catch (  Exception e) {
    logger.error("can't convert the xml document into a string",e);
    return null;
  }
  return stringWriter.toString();
}
