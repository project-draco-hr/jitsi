{
  if (this.presenceEnabled == false)   return false;
  Request request=requestEvent.getRequest();
  EventHeader eventHeader=(EventHeader)request.getHeader(EventHeader.NAME);
  if ((eventHeader == null) || !"presence".equalsIgnoreCase(eventHeader.getEventType())) {
    return false;
  }
  ServerTransaction serverTransaction=EventPackageSupport.getOrCreateServerTransaction(requestEvent);
  if (serverTransaction == null)   return false;
  boolean processed=false;
  if (request.getMethod().equals(Request.PUBLISH)) {
    Response response;
    try {
      response=parentProvider.getMessageFactory().createResponse(Response.NOT_IMPLEMENTED,request);
    }
 catch (    ParseException e) {
      logger.error("Error while creating the response 501",e);
      return false;
    }
    try {
      serverTransaction.sendResponse(response);
    }
 catch (    Exception e) {
      logger.error("Error while sending the response 501",e);
      return false;
    }
    processed=true;
  }
  return processed;
}
