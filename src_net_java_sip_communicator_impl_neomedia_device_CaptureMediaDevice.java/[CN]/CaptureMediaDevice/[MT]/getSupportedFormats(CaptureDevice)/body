{
  MediaType mediaType=getMediaType();
  Set<Format> supportedFormats=new HashSet<Format>();
  for (  FormatControl formatControl : captureDevice.getFormatControls()) {
    for (    Format format : formatControl.getSupportedFormats()) switch (mediaType) {
case AUDIO:
      if (format instanceof AudioFormat)       supportedFormats.add(format);
    break;
case VIDEO:
  if (format instanceof VideoFormat)   supportedFormats.add(format);
break;
}
}
List<MediaFormat> supportedMediaFormats=new ArrayList<MediaFormat>(supportedFormats.size());
for (Format format : supportedFormats) supportedMediaFormats.add(MediaFormatImpl.createInstance(format));
return supportedMediaFormats;
}
