{
  ArrayList<String> encryptionProtocolList=new ArrayList<String>(2);
  encryptionProtocolList.add("ZRTP");
  encryptionProtocolList.add("SDES");
  List<String> preferredEncryptionProtocols=getPeer().getProtocolProvider().getAccountID().getSortedEnabledEncryptionProtocolList(encryptionProtocolList);
  for (int i=0; i < preferredEncryptionProtocols.size(); ++i) {
    if (preferredEncryptionProtocols.get(i).equals("ZRTP")) {
      if (updateMediaDescriptionForZrtp(mediaType,localMd)) {
        return;
      }
    }
 else     if (preferredEncryptionProtocols.get(i).equals("SDES")) {
      if (updateMediaDescriptionForSDes(mediaType,localMd,remoteMd)) {
        return;
      }
    }
  }
}
