{
  MessageDeliveredEvent evt=new MessageDeliveredEvent(message,to,new Date());
  Iterator listeners=null;
synchronized (messageListeners) {
    listeners=new ArrayList(messageListeners).iterator();
  }
  while (listeners.hasNext()) {
    MessageListener listener=(MessageListener)listeners.next();
    listener.messageDelivered(evt);
  }
}
