{
  QTCaptureDevice[] inputDevices=QTCaptureDevice.inputDevicesWithMediaType(QTMediaType.Video);
  boolean captureDeviceInfoIsAdded=false;
  for (  QTCaptureDevice inputDevice : inputDevices) {
    CaptureDeviceInfo device=new CaptureDeviceInfo(inputDevice.localizedDisplayName(),new MediaLocator(LOCATOR_PROTOCOL + ':' + inputDevice.uniqueID()),new Format[]{new AVFrameFormat(FFmpeg.PIX_FMT_ARGB),new RGBFormat()});
    if (logger.isInfoEnabled()) {
      for (      QTFormatDescription f : inputDevice.formatDescriptions()) {
        logger.info("Webcam available resolution for " + inputDevice.localizedDisplayName() + ":"+ f.sizeForKey(QTFormatDescription.VideoEncodedPixelsSizeAttribute));
      }
    }
    CaptureDeviceManager.addDevice(device);
    captureDeviceInfoIsAdded=true;
    if (logger.isDebugEnabled())     logger.debug("Added CaptureDeviceInfo " + device);
  }
  if (captureDeviceInfoIsAdded && !MediaServiceImpl.isJmfRegistryDisableLoad())   CaptureDeviceManager.commit();
}
