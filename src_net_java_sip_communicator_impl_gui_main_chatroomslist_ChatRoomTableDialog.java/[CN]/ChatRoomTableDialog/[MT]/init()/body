{
  this.getContentPane().setLayout(new BorderLayout(5,5));
  JPanel northPanel=new TransparentPanel(new BorderLayout(5,5));
  northPanel.setBorder(BorderFactory.createEmptyBorder(15,15,5,15));
  JPanel labels=new TransparentPanel(new GridLayout(2,2,5,5));
  labels.add(new JLabel(GuiActivator.getResources().getI18NString("service.gui.ACCOUNT")));
  labels.add(new JLabel(GuiActivator.getResources().getI18NString("service.gui.ROOM_NAME")));
  JPanel valuesPanel=new TransparentPanel(new GridLayout(2,2,5,5));
  providersCombo=createProvidersCombobox();
  roomsCombo=new JComboBox();
  roomsCombo.setEditable(true);
  roomsCombo.setPreferredSize(providersCombo.getPreferredSize());
  editor=((JTextField)roomsCombo.getEditor().getEditorComponent());
  providersCombo.addItemListener(new ItemListener(){
    public void itemStateChanged(    ItemEvent e){
      if (e.getStateChange() == ItemEvent.SELECTED)       loadProviderRooms();
    }
  }
);
  roomsCombo.addItemListener(new ItemListener(){
    public void itemStateChanged(    ItemEvent e){
      if (e.getStateChange() == ItemEvent.SELECTED && roomsCombo.getSelectedIndex() > -1) {
        okButton.setEnabled(true);
      }
 else       if ((roomsCombo.getSelectedIndex() == -1 || e.getStateChange() == ItemEvent.DESELECTED) && editor.getText().trim().length() <= 0) {
        okButton.setEnabled(false);
      }
    }
  }
);
  valuesPanel.add(providersCombo);
  valuesPanel.add(roomsCombo);
  northPanel.add(labels,BorderLayout.WEST);
  northPanel.add(valuesPanel,BorderLayout.CENTER);
  northPanel.setPreferredSize(new Dimension(600,80));
  JPanel buttonPanel=new TransparentPanel(new BorderLayout(5,5));
  buttonPanel.setBorder(BorderFactory.createEmptyBorder(0,15,0,15));
  JPanel eastButtonPanel=new TransparentPanel();
  okButton.addActionListener(this);
  cancelButton.addActionListener(this);
  okButton.setToolTipText(GuiActivator.getResources().getI18NString("service.gui.JOIN_CHAT_ROOM"));
  eastButtonPanel.add(cancelButton);
  eastButtonPanel.add(okButton);
  buttonPanel.add(eastButtonPanel,BorderLayout.EAST);
  this.getContentPane().add(northPanel,BorderLayout.NORTH);
  this.getContentPane().add(buttonPanel,BorderLayout.CENTER);
  loadProviderRooms();
  editor.addKeyListener(new KeyListener(){
    public void keyTyped(    KeyEvent e){
    }
    public void keyPressed(    KeyEvent e){
    }
    public void keyReleased(    KeyEvent e){
      okButton.setEnabled((editor.getText().trim().length() > 0));
    }
  }
);
  GuiActivator.getMUCService().addChatRoomProviderWrapperListener(chatRoomProviderWrapperListener);
}
