{
  String[] joinOptions;
  String subject=null;
  JButton sourceButton=(JButton)e.getSource();
  if (sourceButton.equals(okButton)) {
    if (editor.getText() != null && editor.getText().trim().length() > 0) {
      ChatRoomWrapper chatRoomWrapper=GuiActivator.getMUCService().createChatRoom(editor.getText().trim(),getSelectedProvider().getProtocolProvider(),new ArrayList<String>(),"",false,false,false);
      joinOptions=ChatRoomJoinOptionsDialog.getJoinOptions(chatRoomWrapper.getParentProvider().getProtocolProvider(),chatRoomWrapper.getChatRoomID());
      String nickName=joinOptions[0];
      subject=joinOptions[1];
      if (nickName == null)       return;
      GuiActivator.getMUCService().joinChatRoom(chatRoomWrapper,nickName,null,subject);
      ChatWindowManager chatWindowManager=GuiActivator.getUIService().getChatWindowManager();
      ChatPanel chatPanel=chatWindowManager.getMultiChat(chatRoomWrapper,true);
      chatWindowManager.openChat(chatPanel,true);
    }
    dispose();
  }
 else   if (sourceButton.equals(cancelButton)) {
    dispose();
  }
}
