{
  FramedImage msgIcon=new FramedImage(defaultIcon,45,45);
  if (imageIcon != null) {
    ImageIcon contactIcon=new ImageIcon(imageIcon);
    msgIcon=new FramedImage(contactIcon,45,45);
  }
  JLabel msgTitle=new JLabel(titleString);
  int msgTitleHeight=msgTitle.getFontMetrics(msgTitle.getFont()).getHeight();
  msgTitle.setPreferredSize(new Dimension(200,msgTitleHeight));
  msgTitle.setFont(msgTitle.getFont().deriveFont(Font.BOLD));
  JTextArea msgContent=new JTextArea(message);
  msgContent.setLineWrap(true);
  msgContent.setWrapStyleWord(true);
  msgContent.setOpaque(false);
  msgContent.setAlignmentX(JTextArea.LEFT_ALIGNMENT);
  int msgContentHeight=getPopupMessageAreaHeight(msgContent,message);
  msgContent.setPreferredSize(new Dimension(200,msgContentHeight));
  TransparentPanel notificationBody=new TransparentPanel();
  notificationBody.setLayout(new BoxLayout(notificationBody,BoxLayout.Y_AXIS));
  notificationBody.setBorder(BorderFactory.createEmptyBorder(0,0,0,0));
  notificationBody.add(msgTitle);
  notificationBody.add(msgContent);
  TransparentPanel notificationContent=new TransparentPanel();
  notificationContent.setLayout(new BorderLayout(5,0));
  notificationContent.setBorder(BorderFactory.createEmptyBorder(5,5,5,5));
  notificationContent.add(msgIcon,BorderLayout.WEST);
  notificationContent.add(notificationBody,BorderLayout.CENTER);
  return new PopupNotificationPanel(notificationContent,tag);
}
