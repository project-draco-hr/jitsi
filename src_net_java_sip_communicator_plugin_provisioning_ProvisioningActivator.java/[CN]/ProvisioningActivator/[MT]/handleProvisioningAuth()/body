{
  ConfigurationService configService=getConfigurationService();
  CredentialsStorageService credService=getCredentialsStorageService();
  String username=configService.getString(PROPERTY_PROVISIONING_USERNAME);
  String password=credService.loadPassword(PROPERTY_PROVISIONING_PASSWORD);
  if (username != null && password != null) {
    userCredentials=new UserCredentials();
    userCredentials.setUserName(username);
    userCredentials.setPassword(password.toCharArray());
    userCredentials.setPasswordPersistent(true);
    return;
  }
  AuthenticationWindow authWindow=new AuthenticationWindow("provisioning",true,null);
  authWindow.setVisible(true);
  if (!authWindow.isCanceled()) {
    userCredentials=new UserCredentials();
    userCredentials.setUserName(authWindow.getUserName());
    userCredentials.setPassword(authWindow.getPassword());
    userCredentials.setPasswordPersistent(authWindow.isRememberPassword());
    if (userCredentials.getUserName() == null) {
      userCredentials=null;
    }
  }
 else {
    userCredentials=null;
  }
}
