{
  if ("custom".equals(settings.getQueryMode())) {
    return settings.getCustomQuery().replace("<query>",query);
  }
  StringBuffer searchFilter=new StringBuffer();
  searchFilter.append("(|");
  for (  String attribute : searchableAttrs) {
    searchFilter.append("(");
    searchFilter.append(attribute);
    searchFilter.append("=");
    searchFilter.append(query);
    searchFilter.append(")");
  }
  searchFilter.append(")");
  return searchFilter.toString();
}
