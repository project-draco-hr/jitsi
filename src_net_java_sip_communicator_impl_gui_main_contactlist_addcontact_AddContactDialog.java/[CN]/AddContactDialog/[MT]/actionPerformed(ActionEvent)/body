{
  JButton button=(JButton)e.getSource();
  String name=button.getName();
  if (name.equals("add")) {
    if (metaContact != null) {
      this.clist.addNewContactToMetaContact(pps,metaContact,addContactPanel.getUIN());
    }
 else     if (group != null) {
      new Thread(){
        public void run(){
          String uin=addContactPanel.getUIN();
          try {
            clist.createMetaContact(pps,group,uin);
          }
 catch (          MetaContactListException ex) {
            logger.error(ex);
            ex.printStackTrace();
            int errorCode=ex.getErrorCode();
            if (errorCode == MetaContactListException.CODE_CONTACT_ALREADY_EXISTS_ERROR) {
              JOptionPane.showMessageDialog(mainFrame,Messages.getI18NString("addContactExistError",uin).getText(),Messages.getI18NString("addContactErrorTitle").getText(),JOptionPane.ERROR_MESSAGE);
            }
 else             if (errorCode == MetaContactListException.CODE_LOCAL_IO_ERROR) {
              JOptionPane.showMessageDialog(mainFrame,Messages.getI18NString("addContactError",uin).getText(),Messages.getI18NString("addContactErrorTitle").getText(),JOptionPane.ERROR_MESSAGE);
            }
 else             if (errorCode == MetaContactListException.CODE_NETWORK_ERROR) {
              JOptionPane.showMessageDialog(mainFrame,Messages.getI18NString("addContactError",uin).getText(),Messages.getI18NString("addContactErrorTitle").getText(),JOptionPane.ERROR_MESSAGE);
            }
 else {
              JOptionPane.showMessageDialog(mainFrame,Messages.getI18NString("addContactError",uin).getText(),Messages.getI18NString("addContactErrorTitle").getText(),JOptionPane.WARNING_MESSAGE);
            }
          }
        }
      }
.start();
    }
    this.dispose();
  }
 else {
    this.dispose();
  }
}
