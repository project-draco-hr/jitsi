{
  JButton button=(JButton)e.getSource();
  String name=button.getName();
  if (name.equals("add")) {
    if (metaContact != null) {
      new Thread(){
        public void run(){
          clist.addNewContactToMetaContact(pps,metaContact,addContactPanel.getUIN());
        }
      }
.start();
    }
 else     if (group != null) {
      new Thread(){
        public void run(){
          String uin=addContactPanel.getUIN();
          try {
            clist.createMetaContact(pps,group,uin);
          }
 catch (          MetaContactListException ex) {
            logger.error(ex);
            ex.printStackTrace();
            int errorCode=ex.getErrorCode();
            if (errorCode == MetaContactListException.CODE_CONTACT_ALREADY_EXISTS_ERROR) {
              new ErrorDialog(mainFrame,GuiActivator.getResources().getI18NString("service.gui.ADD_CONTACT_ERROR_TITLE"),GuiActivator.getResources().getI18NString("service.gui.ADD_CONTACT_EXIST_ERROR",new String[]{uin}),ex).showDialog();
            }
 else             if (errorCode == MetaContactListException.CODE_NETWORK_ERROR) {
              new ErrorDialog(mainFrame,GuiActivator.getResources().getI18NString("service.gui.ADD_CONTACT_ERROR_TITLE"),GuiActivator.getResources().getI18NString("service.gui.ADD_CONTACT_NETWORK_ERROR",new String[]{uin}),ex).showDialog();
            }
 else {
              new ErrorDialog(mainFrame,GuiActivator.getResources().getI18NString("service.gui.ADD_CONTACT_ERROR_TITLE"),GuiActivator.getResources().getI18NString("service.gui.ADD_CONTACT_ERROR",new String[]{uin}),ex).showDialog();
            }
          }
          ConfigurationManager.setLastContactParent(group.getGroupName());
        }
      }
.start();
    }
    this.dispose();
  }
 else {
    this.dispose();
  }
}
