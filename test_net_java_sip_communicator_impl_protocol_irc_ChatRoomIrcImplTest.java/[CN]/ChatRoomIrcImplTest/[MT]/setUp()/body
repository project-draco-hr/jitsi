{
  super.setUp();
  this.providerMock=EasyMock.createMock(ProtocolProviderServiceIrcImpl.class);
  this.stackMock=EasyMock.createMock(IrcStack.class);
  this.connectionMock=EasyMock.createMock(IrcConnection.class);
  EasyMock.expect(this.providerMock.getIrcStack()).andReturn(stackMock);
  EasyMock.expect(this.stackMock.getConnection()).andReturn(this.connectionMock);
  EasyMock.expect(this.connectionMock.getChannelTypes()).andReturn(Collections.unmodifiableSet(Sets.newHashSet('#','&')));
}
