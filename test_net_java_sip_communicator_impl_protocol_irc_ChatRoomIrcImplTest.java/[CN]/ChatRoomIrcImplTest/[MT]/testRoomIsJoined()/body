{
  EasyMock.expect(this.providerMock.getIrcStack()).andReturn(this.stackMock).andReturn(this.stackMock);
  EasyMock.expect(this.stackMock.isJoined(EasyMock.anyObject(ChatRoomIrcImpl.class))).andReturn(false).andReturn(true);
  EasyMock.replay(this.providerMock,this.stackMock);
  ChatRoomIrcImpl room=new ChatRoomIrcImpl("#my-cool-channel",this.providerMock);
  Assert.assertFalse(room.isJoined());
  Assert.assertTrue(room.isJoined());
}
