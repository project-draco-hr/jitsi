{
  JMenuItem menuItem=(JMenuItem)e.getSource();
  String itemName=menuItem.getName();
  if (itemName.equals(Constants.ONLINE_STATUS)) {
    if (!protocolProvider.isRegistered()) {
      this.mainFrame.getLoginManager().login(protocolProvider);
    }
  }
 else {
    if (!protocolProvider.getRegistrationState().equals(RegistrationState.UNREGISTERED) && !protocolProvider.getRegistrationState().equals(RegistrationState.UNREGISTERING)) {
      try {
        mainFrame.getLoginManager().setManuallyDisconnected(true);
        protocolProvider.unregister();
      }
 catch (      OperationFailedException e1) {
        logger.error("Unable to unregister the protocol provider: " + protocolProvider + " due to the following exception: "+ e1);
      }
    }
  }
  saveStatusInformation(protocolProvider,Constants.OFFLINE_STATUS);
}
