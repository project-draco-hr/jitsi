{
  int[] outputSamples=new int[outputSampleCount];
  if (inputSamples.length == 1) {
    int[] inputStreamSamples=inputSamples[0];
    if (inputStreamSamples != null)     System.arraycopy(inputStreamSamples,0,outputSamples,0,inputStreamSamples.length);
    return outputSamples;
  }
  int maxOutputSample;
  try {
    maxOutputSample=getMaxOutputSample(outputFormat);
  }
 catch (  UnsupportedFormatException ufex) {
    throw new UnsupportedOperationException(ufex);
  }
  for (  int[] inputStreamSamples : inputSamples) {
    if (inputStreamSamples == null)     continue;
    int inputStreamSampleCount=inputStreamSamples.length;
    if (inputStreamSampleCount <= 0)     continue;
    for (int i=0; i < inputStreamSampleCount; i++) {
      int inputStreamSample=inputStreamSamples[i];
      int outputSample=outputSamples[i];
      outputSamples[i]=inputStreamSample + outputSample - Math.round(inputStreamSample * (outputSample / (float)maxOutputSample));
    }
  }
  return outputSamples;
}
