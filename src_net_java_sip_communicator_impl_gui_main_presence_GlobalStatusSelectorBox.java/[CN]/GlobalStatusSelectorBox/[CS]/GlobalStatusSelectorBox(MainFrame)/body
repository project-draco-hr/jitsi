{
  super();
  this.mainFrame=mainFrame;
  JLabel titleLabel=new JLabel(GuiActivator.getResources().getI18NString("service.gui.SET_GLOBAL_STATUS"));
  titleLabel.setBorder(BorderFactory.createEmptyBorder(0,5,0,0));
  titleLabel.setFont(titleLabel.getFont().deriveFont(Font.BOLD));
  this.add(titleLabel);
  this.addSeparator();
  String ignoreStrValue=GuiActivator.getResources().getSettingsString("net.java.sip.communicator.service.protocol.globalstatus" + ".IGNORE_NONPRESENCEOPSET_PROTOCOLS");
  if (ignoreStrValue != null)   ignoreNonPresenceOpSetProtocols=Boolean.valueOf(ignoreStrValue);
  PresenceStatus offlineStatus=null;
  for (  GlobalStatusEnum status : GlobalStatusEnum.globalStatusSet) {
    group.add(createMenuItem(status));
    if (status.getStatus() < 1)     offlineStatus=status;
  }
  if (!ConfigurationManager.isHideAccountStatusSelectorsEnabled())   this.addSeparator();
  this.setFont(titleLabel.getFont().deriveFont(Font.PLAIN,11f));
  if (offlineStatus != null)   this.setIcon(new ImageIcon(offlineStatus.getStatusIcon()));
  this.setIconTextGap(2);
  this.setOpaque(false);
  this.setText("Offline");
  this.setToolTipText("<html><b>" + GuiActivator.getResources().getI18NString("service.gui.SET_GLOBAL_STATUS") + "</b></html>");
  fitSizeToText();
}
