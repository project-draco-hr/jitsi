{
  OperationSetPersistentPresence presenceOpSet=(OperationSetPersistentPresence)protocolProvider.getOperationSet(OperationSetPresence.class);
  boolean isHidden=protocolProvider.getAccountID().getAccountProperties().get(ProtocolProviderFactory.IS_PROTOCOL_HIDDEN) != null;
  if (isHidden)   return;
  StatusSelectorMenu statusSelectorMenu=null;
  if (presenceOpSet != null) {
    statusSelectorMenu=new PresenceStatusMenu(mainFrame,protocolProvider);
  }
 else {
    statusSelectorMenu=new SimpleStatusMenu(mainFrame,protocolProvider);
  }
  this.add(statusSelectorMenu);
  this.accountMenus.put(protocolProvider,statusSelectorMenu);
}
