{
  boolean interrupted=false;
  while (streamIsBusy) {
    try {
      wait();
    }
 catch (    InterruptedException iex) {
      interrupted=true;
    }
  }
  if (interrupted)   Thread.currentThread().interrupt();
  try {
    PortAudio.Pa_StopStream(stream);
  }
 catch (  PortAudioException paex) {
    logger.error("Failed to stop " + getClass().getSimpleName(),paex);
    IOException ioex=new IOException(paex.getLocalizedMessage());
    ioex.initCause(paex);
    throw ioex;
  }
}
