{
  EventNotification notification=null;
  if (notificationsTable.containsKey(eventType))   notification=(EventNotification)notificationsTable.get(eventType);
 else {
    notification=new EventNotification(eventType);
    notificationsTable.put(eventType,notification);
    this.fireNotificationEventTypeEvent(NotificationEventTypeEvent.EVENT_TYPE_ADDED,eventType);
    this.saveNotification(eventType,actionType,handler);
  }
  Object existingAction=notification.addAction(actionType,handler);
  if (existingAction != null) {
    fireNotificationActionTypeEvent(NotificationActionTypeEvent.ACTION_CHANGED,eventType,actionType,handler);
  }
 else {
    fireNotificationActionTypeEvent(NotificationActionTypeEvent.ACTION_ADDED,eventType,actionType,handler);
  }
}
