{
  FacebookOutgoingMailboxMessage msg=new FacebookOutgoingMailboxMessage(session);
  msg.setAddress(to.getAddress());
  msg.setContent(message.getContent());
  msg.setSubject(message.getSubject());
  msg.setUid(message.getMessageUID());
  try {
    msg.send();
    return null;
  }
 catch (  BrokenFacebookProtocolException e) {
    logger.error(e);
    return new MessageDeliveryFailedEvent(message,to,-1,System.currentTimeMillis(),e.getMessage());
  }
catch (  IOException e) {
    logger.warn(e);
    return new MessageDeliveryFailedEvent(message,to,-1,System.currentTimeMillis(),e.getMessage());
  }
catch (  FacebookErrorException e) {
    return new MessageDeliveryFailedEvent(message,to,e.getCode());
  }
}
