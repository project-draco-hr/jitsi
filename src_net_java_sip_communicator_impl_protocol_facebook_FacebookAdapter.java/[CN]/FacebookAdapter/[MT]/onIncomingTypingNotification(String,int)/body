{
  if (!buddyUid.equals(this.session.getUid())) {
    Contact fromContact=persistentPresence.findContactByID(buddyUid);
    if (fromContact == null)     fromContact=persistentPresence.createVolatileContact(buddyUid);
    int typingState=OperationSetTypingNotifications.STATE_UNKNOWN;
switch (state) {
case 1:
      typingState=OperationSetTypingNotifications.STATE_TYPING;
    break;
case 0:
  typingState=OperationSetTypingNotifications.STATE_STOPPED;
break;
default :
typingState=OperationSetTypingNotifications.STATE_UNKNOWN;
}
typingNotifications.receivedTypingNotification(fromContact,typingState);
}
}
