{
  Contact contact=this.contact;
  String stringContact=this.stringContact;
  if (ConfigurationUtils.isNormalizePhoneNumber()) {
    if (contact != null) {
      stringContact=contact.getAddress();
      contact=null;
    }
    stringContact=PhoneNumberI18nService.normalize(stringContact);
  }
  try {
    if (video) {
      OperationSetVideoTelephony telephony=protocolProvider.getOperationSet(OperationSetVideoTelephony.class);
      if (telephony != null) {
        if (contact != null)         telephony.createVideoCall(contact);
 else         if (stringContact != null)         telephony.createVideoCall(stringContact);
      }
    }
 else {
      OperationSetBasicTelephony<?> telephony=protocolProvider.getOperationSet(OperationSetBasicTelephony.class);
      if (telephony != null) {
        if (contact != null)         telephony.createCall(contact);
 else         if (stringContact != null && stringContact.length() > 0)         telephony.createCall(stringContact);
      }
    }
  }
 catch (  Throwable t) {
    if (t instanceof ThreadDeath)     throw (ThreadDeath)t;
    logger.error("The call could not be created: ",t);
    String message=GuiActivator.getResources().getI18NString("servoce.gui.CREATE_CALL_FAILED");
    if (t.getMessage() != null)     message+=" " + t.getMessage();
    new ErrorDialog(null,GuiActivator.getResources().getI18NString("service.gui.ERROR"),message,t).showDialog();
  }
}
