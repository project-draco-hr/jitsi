{
  JButton button=(JButton)evt.getSource();
  String buttonName=button.getName();
  if (buttonName.equals("call")) {
    Component selectedPanel=mainFrame.getSelectedTab();
    if (selectedPanel != null && selectedPanel instanceof CallPanel && ((CallPanel)selectedPanel).getCall().getCallState() == CallState.CALL_INITIALIZATION) {
      NotificationManager.stopSound(NotificationManager.BUSY_CALL);
      NotificationManager.stopSound(NotificationManager.INCOMING_CALL);
      CallPanel callPanel=(CallPanel)selectedPanel;
      Iterator participantPanels=callPanel.getParticipantsPanels();
      while (participantPanels.hasNext()) {
        CallParticipantPanel panel=(CallParticipantPanel)participantPanels.next();
        panel.setState("Connecting");
      }
      Call call=callPanel.getCall();
      answerCall(call);
    }
 else     if (selectedPanel != null && selectedPanel instanceof CallListPanel && ((CallListPanel)selectedPanel).getCallList().getSelectedIndex() != -1) {
      CallListPanel callListPanel=(CallListPanel)selectedPanel;
      GuiCallParticipantRecord callRecord=(GuiCallParticipantRecord)callListPanel.getCallList().getSelectedValue();
      String stringContact=callRecord.getParticipantName();
      createCall(stringContact);
    }
 else     if (selectedPanel != null && selectedPanel instanceof ContactListPanel) {
      if (isCallMetaContact) {
        Object[] selectedContacts=mainFrame.getContactListPanel().getContactList().getSelectedValues();
        Vector telephonyContacts=new Vector();
        for (int i=0; i < selectedContacts.length; i++) {
          Object o=selectedContacts[i];
          if (o instanceof MetaContact) {
            Contact contact=((MetaContact)o).getDefaultContact(OperationSetBasicTelephony.class);
            if (contact != null)             telephonyContacts.add(contact);
 else {
              new ErrorDialog(this.mainFrame,Messages.getI18NString("contactNotSupportingTelephony",new String[]{((MetaContact)o).getDisplayName()}).getText(),Messages.getI18NString("warning").getText()).showDialog();
            }
          }
        }
        if (telephonyContacts.size() > 0)         createCall(telephonyContacts);
      }
 else       if (!phoneNumberCombo.isComboFieldEmpty()) {
        String stringContact=phoneNumberCombo.getEditor().getItem().toString();
        createCall(stringContact);
      }
    }
 else     if (selectedPanel != null && selectedPanel instanceof DialPanel) {
      String stringContact=phoneNumberCombo.getEditor().getItem().toString();
      createCall(stringContact);
    }
  }
 else   if (buttonName.equalsIgnoreCase("hangup")) {
    Component selectedPanel=this.mainFrame.getSelectedTab();
    if (selectedPanel != null && selectedPanel instanceof CallPanel) {
      NotificationManager.stopSound(NotificationManager.BUSY_CALL);
      NotificationManager.stopSound(NotificationManager.INCOMING_CALL);
      NotificationManager.stopSound(NotificationManager.OUTGOING_CALL);
      CallPanel callPanel=(CallPanel)selectedPanel;
      Call call=callPanel.getCall();
      if (removeCallTimers.containsKey(callPanel)) {
        ((Timer)removeCallTimers.get(callPanel)).stop();
        removeCallTimers.remove(callPanel);
      }
      removeCallPanel(callPanel);
      if (call != null) {
        ProtocolProviderService pps=call.getProtocolProvider();
        OperationSetBasicTelephony telephony=mainFrame.getTelephonyOpSet(pps);
        Iterator participants=call.getCallParticipants();
        while (participants.hasNext()) {
          try {
            telephony.hangupCallParticipant((CallParticipant)participants.next());
          }
 catch (          OperationFailedException e) {
            logger.error("Hang up was not successful: " + e);
          }
        }
      }
    }
  }
 else   if (buttonName.equalsIgnoreCase("minimize")) {
    JCheckBoxMenuItem hideCallPanelItem=mainFrame.getMainMenu().getViewMenu().getHideCallPanelItem();
    if (!hideCallPanelItem.isSelected())     hideCallPanelItem.setSelected(true);
    this.setCallPanelVisible(false);
  }
 else   if (buttonName.equalsIgnoreCase("restore")) {
    JCheckBoxMenuItem hideCallPanelItem=mainFrame.getMainMenu().getViewMenu().getHideCallPanelItem();
    if (hideCallPanelItem.isSelected())     hideCallPanelItem.setSelected(false);
    this.setCallPanelVisible(true);
  }
}
