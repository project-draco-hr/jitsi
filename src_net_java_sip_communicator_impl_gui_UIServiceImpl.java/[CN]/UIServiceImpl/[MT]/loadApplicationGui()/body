{
  this.setDefaultThemePack();
  boolean touch=GuiActivator.getConfigurationService().getBoolean("net.java.sip.communicator.TOUCHSCREEN",false);
  if (!touch)   this.mainFrame=new MainFrameStandard();
 else   this.mainFrame=new MainFrameTouch();
  if (UIManager.getLookAndFeel() instanceof SIPCommLookAndFeel)   initCustomFonts();
  mainFrame.setContactList(GuiActivator.getContactListService());
  this.mainFrame.initBounds();
  GuiActivator.getUIService().registerExportedWindow(mainFrame);
  this.loginManager=new LoginManager(mainFrame);
  this.popupDialog=new PopupDialogImpl();
  this.wizardContainer=new AccountRegWizardContainerImpl(mainFrame);
  if (ConfigurationManager.isTransparentWindowEnabled()) {
    try {
      WindowUtils.setWindowTransparent(mainFrame,true);
    }
 catch (    UnsupportedOperationException ex) {
      logger.error(ex.getMessage(),ex);
      ConfigurationManager.setTransparentWindowEnabled(false);
    }
  }
  if (ConfigurationManager.isApplicationVisible())   mainFrame.setVisible(true);
  SwingUtilities.invokeLater(new RunLoginGui());
  this.initExportedWindows();
  KeyboardFocusManager focusManager=KeyboardFocusManager.getCurrentKeyboardFocusManager();
  focusManager.addKeyEventDispatcher(new KeyBindingsDispatching(focusManager));
}
