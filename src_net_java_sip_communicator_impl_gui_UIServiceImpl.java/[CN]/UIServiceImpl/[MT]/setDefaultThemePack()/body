{
  UIManager.put("ClassLoader",getClass().getClassLoader());
  String osName=System.getProperty("os.name");
  if (!osName.startsWith("Mac")) {
    String laf=UIManager.getSystemLookAndFeelClassName();
    boolean lafIsSet=false;
    if ((laf != null) && !laf.equals(UIManager.getCrossPlatformLookAndFeelClassName())) {
      try {
        UIManager.setLookAndFeel(laf);
        lafIsSet=true;
      }
 catch (      ClassNotFoundException ex) {
      }
catch (      InstantiationException ex) {
      }
catch (      IllegalAccessException ex) {
      }
catch (      UnsupportedLookAndFeelException ex) {
      }
    }
    if (!lafIsSet) {
      try {
        SIPCommLookAndFeel lf=new SIPCommLookAndFeel();
        SIPCommLookAndFeel.setCurrentTheme(new SIPCommDefaultTheme());
        boolean isDecorated=new Boolean(GuiActivator.getResources().getSettingsString("isLookAndFeelDecorated")).booleanValue();
        if (isDecorated) {
          JFrame.setDefaultLookAndFeelDecorated(true);
          JDialog.setDefaultLookAndFeelDecorated(true);
        }
        UIManager.setLookAndFeel(lf);
      }
 catch (      UnsupportedLookAndFeelException e) {
        logger.error("The provided Look & Feel is not supported.",e);
      }
    }
  }
}
