{
  UIManager.put("ClassLoader",getClass().getClassLoader());
  String osName=System.getProperty("os.name");
  if (!osName.startsWith("Mac")) {
    String laf;
    boolean lafIsSet=false;
    if (osName.contains("Windows")) {
      laf="com.sun.java.swing.plaf.windows.WindowsLookAndFeel";
    }
 else     if (osName.contains("Linux")) {
      laf="com.sun.java.swing.plaf.gtk.GTKLookAndFeel";
    }
 else {
      laf=null;
    }
    if (laf != null) {
      try {
        UIManager.setLookAndFeel(laf);
        lafIsSet=true;
      }
 catch (      ClassNotFoundException ex) {
      }
catch (      InstantiationException ex) {
      }
catch (      IllegalAccessException ex) {
      }
catch (      UnsupportedLookAndFeelException ex) {
      }
    }
    if (!lafIsSet) {
      try {
        SIPCommLookAndFeel lf=new SIPCommLookAndFeel();
        SIPCommLookAndFeel.setCurrentTheme(new SIPCommDefaultTheme());
        boolean isDecorated=new Boolean(GuiActivator.getResources().getSettingsString("isLookAndFeelDecorated")).booleanValue();
        if (isDecorated) {
          JFrame.setDefaultLookAndFeelDecorated(true);
          JDialog.setDefaultLookAndFeelDecorated(true);
        }
        UIManager.setLookAndFeel(lf);
      }
 catch (      UnsupportedLookAndFeelException e) {
        logger.error("The provided Look & Feel is not supported.",e);
      }
    }
  }
}
