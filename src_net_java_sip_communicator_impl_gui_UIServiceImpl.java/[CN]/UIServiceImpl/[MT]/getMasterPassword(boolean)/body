{
  ResourceManagementService resources=GuiActivator.getResources();
  Object[] msg;
  String inputMsg=resources.getI18NString("plugin.securityconfig.masterpassword.MP_INPUT");
  JPasswordField passwordField=new JPasswordField();
  if (!prevSuccess) {
    String errorMsg="<html><font color=\"red\">" + resources.getI18NString("plugin.securityconfig.masterpassword" + ".MP_VERIFICATION_FAILURE_MSG") + "</font></html>";
    msg=new Object[]{errorMsg,inputMsg,passwordField};
  }
 else   msg=new Object[]{inputMsg,passwordField};
  passwordField.setText("");
  int chosenOption=JOptionPane.showOptionDialog(null,msg,resources.getI18NString("plugin.securityconfig.masterpassword.MP_TITLE"),JOptionPane.YES_NO_OPTION,JOptionPane.QUESTION_MESSAGE,null,new String[]{resources.getI18NString("service.gui.OK"),resources.getI18NString("service.gui.CANCEL")},null);
  return (chosenOption == JOptionPane.YES_OPTION) ? new String(passwordField.getPassword()) : null;
}
