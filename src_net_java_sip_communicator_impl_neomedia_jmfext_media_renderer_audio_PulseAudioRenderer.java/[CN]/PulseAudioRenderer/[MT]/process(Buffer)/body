{
  if (buffer.isDiscard())   return BUFFER_PROCESSED_OK;
  if (buffer.getLength() <= 0)   return BUFFER_PROCESSED_OK;
  int ret;
  pulseAudioSystem.lockMainloop();
  try {
    ret=processWithMainloopLock(buffer);
  }
  finally {
    pulseAudioSystem.unlockMainloop();
  }
  if ((ret != BUFFER_PROCESSED_FAILED) && (buffer.getLength() > 0))   ret|=INPUT_BUFFER_NOT_CONSUMED;
  return ret;
}
