{
  IceMediaStream stream;
  PortTracker portTracker;
  try {
    portTracker=getPortTracker(media);
    stream=getNetAddrMgr().createIceStream(portTracker.getPort(),media,iceAgent);
  }
 catch (  Exception ex) {
    throw new OperationFailedException("Failed to initialize stream " + media,OperationFailedException.INTERNAL_ERROR,ex);
  }
  try {
    portTracker.setNextPort(1 + stream.getComponent(Component.RTCP).getLocalCandidates().get(0).getTransportAddress().getPort());
  }
 catch (  Throwable t) {
    logger.debug("Determining next port didn't work: ",t);
  }
  return stream;
}
