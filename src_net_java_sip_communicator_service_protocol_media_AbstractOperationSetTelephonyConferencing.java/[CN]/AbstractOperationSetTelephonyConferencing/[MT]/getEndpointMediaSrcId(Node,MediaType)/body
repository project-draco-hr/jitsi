{
  NodeList endpointChildList=endpoint.getChildNodes();
  int endpoingChildCount=endpointChildList.getLength();
  String mediaTypeStr=mediaType.toString();
  for (int endpointChildIndex=0; endpointChildIndex < endpoingChildCount; endpointChildIndex++) {
    Node endpointChild=endpointChildList.item(endpointChildIndex);
    if (ELEMENT_MEDIA.equals(endpointChild.getNodeName())) {
      NodeList mediaChildList=endpointChild.getChildNodes();
      int mediaChildCount=mediaChildList.getLength();
      String srcId=null;
      String type=null;
      for (int mediaChildIndex=0; mediaChildIndex < mediaChildCount; mediaChildIndex++) {
        Node mediaChild=mediaChildList.item(mediaChildIndex);
        String mediaChildName=mediaChild.getNodeName();
        if (ELEMENT_SRC_ID.equals(mediaChildName)) {
          srcId=mediaChild.getTextContent();
          if (mediaTypeStr.equalsIgnoreCase(type))           return srcId;
        }
 else         if (ELEMENT_TYPE.equals(mediaChildName)) {
          type=mediaChild.getTextContent();
          if ((srcId != null) && mediaTypeStr.equalsIgnoreCase(type)) {
            return srcId;
          }
        }
      }
    }
  }
  return null;
}
