{
  Icon fileIcon=null;
  try {
    fileIcon=FileSystemView.getFileSystemView().getSystemIcon(file);
  }
 catch (  Exception e) {
    logger.debug("Failed to obtain file icon from ShellFolder.",e);
    try {
      fileIcon=new JFileChooser().getIcon(file);
    }
 catch (    Exception e1) {
      logger.debug("Failed to obtain file icon from JFileChooser.",e1);
    }
  }
  return fileIcon;
}
