{
  AudioFormat inputFormat=(AudioFormat)super.setInputFormat(format);
  if (inputFormat != null) {
    double outputSampleRate=(outputFormat == null) ? inputFormat.getSampleRate() : ((AudioFormat)outputFormat).getSampleRate();
    setOutputFormat(new AudioFormat(inputFormat.getEncoding(),outputSampleRate,inputFormat.getSampleSizeInBits(),inputFormat.getChannels(),inputFormat.getEndian(),inputFormat.getSigned(),Format.NOT_SPECIFIED,Format.NOT_SPECIFIED,inputFormat.getDataType()));
  }
  return inputFormat;
}
