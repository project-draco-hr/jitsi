{
  SipRegistrarConnection srConnection=getRegistrarConnection();
  if (srConnection != null) {
    String registrarTransport=srConnection.getTransport();
    if (registrarTransport != null && registrarTransport.length() > 0) {
      return registrarTransport;
    }
  }
  if (outboundProxySocketAddress != null && outboundProxyTransport != null) {
    return outboundProxyTransport;
  }
 else {
    String userSpecifiedDefaultTransport=SipActivator.getConfigurationService().getString(DEFAULT_TRANSPORT);
    if (userSpecifiedDefaultTransport != null) {
      return userSpecifiedDefaultTransport;
    }
 else {
      String defTransportDefaultValue=SipActivator.getResources().getSettingsString(DEFAULT_TRANSPORT);
      if (!StringUtils.isNullOrEmpty(defTransportDefaultValue))       return defTransportDefaultValue;
 else       return ListeningPoint.UDP;
    }
  }
}
