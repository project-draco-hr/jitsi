{
  SRVRecord srvRecords[]=null;
  if (srvQueryString) {
    srvRecords=NetworkUtils.getSRVRecords(address);
  }
 else {
    srvRecords=NetworkUtils.getSRVRecords(transport.equalsIgnoreCase(ListeningPoint.TLS) ? "sips" : "sip",transport.equalsIgnoreCase(ListeningPoint.UDP) ? ListeningPoint.UDP : ListeningPoint.TCP,address);
  }
  if (srvRecords != null) {
    ArrayList<InetSocketAddress> tempResultAddresses=new ArrayList<InetSocketAddress>();
    for (    SRVRecord s : srvRecords) {
      try {
        resolveAddresses(s.getTarget(),tempResultAddresses,preferIPv6Addresses,s.getPort());
      }
 catch (      UnknownHostException e) {
        logger.warn("Address unknown:" + s.getTarget(),e);
      }
      if (logger.isTraceEnabled())       logger.trace("Returned SRV " + s);
    }
    for (    InetSocketAddress a : tempResultAddresses) {
      if (!resultAddresses.contains(a)) {
        resultAddresses.add(a);
        resultTransports.add(transport);
      }
    }
  }
}
