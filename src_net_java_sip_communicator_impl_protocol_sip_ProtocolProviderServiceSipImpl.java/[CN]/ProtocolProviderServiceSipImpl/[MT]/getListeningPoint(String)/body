{
  if (logger.isTraceEnabled())   logger.trace("Query for a " + transport + " listening point");
  if (getOutboundProxy() != null) {
    logger.trace("Will use proxy address");
    transport=outboundProxyTransport;
  }
  if (transport == null || transport.trim().length() == 0 || (!transport.trim().equalsIgnoreCase(ListeningPoint.TCP) && !transport.trim().equalsIgnoreCase(ListeningPoint.UDP) && !transport.trim().equalsIgnoreCase(ListeningPoint.TLS))) {
    transport=getDefaultTransport();
  }
  ListeningPoint lp=null;
  if (transport.equalsIgnoreCase(ListeningPoint.UDP)) {
    lp=sipStackSharing.getLP(ListeningPoint.UDP);
  }
 else   if (transport.equalsIgnoreCase(ListeningPoint.TCP)) {
    lp=sipStackSharing.getLP(ListeningPoint.TCP);
  }
 else   if (transport.equalsIgnoreCase(ListeningPoint.TLS)) {
    lp=sipStackSharing.getLP(ListeningPoint.TLS);
  }
  if (logger.isTraceEnabled()) {
    logger.trace("Returning LP " + lp + " for transport ["+ transport+ "] and ");
  }
  return lp;
}
