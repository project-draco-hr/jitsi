{
  int status=event.getNewStatus();
  String fromContactName=fileTransferRequest.getSender().getDisplayName();
  if (status == FileTransferStatusChangeEvent.PREPARING) {
    progressBar.setVisible(false);
    titleLabel.setText(resources.getI18NString("service.gui.FILE_TRANSFER_PREPARING",new String[]{fromContactName}));
  }
 else   if (status == FileTransferStatusChangeEvent.FAILED) {
    progressBar.setVisible(false);
    titleLabel.setText(resources.getI18NString("service.gui.FILE_RECEIVE_FAILED",new String[]{fromContactName}));
    setWarningStyle(true);
  }
 else   if (status == FileTransferStatusChangeEvent.IN_PROGRESS) {
    titleLabel.setText(resources.getI18NString("service.gui.FILE_RECEIVING_FROM",new String[]{fromContactName}));
    setWarningStyle(false);
    if (!progressBar.isVisible()) {
      progressBar.setVisible(true);
    }
  }
 else   if (status == FileTransferStatusChangeEvent.COMPLETED) {
    if (downloadFile != null) {
      imageLabel.setFile(downloadFile);
      setFileIcon(downloadFile);
    }
    progressBar.setVisible(false);
    cancelButton.setVisible(false);
    openFileButton.setVisible(true);
    openFolderButton.setVisible(true);
    titleLabel.setText(resources.getI18NString("service.gui.FILE_RECEIVE_COMPLETED",new String[]{fromContactName}));
    imageLabel.setToolTipText(resources.getI18NString("service.gui.OPEN_FILE_FROM_IMAGE"));
    imageLabel.addMouseListener(new MouseAdapter(){
      public void mouseClicked(      MouseEvent e){
        if (e.getClickCount() > 1) {
          openFile(downloadFile);
        }
      }
    }
);
  }
 else   if (status == FileTransferStatusChangeEvent.CANCELED) {
    progressBar.setVisible(false);
    cancelButton.setVisible(false);
    titleLabel.setText(resources.getI18NString("service.gui.FILE_TRANSFER_CANCELED"));
    setWarningStyle(true);
  }
 else   if (status == FileTransferStatusChangeEvent.REFUSED) {
    progressBar.setVisible(false);
    titleLabel.setText(resources.getI18NString("service.gui.FILE_TRANSFER_REFUSED",new String[]{fromContactName}));
    cancelButton.setVisible(false);
    setWarningStyle(true);
  }
}
