{
  JButton sourceButton=(JButton)evt.getSource();
  if (sourceButton.equals(acceptButton)) {
    titleLabel.setText(resources.getI18NString("service.gui.FILE_TRANSFER_PREPARING",new String[]{fileTransferRequest.getSender().getDisplayName()}));
    acceptButton.setVisible(false);
    rejectButton.setVisible(false);
    cancelButton.setVisible(true);
    progressBar.setVisible(true);
    downloadFile=createFile();
    new AcceptFile().start();
  }
 else   if (sourceButton.equals(rejectButton)) {
    fileTransferRequest.rejectFile();
    acceptButton.setVisible(false);
    rejectButton.setVisible(false);
    fileLabel.setText("");
    titleLabel.setText(resources.getI18NString("service.gui.FILE_TRANSFER_CANCELED"));
  }
 else   if (sourceButton.equals(cancelButton)) {
    fileTransfer.cancel();
  }
 else   if (sourceButton.equals(openFileButton)) {
    this.openFile(downloadFile);
  }
 else   if (sourceButton.equals(openFolderButton)) {
    try {
      File downloadDir=GuiActivator.getFileAccessService().getDefaultDownloadDirectory();
      GuiActivator.getDesktopService().open(downloadDir);
    }
 catch (    IllegalArgumentException e) {
      logger.debug("Unable to open folder.",e);
      this.showErrorMessage(resources.getI18NString("service.gui.FOLDER_DOES_NOT_EXIST"));
    }
catch (    NullPointerException e) {
      logger.debug("Unable to open folder.",e);
      this.showErrorMessage(resources.getI18NString("service.gui.FOLDER_DOES_NOT_EXIST"));
    }
catch (    UnsupportedOperationException e) {
      logger.debug("Unable to open folder.",e);
      this.showErrorMessage(resources.getI18NString("service.gui.FILE_OPEN_NOT_SUPPORTED"));
    }
catch (    SecurityException e) {
      logger.debug("Unable to open folder.",e);
      this.showErrorMessage(resources.getI18NString("service.gui.FOLDER_OPEN_NO_PERMISSION"));
    }
catch (    IOException e) {
      logger.debug("Unable to open folder.",e);
      this.showErrorMessage(resources.getI18NString("service.gui.FOLDER_OPEN_NO_APPLICATION"));
    }
catch (    Exception e) {
      logger.debug("Unable to open file.",e);
      this.showErrorMessage(resources.getI18NString("service.gui.FOLDER_OPEN_FAILED"));
    }
  }
}
