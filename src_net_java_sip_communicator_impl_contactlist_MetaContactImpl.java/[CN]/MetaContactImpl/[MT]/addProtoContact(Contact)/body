{
synchronized (getParentGroupModLock()) {
    if (parentGroup != null)     parentGroup.lightRemoveMetaContact(this);
    contactsOnline+=contact.getPresenceStatus().isOnline() ? 1 : 0;
    this.protoContacts.add(contact);
    defaultContact=null;
    defaultContactProtocol=ContactlistActivator.getConfigurationService().getString(PROPERTY_DEFAULT_CONTACT_PROTOCOL,"");
    if (this.protoContacts.size() == 1 && (this.displayName == null || this.displayName.trim().length() == 0)) {
      this.displayName=contact.getDisplayName();
    }
 else     if (defaultContactProtocol.trim().length() != 0) {
      Iterator<Contact> subContacts=this.getContacts();
      while (subContacts.hasNext()) {
        Contact subContact=subContacts.next();
        if (subContact.getProtocolProvider().getProtocolName().equalsIgnoreCase(defaultContactProtocol)) {
          String contactDisplayName=subContact.getDisplayName();
          if (contactDisplayName != null && contactDisplayName.trim().length() != 0) {
            this.displayName=contactDisplayName;
          }
          break;
        }
      }
    }
    if (parentGroup != null)     parentGroup.lightAddMetaContact(this);
    ProtocolProviderService contactProvider=contact.getProtocolProvider();
    OperationSetContactCapabilities capOpSet=contactProvider.getOperationSet(OperationSetContactCapabilities.class);
    if (capOpSet != null) {
      addCapabilities(contact,capOpSet.getSupportedOperationSets(contact));
    }
  }
}
