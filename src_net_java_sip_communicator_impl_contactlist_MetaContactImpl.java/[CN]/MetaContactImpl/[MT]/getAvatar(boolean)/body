{
  byte[] result=null;
  if (!isLazy) {
    Iterator<Contact> protoContacts=getContacts();
    while (protoContacts.hasNext()) {
      Contact contact=protoContacts.next();
      result=queryProtoContactAvatar(contact);
      if (result != null && result.length > 0) {
        cacheAvatar(contact,result);
        return result;
      }
    }
  }
  if (cachedAvatar != null && cachedAvatar.length > 0) {
    return cachedAvatar;
  }
  if (avatarFileCacheAlreadyQueried)   return null;
  avatarFileCacheAlreadyQueried=true;
  Iterator<Contact> iter=this.getContacts();
  while (iter.hasNext()) {
    Contact protoContact=iter.next();
    String accountUID=escapeSpecialCharacters(protoContact.getProtocolProvider().getAccountID().getAccountUniqueID());
    String avatarPath=AVATAR_DIR + File.separator + accountUID+ File.separator+ escapeSpecialCharacters(protoContact.getAddress());
    cachedAvatar=getLocallyStoredAvatar(avatarPath);
    if (cachedAvatar != null)     return cachedAvatar;
  }
  return null;
}
