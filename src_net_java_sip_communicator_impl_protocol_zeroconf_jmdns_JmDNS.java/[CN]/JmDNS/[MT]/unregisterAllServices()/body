{
  if (logger.isDebugEnabled())   logger.debug("unregisterAllServices()");
  if (services.size() == 0) {
    return;
  }
  Collection<ServiceInfo> list;
synchronized (this) {
    list=new LinkedList<ServiceInfo>(services.values());
    services.clear();
  }
  for (Iterator<ServiceInfo> iterator=list.iterator(); iterator.hasNext(); ) {
    iterator.next().cancel();
  }
  Object lock=new Object();
  new Canceler(list,lock).start();
  try {
synchronized (lock) {
      if (!closed) {
        lock.wait();
      }
    }
  }
 catch (  InterruptedException e) {
  }
}
