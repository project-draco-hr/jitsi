{
  registerServiceType(type);
  ServiceInfo info=new ServiceInfo(type,name);
  new ServiceInfoResolver(info).start();
  try {
    long end=System.currentTimeMillis() + timeout;
    long delay;
synchronized (info) {
      while (!info.hasData() && (delay=end - System.currentTimeMillis()) > 0) {
        info.wait(delay);
      }
    }
  }
 catch (  InterruptedException e) {
  }
}
