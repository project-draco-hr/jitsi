{
  String originalQualifiedName=info.getQualifiedName();
  long now=System.currentTimeMillis();
  boolean collision;
  do {
    collision=false;
    for (DNSCache.CacheNode j=cache.find(info.getQualifiedName().toLowerCase()); j != null; j=j.next()) {
      DNSRecord a=(DNSRecord)j.getValue();
      if ((a.type == DNSConstants.TYPE_SRV) && !a.isExpired(now)) {
        DNSRecord.Service s=(DNSRecord.Service)a;
        if (s.port != info.port || !s.server.equals(localHost.getName())) {
          if (logger.isDebugEnabled())           logger.debug("makeServiceNameUnique() " + "JmDNS.makeServiceNameUnique srv collision:" + a + " s.server="+ s.server+ " "+ localHost.getName()+ " equals:"+ (s.server.equals(localHost.getName())));
          info.setName(incrementName(info.getName()));
          collision=true;
          break;
        }
      }
    }
    Object selfService=services.get(info.getQualifiedName().toLowerCase());
    if (selfService != null && selfService != info) {
      info.setName(incrementName(info.getName()));
      collision=true;
    }
  }
 while (collision);
  return !(originalQualifiedName.equals(info.getQualifiedName()));
}
