{
  if (state != DNSState.CANCELED) {
synchronized (this) {
      state=DNSState.CANCELED;
      unregisterAllServices();
      disposeServiceCollectors();
      closeMulticastSocket();
      timer.cancel();
      if (shutdown != null) {
        Runtime.getRuntime().removeShutdownHook(shutdown);
      }
    }
  }
}
