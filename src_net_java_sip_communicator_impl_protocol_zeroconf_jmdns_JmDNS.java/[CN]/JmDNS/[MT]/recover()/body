{
  if (logger.isDebugEnabled())   logger.debug("recover()");
  if (DNSState.CANCELED != state) {
synchronized (this) {
      if (logger.isDebugEnabled())       logger.debug("recover() Cleanning up");
      state=DNSState.CANCELED;
      Collection<ServiceInfo> oldServiceInfos=new ArrayList<ServiceInfo>(services.values());
      unregisterAllServices();
      disposeServiceCollectors();
      closeMulticastSocket();
      cache.clear();
      if (logger.isDebugEnabled())       logger.debug("recover() All is clean");
      try {
        openMulticastSocket(localHost);
        start(oldServiceInfos);
      }
 catch (      Exception exception) {
        logger.warn("recover() Start services exception ",exception);
      }
      logger.warn("recover() We are back!");
    }
  }
}
