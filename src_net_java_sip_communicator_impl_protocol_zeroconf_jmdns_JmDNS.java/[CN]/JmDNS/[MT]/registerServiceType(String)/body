{
  String name=type.toLowerCase();
  if (serviceTypes.get(name) == null) {
    if ((type.indexOf("._mdns._udp.") < 0) && !type.endsWith(".in-addr.arpa.")) {
      Collection<ServiceTypeListener> list;
synchronized (this) {
        serviceTypes.put(name,type);
        list=new LinkedList<ServiceTypeListener>(typeListeners);
      }
      for (      ServiceTypeListener listener : list)       listener.serviceTypeAdded(new ServiceEvent(this,type,null,null));
    }
  }
}
