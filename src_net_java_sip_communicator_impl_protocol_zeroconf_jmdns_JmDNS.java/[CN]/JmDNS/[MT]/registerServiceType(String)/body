{
  String name=type.toLowerCase();
  if (serviceTypes.get(name) == null) {
    if ((type.indexOf("._mdns._udp.") < 0) && !type.endsWith(".in-addr.arpa.")) {
      Collection list;
synchronized (this) {
        serviceTypes.put(name,type);
        list=new LinkedList(typeListeners);
      }
      for (Iterator iterator=list.iterator(); iterator.hasNext(); ) {
        ((ServiceTypeListener)iterator.next()).serviceTypeAdded(new ServiceEvent(this,type,null,null));
      }
    }
  }
}
