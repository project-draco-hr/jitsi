{
  int idx=name.indexOf(".");
  if (idx > 0) {
    name=name.substring(0,idx);
  }
  name+=".local.";
  localHost=new HostInfo(address,name);
  cache=new DNSCache(100);
  listeners=Collections.synchronizedList(new ArrayList<DNSListener>());
  serviceListeners=new HashMap<String,List<ServiceListener>>();
  typeListeners=new ArrayList<ServiceTypeListener>();
  services=new Hashtable<String,ServiceInfo>(20);
  serviceTypes=new Hashtable<String,String>(20);
  timer=new Timer();
  new RecordReaper().start();
  incomingListener=new Thread(new SocketListener(),"JmDNS.SocketListener");
  incomingListener.setDaemon(true);
  openMulticastSocket(localHost);
  start(services.values());
}
