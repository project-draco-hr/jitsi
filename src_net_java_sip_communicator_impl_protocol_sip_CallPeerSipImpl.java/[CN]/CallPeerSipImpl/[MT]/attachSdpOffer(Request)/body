{
  try {
    CallSession callSession=SipActivator.getMediaService().createCallSession(getCall());
    setMediaCallSession(callSession);
    callSession.setSessionCreatorCallback(this);
    InetAddress intendedDestination=getProtocolProvider().getIntendedDestination(getPeerAddress());
    ContentTypeHeader contentTypeHeader=getProtocolProvider().getHeaderFactory().createContentTypeHeader("application","sdp");
    invite.setContent(callSession.createSdpOffer(intendedDestination),contentTypeHeader);
  }
 catch (  IllegalArgumentException ex) {
    ProtocolProviderServiceSipImpl.throwOperationFailedException("Failed to obtain an InetAddress for " + ex.getMessage(),OperationFailedException.NETWORK_FAILURE,ex,logger);
  }
catch (  ParseException ex) {
    ProtocolProviderServiceSipImpl.throwOperationFailedException("Failed to parse sdp data while creating invite request!",OperationFailedException.INTERNAL_ERROR,ex,logger);
  }
catch (  MediaException ex) {
    ProtocolProviderServiceSipImpl.throwOperationFailedException("Could not access media devices!",OperationFailedException.INTERNAL_ERROR,ex,logger);
  }
}
