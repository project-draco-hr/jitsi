{
  this.mainFrame=mainFrame;
  this.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);
  this.setSize(550,450);
  this.setIconImage(ImageLoader.getImage(ImageLoader.SIP_COMMUNICATOR_LOGO));
  menusPanel=new MenusPanel(this);
  this.setSizeAndLocation();
  this.init();
  ActionMap amap=this.getRootPane().getActionMap();
  amap.put("close",new CloseAction());
  amap.put("changeTabForword",new ForwordTabAction());
  amap.put("changeTabBackword",new BackwordTabAction());
  amap.put("sendMessage",new SendMessageAction());
  amap.put("openSmilies",new OpenSmileyAction());
  amap.put("changeProtocol",new ChangeProtocolAction());
  amap.put("copy",new CopyAction());
  amap.put("paste",new PasteAction());
  amap.put("openHistory",new OpenHistoryAction());
  InputMap imap=this.getRootPane().getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);
  imap.put(KeyStroke.getKeyStroke(KeyEvent.VK_ESCAPE,0),"close");
  imap.put(KeyStroke.getKeyStroke(KeyEvent.VK_RIGHT,KeyEvent.ALT_DOWN_MASK),"changeTabForword");
  imap.put(KeyStroke.getKeyStroke(KeyEvent.VK_LEFT,KeyEvent.ALT_DOWN_MASK),"changeTabBackword");
  imap.put(KeyStroke.getKeyStroke(KeyEvent.VK_INSERT,KeyEvent.CTRL_DOWN_MASK),"copy");
  imap.put(KeyStroke.getKeyStroke(KeyEvent.VK_INSERT,KeyEvent.SHIFT_DOWN_MASK),"paste");
  imap.put(KeyStroke.getKeyStroke(KeyEvent.VK_C,KeyEvent.META_MASK),"copy");
  imap.put(KeyStroke.getKeyStroke(KeyEvent.VK_V,KeyEvent.META_MASK),"paste");
  imap.put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER,KeyEvent.CTRL_DOWN_MASK),"sendMessage");
  imap.put(KeyStroke.getKeyStroke(KeyEvent.VK_M,KeyEvent.CTRL_DOWN_MASK),"openSmilies");
  imap.put(KeyStroke.getKeyStroke(KeyEvent.VK_P,KeyEvent.CTRL_DOWN_MASK),"changeProtocol");
  imap.put(KeyStroke.getKeyStroke(KeyEvent.VK_H,KeyEvent.CTRL_DOWN_MASK),"openHistory");
  this.addWindowListener(new ChatWindowAdapter());
}
