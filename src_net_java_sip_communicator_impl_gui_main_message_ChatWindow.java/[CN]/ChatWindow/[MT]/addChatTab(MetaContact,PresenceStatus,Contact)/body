{
  ChatPanel chatPanel=null;
  if (chatTabbedPane == null) {
    chatPanel=new ChatPanel(this,protocolContact);
    chatPanel.addContactToChat(contact,status);
    chatTabbedPane=new SIPCommTabbedPane(true);
    chatTabbedPane.addCloseListener(new CloseListener(){
      public void closeOperation(      MouseEvent e){
        int tabIndex=chatTabbedPane.getOverTabIndex();
        removeContactTab(tabIndex);
      }
    }
);
    this.getContentPane().add(chatPanel,BorderLayout.CENTER);
    this.contactTabsTable.put(contact.getMetaUID(),chatPanel);
    this.setTitle(contact.getDisplayName());
  }
 else {
    PresenceStatus defaultStatus=contact.getDefaultContact().getPresenceStatus();
    if (chatTabbedPane.getTabCount() > 0) {
      chatPanel=new ChatPanel(this,protocolContact);
      chatPanel.addContactToChat(contact,status);
      chatTabbedPane.addTab(contact.getDisplayName(),new ImageIcon(Constants.getStatusIcon(defaultStatus)),chatPanel);
      chatTabbedPane.getParent().validate();
      this.contactTabsTable.put(contact.getMetaUID(),chatPanel);
    }
 else {
      ChatPanel firstChatPanel=(ChatPanel)contactTabsTable.elements().nextElement();
      PresenceStatus currentContactStatus=firstChatPanel.getDefaultContact().getDefaultContact().getPresenceStatus();
      chatTabbedPane.addTab(firstChatPanel.getDefaultContact().getDisplayName(),new ImageIcon(Constants.getStatusIcon(currentContactStatus)),firstChatPanel);
      chatPanel=new ChatPanel(this,protocolContact);
      chatPanel.addContactToChat(contact,status);
      chatTabbedPane.addTab(contact.getDisplayName(),new ImageIcon(Constants.getStatusIcon(defaultStatus)),chatPanel);
      this.contactTabsTable.put(contact.getMetaUID(),chatPanel);
    }
    this.getContentPane().add(chatTabbedPane,BorderLayout.CENTER);
    this.getContentPane().validate();
  }
  return chatPanel;
}
