{
  AbstractAction close=new AbstractAction(){
    public void actionPerformed(    ActionEvent e){
      if (!getCurrentChatWritePanel().isEmpty()) {
        int answer=JOptionPane.showConfirmDialog(ChatWindow.this,Messages.getString("nonEmptyChatWindowClose"),Messages.getString("warning"),JOptionPane.OK_CANCEL_OPTION,JOptionPane.WARNING_MESSAGE);
        if (answer == JOptionPane.YES_OPTION) {
          closeChat();
        }
      }
 else       if (System.currentTimeMillis() - getCurrentConversationPanel().getLastIncomingMsgTimestamp().getTime() < 3 * 1000) {
        int answer=JOptionPane.showConfirmDialog(ChatWindow.this,Messages.getString("closeChatAfterNewMsg"),Messages.getString("warning"),JOptionPane.OK_CANCEL_OPTION,JOptionPane.WARNING_MESSAGE);
        if (answer == JOptionPane.YES_OPTION) {
          closeChat();
        }
      }
 else {
        closeChat();
      }
    }
  }
;
  AbstractAction changeTabForword=new AbstractAction(){
    public void actionPerformed(    ActionEvent e){
      if (chatTabbedPane != null) {
        int selectedIndex=chatTabbedPane.getSelectedIndex();
        if (selectedIndex < chatTabbedPane.getTabCount() - 1) {
          setSelectedContactTab(selectedIndex + 1);
        }
 else {
          setSelectedContactTab(0);
        }
      }
    }
  }
;
  AbstractAction changeTabBackword=new AbstractAction(){
    public void actionPerformed(    ActionEvent e){
      if (chatTabbedPane != null) {
        int selectedIndex=chatTabbedPane.getSelectedIndex();
        if (selectedIndex != 0) {
          setSelectedContactTab(selectedIndex - 1);
        }
 else {
          setSelectedContactTab(chatTabbedPane.getTabCount() - 1);
        }
      }
    }
  }
;
  getRootPane().getActionMap().put("close",close);
  getRootPane().getActionMap().put("changeTabForword",changeTabForword);
  getRootPane().getActionMap().put("changeTabBackword",changeTabBackword);
  InputMap imap=this.getRootPane().getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);
  imap.put(KeyStroke.getKeyStroke(KeyEvent.VK_ESCAPE,0),"close");
  imap.put(KeyStroke.getKeyStroke(KeyEvent.VK_RIGHT,KeyEvent.ALT_DOWN_MASK),"changeTabForword");
  imap.put(KeyStroke.getKeyStroke(KeyEvent.VK_LEFT,KeyEvent.ALT_DOWN_MASK),"changeTabBackword");
}
