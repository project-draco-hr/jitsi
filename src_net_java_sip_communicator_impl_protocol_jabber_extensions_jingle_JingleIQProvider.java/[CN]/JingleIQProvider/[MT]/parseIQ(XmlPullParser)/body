{
  JingleIQ jingleIQ=new JingleIQ();
  JingleAction action=JingleAction.parseString(parser.getAttributeValue("",JingleIQ.ACTION_ATTR_NAME));
  String initiator=parser.getAttributeValue("",JingleIQ.INITIATOR_ATTR_NAME);
  String responder=parser.getAttributeValue("",JingleIQ.RESPONDER_ATTR_NAME);
  String sid=parser.getAttributeValue("",JingleIQ.SID_ATTR_NAME);
  jingleIQ.setAction(action);
  jingleIQ.setInitiator(initiator);
  jingleIQ.setResponder(responder);
  jingleIQ.setSid(sid);
  boolean done=false;
  DefaultPacketExtensionProvider<ContentPacketExtension> contentProvider=new DefaultPacketExtensionProvider<ContentPacketExtension>(ContentPacketExtension.class);
  ReasonProvider reasonProvider=new ReasonProvider();
  int eventType;
  String elementName;
  while (!done) {
    eventType=parser.next();
    elementName=parser.getName();
    if (eventType == XmlPullParser.START_TAG) {
      if (elementName.equals(ContentPacketExtension.ELEMENT_NAME)) {
        ContentPacketExtension content=contentProvider.parseExtension(parser);
        jingleIQ.addContent(content);
      }
      if (elementName.equals(ReasonPacketExtension.ELEMENT_NAME)) {
        ReasonPacketExtension reason=reasonProvider.parseExtension(parser);
        jingleIQ.setReason(reason);
      }
    }
 else     if (eventType == XmlPullParser.END_TAG) {
      if (parser.getName().equals(JingleIQ.ELEMENT_NAME)) {
        done=true;
      }
    }
  }
  return jingleIQ;
}
