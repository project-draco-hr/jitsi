{
  if (!SwingUtilities.isEventDispatchThread()) {
    SwingUtilities.invokeLater(new Runnable(){
      public void run(){
        showPreview(previewContainer,preview,player);
      }
    }
);
    return;
  }
  previewContainer.removeAll();
  if (preview != null) {
    HierarchyListener hierarchyListener=new HierarchyListener(){
      private Window window;
      private WindowListener windowListener;
      public void dispose(){
        if (windowListener != null) {
          if (window != null) {
            window.removeWindowListener(windowListener);
            window=null;
          }
          windowListener=null;
        }
        preview.removeHierarchyListener(this);
        disposePlayer(player);
        videoDeviceInPreview=null;
        previewContainer.remove(preview);
      }
      public void hierarchyChanged(      HierarchyEvent event){
        if ((event.getChangeFlags() & HierarchyEvent.DISPLAYABILITY_CHANGED) != 0) {
          if (preview.isDisplayable()) {
            if (windowListener == null) {
              window=SwingUtilities.windowForComponent(preview);
              if (window != null) {
                windowListener=new WindowAdapter(){
                  public void windowClosing(                  WindowEvent event){
                    dispose();
                  }
                }
;
                window.addWindowListener(windowListener);
              }
            }
          }
 else {
            dispose();
          }
        }
      }
    }
;
    preview.addHierarchyListener(hierarchyListener);
    previewContainer.add(preview);
  }
 else   disposePlayer(player);
}
