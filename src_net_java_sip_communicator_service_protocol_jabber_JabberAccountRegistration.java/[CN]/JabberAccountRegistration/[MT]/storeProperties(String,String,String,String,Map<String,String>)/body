{
  if (rememberPassword)   setPassword(passwd);
 else   setPassword(null);
  String serverName=null;
  if (getServerAddress() != null && getServerAddress().length() > 0) {
    serverName=getServerAddress();
  }
 else {
    serverName=getServerFromUserName(userName);
  }
  if (serverName == null || serverName.length() <= 0)   throw new OperationFailedException("Should specify a server for user name " + userName + ".",OperationFailedException.SERVER_NOT_SPECIFIED);
  if (userName.indexOf('@') < 0 && getDefaultUserSufix() != null)   userName=userName + '@' + getDefaultUserSufix();
  List<StunServerDescriptor> stunServers=getAdditionalStunServers();
  int serverIndex=-1;
  for (  StunServerDescriptor stunServer : stunServers) {
    serverIndex++;
    stunServer.storeDescriptor(accountProperties,ProtocolProviderFactory.STUN_PREFIX + serverIndex);
  }
  List<JingleNodeDescriptor> jnRelays=getAdditionalJingleNodes();
  serverIndex=-1;
  for (  JingleNodeDescriptor jnRelay : jnRelays) {
    serverIndex++;
    jnRelay.storeDescriptor(accountProperties,JingleNodeDescriptor.JN_PREFIX + serverIndex);
  }
  securityRegistration.storeProperties(accountProperties);
  encodingsRegistration.storeProperties(accountProperties);
  super.storeProperties(accountIconPath,protocolIconPath,accountProperties);
}
