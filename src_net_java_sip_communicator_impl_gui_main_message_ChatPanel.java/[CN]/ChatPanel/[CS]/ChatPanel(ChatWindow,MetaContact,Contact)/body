{
  super(new BorderLayout());
  this.chatWindow=chatWindow;
  this.metaContact=metaContact;
  this.imOperationSet=this.chatWindow.getMainFrame().getProtocolIM(protocolContact.getProtocolProvider());
  this.tnOperationSet=this.chatWindow.getMainFrame().getTypingNotifications(protocolContact.getProtocolProvider());
  this.conversationPanel=new ChatConversationPanel(this);
  this.chatConferencePanel=new ChatConferencePanel(this,metaContact,protocolContact);
  this.sendPanel=new ChatSendPanel(this,metaContact,protocolContact);
  this.writeMessagePanel=new ChatWritePanel(this);
  this.topSplitPane.setResizeWeight(1.0D);
  this.messagePane.setResizeWeight(1.0D);
  this.chatConferencePanel.setPreferredSize(new Dimension(120,100));
  this.chatConferencePanel.setMinimumSize(new Dimension(120,100));
  this.writeMessagePanel.setPreferredSize(new Dimension(500,100));
  this.writeMessagePanel.setMinimumSize(new Dimension(500,100));
  this.conversationPanel.setPreferredSize(new Dimension(400,200));
  this.init();
  addComponentListener(new TabSelectionComponentListener());
  new Thread(){
    public void run(){
      loadHistoryPeriod();
    }
  }
.start();
}
