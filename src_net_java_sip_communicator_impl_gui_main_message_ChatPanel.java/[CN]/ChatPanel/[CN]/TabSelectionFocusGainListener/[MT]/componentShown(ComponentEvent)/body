{
  Component component=e.getComponent();
  Container parent=component.getParent();
  if (parent instanceof JTabbedPane) {
    JTabbedPane tabbedPane=(JTabbedPane)parent;
    if (tabbedPane.getSelectedComponent() == component) {
      SwingUtilities.invokeLater(new Runnable(){
        public void run(){
          chatWindow.setCurrentChatPanel(ChatPanel.this);
          writeMessagePanel.getEditorPane().requestFocus();
        }
      }
);
    }
  }
}
