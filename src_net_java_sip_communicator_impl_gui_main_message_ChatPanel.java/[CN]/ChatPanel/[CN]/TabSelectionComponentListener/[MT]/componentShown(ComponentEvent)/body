{
  Component component=e.getComponent();
  Container parent=component.getParent();
  if (parent instanceof JTabbedPane) {
    JTabbedPane tabbedPane=(JTabbedPane)parent;
    if (tabbedPane.getSelectedComponent() == component) {
      SwingUtilities.invokeLater(new Runnable(){
        public void run(){
          String metaContactName=getMetaContact().getDisplayName();
          if (!chatWindow.getTitle().equals(metaContactName)) {
            chatWindow.setTitle(metaContactName);
            chatWindow.getMainToolBar().changeHistoryButtonsState(ChatPanel.this);
            ChatPanel.this.requestFocusInWriteArea();
          }
        }
      }
);
    }
  }
}
