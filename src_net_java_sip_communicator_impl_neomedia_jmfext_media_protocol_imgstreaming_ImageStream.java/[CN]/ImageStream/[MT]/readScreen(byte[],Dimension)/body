{
  VideoFormat format=(VideoFormat)getFormat();
  Dimension formatSize=format.getSize();
  int width=(int)formatSize.getWidth();
  int height=(int)formatSize.getHeight();
  BufferedImage scaledScreen=null;
  BufferedImage screen=null;
  byte data[]=null;
  int size=width * height * 4;
  if (output.length < size) {
    output=null;
    output=new byte[size];
  }
  if (desktopInteract.captureScreen(displayIndex,x,y,dim.width,dim.height,output)) {
    return output;
  }
  System.out.println("failed to grab with native! " + output.length);
  screen=desktopInteract.captureScreen();
  if (screen != null) {
    scaledScreen=ImageStreamingUtils.getScaledImage(screen,width,height,BufferedImage.TYPE_INT_ARGB);
    data=ImageStreamingUtils.getImageBytes(scaledScreen,output);
  }
  screen=null;
  scaledScreen=null;
  return data;
}
