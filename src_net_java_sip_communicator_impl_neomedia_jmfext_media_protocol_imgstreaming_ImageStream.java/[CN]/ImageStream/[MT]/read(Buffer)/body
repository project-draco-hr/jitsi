{
  byte data[]=(byte[])buffer.getData();
  int dataLength=(data != null) ? data.length : 0;
  long begin=System.currentTimeMillis();
  long maxTime=1000 / 10;
  int wait=0;
  if ((data != null) || (dataLength != 0)) {
    byte buf[]=readScreen(data);
    if (buf != data) {
      buffer.setData(buf);
    }
    buffer.setOffset(0);
    buffer.setLength(buf.length);
    buffer.setFormat(getFormat());
    buffer.setHeader(null);
    buffer.setTimeStamp(System.nanoTime());
    buffer.setSequenceNumber(seqNo);
    buffer.setFlags(Buffer.FLAG_SYSTEM_TIME | Buffer.FLAG_LIVE_DATA);
    seqNo++;
  }
  wait=(int)(maxTime - (System.currentTimeMillis() - begin));
  try {
    if (wait > 0) {
      Thread.sleep(wait);
    }
 else {
      Thread.yield();
    }
  }
 catch (  Exception e) {
  }
}
