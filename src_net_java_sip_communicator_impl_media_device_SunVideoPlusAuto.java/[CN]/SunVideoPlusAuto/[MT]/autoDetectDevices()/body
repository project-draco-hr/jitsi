{
  Vector<CaptureDeviceInfo> devices=(Vector)CaptureDeviceManager.getDeviceList(null).clone();
  Enumeration<CaptureDeviceInfo> enumeration=devices.elements();
  while (enumeration.hasMoreElements()) {
    CaptureDeviceInfo cdi=enumeration.nextElement();
    String devName=cdi.getLocator().getProtocol();
    if (devName.equals(PROTOCOL))     CaptureDeviceManager.removeDevice(cdi);
  }
  int nDevices=0;
  for (int i=0; i < 10; i++) {
    File fl=new File(DEVICE_PREFIX + i);
    if (fl.exists()) {
      if (DO_PAL) {
        generalDevice(i,"PAL");
        System.gc();
        generalDevice(i,"NTSC");
      }
 else {
        generalDevice(i,null);
      }
      nDevices++;
    }
  }
  try {
    CaptureDeviceManager.commit();
  }
 catch (  java.io.IOException ioe) {
    logger.error("SunVideoPlusAuto: error committing cdm",ioe);
    return 0;
  }
  return nDevices;
}
