{
  for (  MediaFormat format : getSupportedMediaFormats(encoding,clockRate))   if ((CHANNELS_NOT_SPECIFIED != channels) && (format instanceof AudioMediaFormat)) {
    AudioMediaFormat audioFormat=(AudioMediaFormat)format;
    int audioFormatChannels=audioFormat.getChannels();
    if ((CHANNELS_NOT_SPECIFIED == audioFormatChannels) || (audioFormatChannels == channels))     return audioFormat;
  }
 else   return format;
  return null;
}
