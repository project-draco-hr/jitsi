{
  ResourceManagementService resources=NeomediaActivator.getResources();
  final TransparentPanel advancedPanel=new TransparentPanel(new BorderLayout());
  advancedPanel.setMaximumSize(new Dimension(WIDTH,150));
  final JLabel advButton=new JLabel(NeomediaActivator.getResources().getI18NString("impl.media.configform.VIDEO_MORE_SETTINGS"));
  advButton.setIcon(NeomediaActivator.getResources().getImage("service.gui.icons.RIGHT_ARROW_ICON"));
  TransparentPanel buttonPanel=new TransparentPanel(new BorderLayout());
  buttonPanel.add(advButton,BorderLayout.WEST);
  advancedPanel.add(buttonPanel,BorderLayout.NORTH);
  final DeviceConfiguration deviceConfig=mediaService.getDeviceConfiguration();
  final TransparentPanel centerPanel=new TransparentPanel(new GridBagLayout());
  centerPanel.setMaximumSize(new Dimension(WIDTH,150));
  centerPanel.setVisible(false);
  advancedPanel.add(centerPanel,BorderLayout.CENTER);
  advButton.addMouseListener(new MouseAdapter(){
    @Override public void mouseClicked(    MouseEvent e){
      advButton.setIcon(NeomediaActivator.getResources().getImage(centerPanel.isVisible() ? "service.gui.icons.RIGHT_ARROW_ICON" : "service.gui.icons.DOWN_ARROW_ICON"));
      centerPanel.setVisible(!centerPanel.isVisible());
      advancedPanel.revalidate();
      NeomediaActivator.getUIService().getConfigurationContainer().validateCurrentForm();
    }
  }
);
  GridBagConstraints constraints=new GridBagConstraints();
  constraints.fill=GridBagConstraints.HORIZONTAL;
  constraints.anchor=GridBagConstraints.NORTHWEST;
  constraints.gridx=0;
  constraints.weightx=0;
  constraints.weighty=0;
  constraints.gridy=0;
  centerPanel.add(new JLabel(resources.getI18NString("impl.media.configform.VIDEO_RESOLUTION")),constraints);
  constraints.gridy=1;
  centerPanel.add(new JLabel(resources.getI18NString("impl.media.configform.VIDEO_FRAME_RATE")),constraints);
  constraints.gridy=2;
  centerPanel.add(new JLabel(resources.getI18NString("impl.media.configform.VIDEO_PACKETS_POLICY")),constraints);
  constraints.weightx=1;
  constraints.gridx=1;
  constraints.gridy=0;
  Object[] resolutionValues=new Object[DeviceConfiguration.SUPPORTED_RESOLUTIONS.length + 1];
  System.arraycopy(DeviceConfiguration.SUPPORTED_RESOLUTIONS,0,resolutionValues,1,DeviceConfiguration.SUPPORTED_RESOLUTIONS.length);
  final JComboBox sizeCombo=new JComboBox(resolutionValues);
  sizeCombo.setRenderer(new ResolutionCellRenderer());
  sizeCombo.setEditable(false);
  centerPanel.add(sizeCombo,constraints);
  final JSpinner frameRate=new JSpinner(new SpinnerNumberModel(DeviceConfiguration.DEFAULT_FRAME_RATE,5,25,1));
  frameRate.addChangeListener(new ChangeListener(){
    public void stateChanged(    ChangeEvent e){
      deviceConfig.setFrameRate(((SpinnerNumberModel)frameRate.getModel()).getNumber().intValue());
    }
  }
);
  constraints.gridy=1;
  centerPanel.add(frameRate,constraints);
  final JSpinner videoMaxBandwidth=new JSpinner(new SpinnerNumberModel(deviceConfig.getVideoMaxBandwidth(),1,DeviceConfiguration.DEFAULT_VIDEO_MAX_BANDWIDTH,1));
  videoMaxBandwidth.addChangeListener(new ChangeListener(){
    public void stateChanged(    ChangeEvent e){
      deviceConfig.setVideoMaxBandwidth(((SpinnerNumberModel)videoMaxBandwidth.getModel()).getNumber().intValue());
    }
  }
);
  constraints.gridx=1;
  constraints.gridy=2;
  centerPanel.add(videoMaxBandwidth,constraints);
  Dimension videoSize=deviceConfig.getVideoSize();
  if ((videoSize.getHeight() != DeviceConfiguration.DEFAULT_VIDEO_HEIGHT) && (videoSize.getWidth() != DeviceConfiguration.DEFAULT_VIDEO_WIDTH))   sizeCombo.setSelectedItem(deviceConfig.getVideoSize());
 else   sizeCombo.setSelectedIndex(0);
  sizeCombo.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      Dimension selectedVideoSize=(Dimension)sizeCombo.getSelectedItem();
      if (selectedVideoSize == null) {
        selectedVideoSize=new Dimension(DeviceConfiguration.DEFAULT_VIDEO_WIDTH,DeviceConfiguration.DEFAULT_VIDEO_HEIGHT);
      }
      deviceConfig.setVideoSize(selectedVideoSize);
      videoDeviceInPreview=null;
      videoDeviceChangeListener.actionPerformed(null);
    }
  }
);
  frameRate.setValue(deviceConfig.getFrameRate());
  return advancedPanel;
}
