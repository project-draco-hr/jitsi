{
  JComponent preview=null;
  if (type == DeviceConfigurationComboBoxModel.AUDIO) {
    Object selectedItem=comboBox.getSelectedItem();
    if (selectedItem instanceof AudioSystem) {
      AudioSystem audioSystem=(AudioSystem)selectedItem;
      if (!NoneAudioSystem.LOCATOR_PROTOCOL.equalsIgnoreCase(audioSystem.getLocatorProtocol())) {
        preview=new TransparentPanel(new GridBagLayout());
        createAudioSystemControls(audioSystem,preview);
      }
    }
  }
 else   if (type == DeviceConfigurationComboBoxModel.VIDEO) {
    JLabel noPreview=new JLabel(NeomediaActivator.getResources().getI18NString("impl.media.configform.NO_PREVIEW"));
    noPreview.setHorizontalAlignment(SwingConstants.CENTER);
    noPreview.setVerticalAlignment(SwingConstants.CENTER);
    preview=createVideoContainer(noPreview);
    Object selectedItem=comboBox.getSelectedItem();
    CaptureDeviceInfo device=null;
    if (selectedItem instanceof DeviceConfigurationComboBoxModel.CaptureDevice)     device=((DeviceConfigurationComboBoxModel.CaptureDevice)selectedItem).info;
    Exception exception;
    try {
      createVideoPreview(device,preview);
      exception=null;
    }
 catch (    IOException ex) {
      exception=ex;
    }
catch (    MediaException ex) {
      exception=ex;
    }
    if (exception != null) {
      logger.error("Failed to create preview for device " + device,exception);
      device=null;
    }
  }
  return preview;
}
