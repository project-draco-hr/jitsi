{
  boolean showSystem;
synchronized (showSystemBundlesSync) {
    showSystem=showSystemBundles;
  }
  for (int i=0; i < bundles.length; i++) {
    Bundle b=bundles[i];
    if (b.equals(bundle)) {
      if (showSystem)       return true;
 else {
        Object sysBundleProp=bundle.getHeaders().get("System-Bundle");
        if (sysBundleProp == null || !sysBundleProp.equals("yes"))         return true;
 else         return false;
      }
    }
  }
  return false;
}
