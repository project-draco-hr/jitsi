{
  MediaDirection direction=dev.getDirection().and(getDirectionUserPreference(dev.getMediaType()));
  if (isLocallyOnHold())   direction=direction.and(MediaDirection.SENDONLY);
  QualityPreset sendQualityPreset=null;
  QualityPreset receiveQualityPreset=null;
  if (qualityControls != null) {
    sendQualityPreset=qualityControls.getRemoteReceivePreset();
    receiveQualityPreset=qualityControls.getRemoteSendMaxPreset();
  }
  if (direction != MediaDirection.INACTIVE) {
    ContentPacketExtension content=createContentForOffer(dev.getSupportedFormats(sendQualityPreset,receiveQualityPreset),direction,dev.getSupportedExtensions());
    RtpDescriptionPacketExtension description=JingleUtils.getRtpDescription(content);
    setSDesEncryptionToDescription(dev.getMediaType(),description,null);
    setZrtpEncryptionToDescription(dev.getMediaType(),description,null);
    return content;
  }
  return null;
}
