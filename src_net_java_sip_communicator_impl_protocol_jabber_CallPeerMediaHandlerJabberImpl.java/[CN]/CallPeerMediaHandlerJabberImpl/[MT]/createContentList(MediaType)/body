{
  MediaDevice dev=getDefaultDevice(mediaType);
  List<ContentPacketExtension> mediaDescs=new ArrayList<ContentPacketExtension>();
  if (isDeviceActive(dev)) {
    ContentPacketExtension content=createContent(dev);
    if (content != null)     mediaDescs.add(content);
  }
  if (mediaDescs.isEmpty()) {
    ProtocolProviderServiceJabberImpl.throwOperationFailedException("We couldn't find any active Audio/Video devices and " + "couldn't create a call",OperationFailedException.GENERAL_ERROR,null,logger);
  }
  TransportInfoSender transportInfoSender=getTransportManager().getXmlNamespace().equals(ProtocolProviderServiceJabberImpl.URN_GOOGLE_TRANSPORT_P2P) ? new TransportInfoSender(){
    public void sendTransportInfo(    Iterable<ContentPacketExtension> contents){
      getPeer().sendTransportInfo(contents);
    }
  }
 : null;
  return harvestCandidates(null,mediaDescs,transportInfoSender);
}
