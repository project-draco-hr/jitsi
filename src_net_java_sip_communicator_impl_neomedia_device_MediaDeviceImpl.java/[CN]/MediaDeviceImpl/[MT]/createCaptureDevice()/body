{
  CaptureDevice captureDevice=null;
  if (getDirection().allowsSending()) {
    Throwable exception=null;
    try {
      captureDevice=(CaptureDevice)Manager.createDataSource(captureDeviceInfo.getLocator());
    }
 catch (    IOException ioe) {
      exception=ioe;
    }
catch (    NoDataSourceException ndse) {
      exception=ndse;
    }
    if (exception != null)     logger.error("Failed to create CaptureDevice" + " from CaptureDeviceInfo " + captureDeviceInfo,exception);
 else {
      if (captureDevice instanceof AbstractPullBufferCaptureDevice) {
        ((AbstractPullBufferCaptureDevice)captureDevice).setCaptureDeviceInfo(captureDeviceInfo);
      }
      if (logger.isTraceEnabled())       captureDevice=createTracingCaptureDevice(captureDevice,logger);
    }
  }
  return captureDevice;
}
