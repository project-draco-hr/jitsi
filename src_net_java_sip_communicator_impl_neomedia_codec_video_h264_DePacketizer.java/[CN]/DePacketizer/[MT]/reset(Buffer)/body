{
  if (OUTPUT_INCOMPLETE_NAL_UNITS && fuaStartedAndNotEnded && (outBuffer.getLength() >= (NAL_PREFIX.length + 1 + 1))) {
    Object outData=outBuffer.getData();
    if (outData instanceof byte[]) {
      byte[] out=(byte[])outData;
      int octetIndex=outBuffer.getOffset() + NAL_PREFIX.length;
      out[octetIndex]|=0x80;
      fuaStartedAndNotEnded=false;
      return (BUFFER_PROCESSED_OK | INPUT_BUFFER_NOT_CONSUMED);
    }
  }
  fuaStartedAndNotEnded=false;
  outBuffer.setLength(0);
  return OUTPUT_BUFFER_NOT_FILLED;
}
