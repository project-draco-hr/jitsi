{
  int outOffset=outBuffer.getOffset();
  int newOutLength=NAL_PREFIX.length + inLength;
  byte[] out=validateByteArraySize(outBuffer,outOffset + newOutLength + outputPaddingSize);
  System.arraycopy(NAL_PREFIX,0,out,outOffset,NAL_PREFIX.length);
  outOffset+=NAL_PREFIX.length;
  System.arraycopy(in,inOffset,out,outOffset,inLength);
  outOffset+=inLength;
  padOutput(out,outOffset);
  outBuffer.setLength(newOutLength);
  if (nal_unit_type == 5) {
    lostFrame=false;
    lastReceivedKeyframeTime=System.currentTimeMillis();
  }
  return BUFFER_PROCESSED_OK;
}
