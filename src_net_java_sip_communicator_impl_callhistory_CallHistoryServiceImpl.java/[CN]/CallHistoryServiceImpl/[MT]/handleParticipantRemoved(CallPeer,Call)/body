{
  CallRecord callRecord=findCallRecord(srcCall);
  String pAddress=callParticipant.getAddress();
  CallParticipantRecordImpl cpRecord=(CallParticipantRecordImpl)callRecord.findParticipantRecord(pAddress);
  if (cpRecord == null)   return;
  if (!callParticipant.getState().equals(CallPeerState.DISCONNECTED))   cpRecord.setState(callParticipant.getState());
  CallPeerState cpRecordState=cpRecord.getState();
  if (cpRecordState.equals(CallPeerState.CONNECTED) || CallPeerState.isOnHold(cpRecordState)) {
    cpRecord.setEndTime(new Date());
  }
}
