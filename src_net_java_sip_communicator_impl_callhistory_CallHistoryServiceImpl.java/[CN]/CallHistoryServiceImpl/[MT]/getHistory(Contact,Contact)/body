{
  History retVal=null;
  String localId=localContact == null ? "default" : localContact.getAddress();
  String remoteId=remoteContact == null ? "default" : remoteContact.getAddress();
  HistoryID historyId=HistoryID.createFromRawID(new String[]{"callhistory",localId,remoteId});
  if (this.historyService.isHistoryExisting(historyId)) {
    retVal=this.historyService.getHistory(historyId);
    retVal.setHistoryRecordsStructure(recordStructure);
  }
 else {
    retVal=this.historyService.createHistory(historyId,recordStructure);
  }
  return retVal;
}
