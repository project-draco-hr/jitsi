{
  for (  ProtocolProviderFactory providerFactory : CallHistoryActivator.getProtocolProviderFactories().values()) {
    ServiceReference serRef;
    for (    AccountID accountID : providerFactory.getRegisteredAccounts()) {
      if (accountID.getAccountUniqueID().equals(accountUID)) {
        serRef=providerFactory.getProviderForAccount(accountID);
        return (ProtocolProviderService)CallHistoryActivator.bundleContext.getService(serRef);
      }
    }
  }
  return null;
}
