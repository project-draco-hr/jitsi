{
  lastFormat=inFormat;
  AudioFormat oFormat=(AudioFormat)outputFormat;
  outFormat=new AudioFormat(oFormat.getEncoding(),oFormat.getSampleRate(),oFormat.getSampleSizeInBits(),oFormat.getChannels(),oFormat.getEndian(),oFormat.getSigned(),oFormat.getFrameSizeInBits(),oFormat.getFrameRate(),oFormat.getDataType()){
    /** 
 * The length in nanoseconds.
 */
    public long computeDuration(    long l){
      return 20 * 1000000;
    }
  }
;
  encoder=new SpeexEncoder();
  int sampleRate=(int)inFormat.getSampleRate();
  int band=NARROW_BAND;
  if (sampleRate == 16000) {
    band=WIDE_BAND;
  }
 else   if (sampleRate == 32000) {
    band=ULTRA_WIDE_BAND;
  }
  encoder.init(band,4,sampleRate,1);
  FRAME_SIZE=2 * encoder.getFrameSize();
}
