{
  lastFormat=inFormat;
  encoder=new SpeexEncoder();
  int sampleRate=(int)inFormat.getSampleRate();
  int band=NARROW_BAND;
  FRAME_SIZE=320;
  if (sampleRate == 16000) {
    band=WIDE_BAND;
    FRAME_SIZE=640;
  }
 else   if (sampleRate == 32000) {
    band=ULTRA_WIDE_BAND;
    FRAME_SIZE=1280;
  }
  encoder.init(band,4,sampleRate,1);
}
