{
  if (evt.getNewState() == RegistrationState.REGISTERED) {
    if (presenceStatus != RssStatusEnum.ONLINE) {
      presenceStatus=RssStatusEnum.ONLINE;
      changePresenceStatusForAllContacts(contactListRoot,presenceStatus);
    }
  }
 else   if (evt.getNewState() == RegistrationState.UNREGISTERED || evt.getNewState() == RegistrationState.AUTHENTICATION_FAILED || evt.getNewState() == RegistrationState.CONNECTION_FAILED) {
    if (presenceStatus != RssStatusEnum.OFFLINE) {
      presenceStatus=RssStatusEnum.OFFLINE;
      changePresenceStatusForAllContacts(contactListRoot,presenceStatus);
    }
  }
}
