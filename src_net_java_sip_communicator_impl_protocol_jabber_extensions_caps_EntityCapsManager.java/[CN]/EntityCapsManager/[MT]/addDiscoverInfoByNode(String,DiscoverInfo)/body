{
  cleanupDicsoverInfo(info);
  info.setNode(node);
synchronized (caps) {
    DiscoverInfo oldInfo=caps.put(node,info);
    if ((oldInfo == null) || !oldInfo.equals(info)) {
      String xml=info.getChildElementXML();
      if ((xml != null) && (xml.length() != 0)) {
        JabberActivator.getConfigurationService().setProperty(CAPS_PROPERTY_NAME_PREFIX + node,xml);
      }
    }
  }
}
