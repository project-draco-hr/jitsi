{
  if ((user != null) && (node != null)) {
    String oldNode=userCaps.put(user,node);
    if ((oldNode == null) || !oldNode.equals(node)) {
      UserCapsNodeListener[] listeners;
synchronized (userCapsNodeListeners) {
        listeners=userCapsNodeListeners.toArray(NO_USER_CAPS_NODE_LISTENERS);
      }
      if (listeners.length != 0) {
        for (        UserCapsNodeListener listener : listeners)         listener.userCapsNodeAdded(user,node);
      }
    }
  }
}
