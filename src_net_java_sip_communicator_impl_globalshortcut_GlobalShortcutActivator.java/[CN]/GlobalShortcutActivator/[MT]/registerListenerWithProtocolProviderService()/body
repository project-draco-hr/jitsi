{
  ServiceReference[] ppsRefs=null;
  try {
    ppsRefs=bundleContext.getServiceReferences(ProtocolProviderService.class.getName(),null);
  }
 catch (  InvalidSyntaxException ise) {
    logger.error("Failed to get ProtocolProviderService ServiceReferences",ise);
  }
  if (ppsRefs == null)   return;
  for (  ServiceReference ppsRef : ppsRefs) {
    ProtocolProviderService pps=(ProtocolProviderService)bundleContext.getService(ppsRef);
    OperationSetBasicTelephony<?> opSet=pps.getOperationSet(OperationSetBasicTelephony.class);
    if (opSet != null)     opSet.addCallListener(globalShortcutService.getCallShortcut());
  }
}
