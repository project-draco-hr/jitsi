{
  if (!this.connectionState.isConnected()) {
    throw new IllegalStateException("Not connected to an IRC server.");
  }
  final String target=chatroom.getIdentifier();
  final int maxMsgSize=calculateMaximumMessageSize(0,target);
  if (maxMsgSize < message.length()) {
    LOGGER.warn("Message for " + target + " is too large. At best only sent message up to: "+ message.substring(0,maxMsgSize));
  }
  this.irc.message(target,message);
}
