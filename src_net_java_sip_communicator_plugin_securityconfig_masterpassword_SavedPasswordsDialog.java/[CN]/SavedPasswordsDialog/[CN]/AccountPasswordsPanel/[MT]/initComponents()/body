{
  setBorder(BorderFactory.createTitledBorder(BorderFactory.createEtchedBorder(EtchedBorder.LOWERED),resources.getI18NString("plugin.securityconfig.masterpassword.STORED_ACCOUNT_PASSWORDS")));
  this.setLayout(new BoxLayout(this,BoxLayout.Y_AXIS));
  accountsTable=new JTable();
  accountsTable.setModel(new AccountsTableModel());
  accountsTable.setSelectionMode(javax.swing.ListSelectionModel.SINGLE_SELECTION);
  accountsTable.setCellSelectionEnabled(false);
  accountsTable.setColumnSelectionAllowed(false);
  accountsTable.setRowSelectionAllowed(true);
  accountsTable.getColumnModel().getColumn(AccountsTableModel.ACCOUNT_NAME_INDEX).setPreferredWidth(270);
  accountsTable.getSelectionModel().addListSelectionListener(new ListSelectionListener(){
    public void valueChanged(    ListSelectionEvent e){
      if (e.getValueIsAdjusting())       return;
      removeButton.setEnabled(true);
    }
  }
);
  JScrollPane pnlAccounts=new JScrollPane(accountsTable);
  this.add(pnlAccounts);
  JPanel pnlButtons=new TransparentPanel();
  pnlButtons.setLayout(new BorderLayout());
  this.add(pnlButtons);
  JPanel leftButtons=new TransparentPanel();
  pnlButtons.add(leftButtons,BorderLayout.WEST);
  removeButton=new JButton(resources.getI18NString("plugin.securityconfig.masterpassword.REMOVE_PASSWORD_BUTTON"));
  removeButton.setEnabled(false);
  removeButton.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent arg0){
      AccountID selectedAccountID=getSelectedAccountID();
      if (selectedAccountID != null) {
        AccountsTableModel model=(AccountsTableModel)accountsTable.getModel();
        String accountPrefix=model.accountIdPrefixes.get(selectedAccountID);
        removeSavedPassword(accountPrefix,selectedAccountID);
        model.savedPasswordAccounts.remove(selectedAccountID);
        model.accountIdPrefixes.remove(accountPrefix);
        int selectedRow=accountsTable.getSelectedRow();
        model.fireTableRowsDeleted(selectedRow,selectedRow);
      }
    }
  }
);
  leftButtons.add(removeButton);
  removeAllButton=new JButton(resources.getI18NString("plugin.securityconfig.masterpassword.REMOVE_ALL_PASSWORDS_BUTTON"));
  removeAllButton.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent arg0){
      AccountsTableModel model=(AccountsTableModel)accountsTable.getModel();
      if (model.savedPasswordAccounts.isEmpty()) {
        return;
      }
      int answer=SecurityConfigActivator.getUIService().getPopupDialog().showConfirmPopupDialog(resources.getI18NString("plugin.securityconfig.masterpassword.REMOVE_ALL_CONFIRMATION"),resources.getI18NString("plugin.securityconfig.masterpassword.REMOVE_ALL_TITLE"),PopupDialog.YES_NO_OPTION);
      if (answer == PopupDialog.YES_OPTION) {
        for (        AccountID accountID : model.savedPasswordAccounts) {
          String accountPrefix=model.accountIdPrefixes.get(accountID);
          removeSavedPassword(accountPrefix,accountID);
        }
        model.savedPasswordAccounts.clear();
        model.accountIdPrefixes.clear();
        model.fireTableDataChanged();
      }
    }
  }
);
  leftButtons.add(removeAllButton);
  JPanel rightButtons=new TransparentPanel();
  pnlButtons.add(rightButtons,BorderLayout.EAST);
  showPasswordsButton=new JButton(resources.getI18NString("plugin.securityconfig.masterpassword.SHOW_PASSWORDS_BUTTON"));
  showPasswordsButton.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent arg0){
      if (credentialsStorageService.isUsingMasterPassword() && !showPasswords) {
        showOrHidePasswordsProtected();
      }
 else {
        showOrHidePasswords();
      }
    }
  }
);
  rightButtons.add(showPasswordsButton);
}
