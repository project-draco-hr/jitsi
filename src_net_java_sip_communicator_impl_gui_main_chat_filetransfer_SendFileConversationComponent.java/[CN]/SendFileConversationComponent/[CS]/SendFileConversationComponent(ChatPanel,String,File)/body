{
  this.parentChatPanel=chatPanel;
  this.toContactName=toContactName;
  this.file=file;
  constraints.gridx=0;
  constraints.gridy=0;
  constraints.gridwidth=1;
  constraints.gridheight=4;
  constraints.anchor=GridBagConstraints.NORTHWEST;
  constraints.insets=new Insets(5,5,5,5);
  add(imageLabel,constraints);
  this.setFileIcon(file);
  imageLabel.setToolTipText(resources.getI18NString("service.gui.OPEN_FILE_FROM_IMAGE"));
  imageLabel.addMouseListener(new MouseAdapter(){
    public void mouseClicked(    MouseEvent e){
      if (e.getClickCount() > 1) {
        openFile(file);
      }
    }
  }
);
  constraints.gridx=1;
  constraints.gridy=0;
  constraints.gridwidth=2;
  constraints.gridheight=1;
  constraints.weightx=1.0;
  constraints.anchor=GridBagConstraints.NORTHWEST;
  constraints.insets=new Insets(5,5,5,5);
  add(titleLabel,constraints);
  titleLabel.setText(resources.getI18NString("service.gui.FILE_WAITING_TO_ACCEPT",new String[]{toContactName}));
  titleLabel.setFont(titleLabel.getFont().deriveFont(Font.BOLD,11f));
  constraints.gridx=1;
  constraints.gridy=1;
  constraints.anchor=GridBagConstraints.WEST;
  constraints.insets=new Insets(0,5,5,5);
  add(fileLabel,constraints);
  fileLabel.setText(getFileName(file));
  constraints.gridx=1;
  constraints.gridy=2;
  constraints.anchor=GridBagConstraints.WEST;
  constraints.insets=new Insets(0,5,0,5);
  constraints.fill=GridBagConstraints.NONE;
  add(errorIconLabel,constraints);
  errorIconLabel.setVisible(false);
  constraints.gridx=2;
  constraints.gridy=2;
  constraints.anchor=GridBagConstraints.WEST;
  constraints.insets=new Insets(0,5,0,5);
  constraints.fill=GridBagConstraints.HORIZONTAL;
  constraints.gridx=1;
  constraints.gridy=3;
  constraints.gridwidth=1;
  constraints.gridheight=1;
  constraints.weightx=0.0;
  constraints.anchor=GridBagConstraints.WEST;
  constraints.insets=new Insets(0,5,0,5);
  add(cancelButton,constraints);
  cancelButton.setText(GuiActivator.getResources().getI18NString("service.gui.CANCEL"));
  cancelButton.addActionListener(this);
  constraints.gridx=1;
  constraints.gridy=3;
  constraints.gridwidth=1;
  constraints.gridheight=1;
  constraints.weightx=0.0;
  constraints.anchor=GridBagConstraints.WEST;
  constraints.insets=new Insets(0,5,0,5);
  add(retryButton,constraints);
  retryButton.setText(GuiActivator.getResources().getI18NString("service.gui.RETRY"));
  retryButton.addActionListener(this);
  retryButton.setVisible(false);
  constraints.gridx=1;
  constraints.gridy=2;
  constraints.gridwidth=2;
  constraints.gridheight=1;
  constraints.weightx=1.0;
  constraints.anchor=GridBagConstraints.WEST;
  constraints.insets=new Insets(0,5,0,5);
  constraints.ipadx=150;
  add(progressBar,constraints);
  progressBar.setMaximum((int)file.length());
  progressBar.setVisible(false);
  progressBar.setStringPainted(true);
}
