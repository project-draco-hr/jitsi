{
  if (original == null) {
    return "";
  }
  String source;
  if (ChatHtmlUtils.HTML_CONTENT_TYPE.equals(contentType)) {
    source=original;
  }
 else {
    source=StringEscapeUtils.escapeHtml4(original);
  }
  final Replacer[] replacers=new Replacer[]{new NewlineReplacer(),new URLReplacer(),new KeywordReplacer(keyword),new BrTagReplacer(),new ImgTagReplacer()};
  return processReplacers(source,replacers);
}
