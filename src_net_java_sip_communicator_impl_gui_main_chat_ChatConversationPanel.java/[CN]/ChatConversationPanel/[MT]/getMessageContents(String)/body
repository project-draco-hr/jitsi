{
  Element root=document.getDefaultRootElement();
  Element e=document.getElement(root,Attribute.ID,ChatHtmlUtils.MESSAGE_TEXT_ID + messageUID);
  if (e == null) {
    logger.warn("Could not find message with ID" + messageUID);
    return null;
  }
  int elemLen=e.getEndOffset() - e.getStartOffset();
  String res=null;
  try {
    res=document.getText(e.getStartOffset(),elemLen);
    String editedAtString=GuiActivator.getResources().getI18NString("service.gui.EDITED_AT");
    int editedAtIndex=res.indexOf("(" + editedAtString.substring(0,editedAtString.indexOf("{0}")));
    if (editedAtIndex > 0)     res=res.substring(0,editedAtIndex);
  }
 catch (  BadLocationException exc) {
    logger.warn("Could not get message contents for message " + "with ID" + messageUID,exc);
  }
  return res;
}
