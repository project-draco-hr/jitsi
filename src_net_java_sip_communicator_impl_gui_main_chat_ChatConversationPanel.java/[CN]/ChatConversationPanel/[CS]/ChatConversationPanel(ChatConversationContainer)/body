{
  this.chatContainer=chatContainer;
  isHistory=(chatContainer instanceof HistoryWindow);
  this.rightButtonMenu=new ChatRightButtonMenu(this);
  this.document=(HTMLDocument)editorKit.createDefaultDocument();
  this.chatEditorPane.setContentType("text/html");
  this.chatEditorPane.setEditable(false);
  this.chatEditorPane.setEditorKitForContentType("text/html",editorKit);
  this.chatEditorPane.setEditorKit(editorKit);
  this.chatEditorPane.setDocument(document);
  Constants.loadSimpleStyle(document.getStyleSheet());
  this.chatEditorPane.addHyperlinkListener(this);
  this.chatEditorPane.addMouseListener(this);
  this.setWheelScrollingEnabled(true);
  this.setViewportView(chatEditorPane);
  this.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
  ToolTipManager.sharedInstance().registerComponent(chatEditorPane);
  I18NString copyLinkString=Messages.getI18NString("copyLink");
  copyLinkItem=new JMenuItem(copyLinkString.getText(),new ImageIcon(ImageLoader.getImage(ImageLoader.COPY_ICON)));
  copyLinkItem.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      StringSelection stringSelection=new StringSelection(currentHref);
      Clipboard clipboard=Toolkit.getDefaultToolkit().getSystemClipboard();
      clipboard.setContents(stringSelection,ChatConversationPanel.this);
    }
  }
);
  I18NString openLinkString=Messages.getI18NString("openInBrowser");
  openLinkItem=new JMenuItem(openLinkString.getText(),new ImageIcon(ImageLoader.getImage(ImageLoader.BROWSER_ICON)));
  openLinkItem.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      GuiActivator.getBrowserLauncher().openURL(currentHref);
    }
  }
);
  openLinkItem.setMnemonic(openLinkString.getMnemonic());
  copyLinkItem.setMnemonic(copyLinkString.getMnemonic());
}
