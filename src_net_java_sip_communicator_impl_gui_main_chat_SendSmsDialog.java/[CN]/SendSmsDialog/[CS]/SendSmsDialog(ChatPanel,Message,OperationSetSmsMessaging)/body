{
  super(chatPanel.getChatWindow());
  this.chatPanel=chatPanel;
  this.smsOpSet=opSet;
  this.smsMessage=message;
  this.metaContact=(MetaContact)chatPanel.getChatIdentifier();
  this.setTitle(title);
  this.getContentPane().add(mainPanel,BorderLayout.CENTER);
  this.getContentPane().add(buttonPanel,BorderLayout.SOUTH);
  this.mainPanel.setBorder(BorderFactory.createEmptyBorder(20,20,20,20));
  this.mainPanel.add(phoneNumberLabel,BorderLayout.WEST);
  this.mainPanel.add(phoneNumberBox,BorderLayout.CENTER);
  this.mainPanel.add(detailsArea,BorderLayout.SOUTH);
  List detailsList=metaContact.getDetails("mobile");
  if (detailsList != null && detailsList.size() > 0) {
    String detail=(String)detailsList.iterator().next();
    phoneNumberBox.setText(detail);
  }
  this.detailsArea.setOpaque(false);
  this.detailsArea.setLineWrap(true);
  this.detailsArea.setWrapStyleWord(true);
  this.detailsArea.setEditable(false);
  this.buttonPanel.add(sendButton);
  this.sendButton.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent event){
      sendSmsMessage(phoneNumberBox.getText(),smsMessage);
    }
  }
);
}
