{
  OperationSetBasicTelephony telOpSet=call.getProtocolProvider().getOperationSet(OperationSetBasicTelephony.class);
  if (telOpSet != null) {
    telOpSet.addCallListener(new CallListener(){
      /** 
 * Implements CallListener.callEnded. Disposes the frame
 * related to the ended call.
 * @param event the <tt>CallEvent</tt> that notified us
 */
      public void callEnded(      CallEvent event){
        Call call=event.getSourceCall();
        JFrame desktopFrame=callDesktopFrames.get(call);
        if (desktopFrame != null) {
          desktopFrame.dispose();
          callDesktopFrames.remove(call);
        }
      }
      public void incomingCallReceived(      CallEvent event){
      }
      public void outgoingCallCreated(      CallEvent event){
      }
    }
);
  }
}
