{
  if (state != 0) {
    Speex.speex_encoder_destroy(state);
    state=0;
    sampleRate=0;
    frameSize=0;
    duration=0;
  }
  Speex.speex_bits_destroy(bits);
  bits=0;
  previousInput=null;
}
