{
synchronized (chatRoomCache) {
    List<String> joinedRooms=new LinkedList<String>();
    Iterator<ChatRoom> joinedRoomsIter=new LinkedList<ChatRoom>(this.chatRoomCache.values()).iterator();
    while (joinedRoomsIter.hasNext()) {
      ChatRoom room=joinedRoomsIter.next();
      if (room.isJoined())       joinedRooms.add(room.getName());
    }
    return joinedRooms;
  }
}
