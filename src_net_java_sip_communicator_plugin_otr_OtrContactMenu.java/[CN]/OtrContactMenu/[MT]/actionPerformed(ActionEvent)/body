{
  String actionCommand=e.getActionCommand();
  if (ACTION_COMMAND_END_OTR.equals(actionCommand))   OtrActivator.scOtrEngine.endSession(contact);
 else   if (ACTION_COMMAND_START_OTR.equals(actionCommand))   OtrActivator.scOtrEngine.startSession(contact);
 else   if (ACTION_COMMAND_REFRESH_OTR.equals(actionCommand))   OtrActivator.scOtrEngine.refreshSession(contact);
 else   if (ACTION_COMMAND_AUTHENTICATE_BUDDY.equals(actionCommand)) {
    OtrBuddyAuthenticationDialog authenticateBuddyDialog=new OtrBuddyAuthenticationDialog(contact);
    Dimension screenSize=Toolkit.getDefaultToolkit().getScreenSize();
    authenticateBuddyDialog.setLocation(screenSize.width / 2 - authenticateBuddyDialog.getWidth() / 2,screenSize.height / 2 - authenticateBuddyDialog.getHeight() / 2);
    authenticateBuddyDialog.setVisible(true);
  }
 else   if (ACTION_COMMAND_CB_ENABLE.equals(actionCommand)) {
    OtrPolicy policy=OtrActivator.scOtrEngine.getContactPolicy(contact);
    boolean state=((JCheckBoxMenuItem)e.getSource()).getState();
    policy.setEnableManual(state);
    OtrActivator.scOtrEngine.setContactPolicy(contact,policy);
  }
 else   if (ACTION_COMMAND_CB_AUTO.equals(actionCommand)) {
    OtrPolicy policy=OtrActivator.scOtrEngine.getContactPolicy(contact);
    boolean state=((JCheckBoxMenuItem)e.getSource()).getState();
    policy.setEnableAlways(state);
    OtrActivator.scOtrEngine.setContactPolicy(contact,policy);
  }
 else   if (ACTION_COMMAND_CB_REQUIRE.equals(actionCommand)) {
    OtrPolicy policy=OtrActivator.scOtrEngine.getContactPolicy(contact);
    boolean state=((JCheckBoxMenuItem)e.getSource()).getState();
    policy.setEnableAlways(state);
    OtrActivator.scOtrEngine.setContactPolicy(contact,policy);
  }
 else   if (ACTION_COMMAND_CB_RESET.equals(actionCommand))   OtrActivator.scOtrEngine.setContactPolicy(contact,null);
}
