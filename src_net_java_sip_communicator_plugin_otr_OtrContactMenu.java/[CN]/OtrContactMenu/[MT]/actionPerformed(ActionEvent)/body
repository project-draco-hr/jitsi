{
  String actionCommand=e.getActionCommand();
  if (ACTION_COMMAND_END_OTR.equals(actionCommand))   OtrActivator.scOtrEngine.endSession(contact);
 else   if (ACTION_COMMAND_START_OTR.equals(actionCommand))   OtrActivator.scOtrEngine.startSession(contact);
 else   if (ACTION_COMMAND_REFRESH_OTR.equals(actionCommand))   OtrActivator.scOtrEngine.refreshSession(contact);
 else   if (ACTION_COMMAND_AUTHENTICATE_BUDDY.equals(actionCommand))   OtrActionHandlers.openAuthDialog(contact);
 else   if (ACTION_COMMAND_CB_ENABLE.equals(actionCommand)) {
    OtrPolicy policy=OtrActivator.scOtrEngine.getContactPolicy(contact);
    boolean state=((JCheckBoxMenuItem)e.getSource()).isSelected();
    policy.setEnableManual(state);
    OtrActivator.scOtrEngine.setContactPolicy(contact,policy);
  }
 else   if (ACTION_COMMAND_CB_AUTO.equals(actionCommand)) {
    OtrPolicy policy=OtrActivator.scOtrEngine.getContactPolicy(contact);
    boolean state=((JCheckBoxMenuItem)e.getSource()).isSelected();
    policy.setEnableAlways(state);
    OtrActivator.configService.setProperty(OtrActivator.AUTO_INIT_OTR_PROP,Boolean.toString(state));
    OtrActivator.scOtrEngine.setContactPolicy(contact,policy);
  }
 else   if (ACTION_COMMAND_CB_REQUIRE.equals(actionCommand)) {
    OtrPolicy policy=OtrActivator.scOtrEngine.getContactPolicy(contact);
    boolean state=((JCheckBoxMenuItem)e.getSource()).isSelected();
    policy.setRequireEncryption(state);
    OtrActivator.configService.setProperty(OtrActivator.OTR_MANDATORY_PROP,Boolean.toString(state));
    OtrActivator.scOtrEngine.setContactPolicy(contact,policy);
  }
 else   if (ACTION_COMMAND_CB_RESET.equals(actionCommand))   OtrActivator.scOtrEngine.setContactPolicy(contact,null);
}
