{
  List<CaptureDeviceInfo> captureDevices=null;
  if (this.captureDevice != null) {
    if (captureDevices == null)     captureDevices=getCaptureDevices();
    if ((captureDevices == null) || !captureDevices.contains(this.captureDevice))     setCaptureDevice(null,false);
  }
  CaptureDeviceInfo captureDevice=this.captureDevice;
  if ((captureDevice == null) && ((flags & FLAG_CAPTURE_DEVICE_IS_NULL) == 0)) {
    if (captureDevices == null)     captureDevices=getCaptureDevices();
    if ((captureDevices != null) && (captureDevices.size() > 0)) {
      captureDevice=loadDevice(PROP_CAPTURE_DEVICE,captureDevices);
      if (captureDevice == null)       captureDevice=captureDevices.get(0);
    }
  }
  return captureDevice;
}
