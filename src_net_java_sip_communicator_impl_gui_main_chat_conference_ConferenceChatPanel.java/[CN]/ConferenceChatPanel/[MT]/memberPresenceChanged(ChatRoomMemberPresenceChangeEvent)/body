{
  ChatRoom sourceChatRoom=(ChatRoom)evt.getSource();
  if (!sourceChatRoom.equals(chatRoomWrapper.getChatRoom()))   return;
  String eventType=evt.getEventType();
  ChatRoomMember chatRoomMember=evt.getChatRoomMember();
  String statusMessage=null;
  if (eventType.equals(ChatRoomMemberPresenceChangeEvent.MEMBER_JOINED)) {
    getChatContactListPanel().addContact(new ChatContact(chatRoomMember));
    statusMessage=Messages.getI18NString("chatRoomUserJoined",new String[]{sourceChatRoom.getName()}).getText();
  }
 else   if (eventType.equals(ChatRoomMemberPresenceChangeEvent.MEMBER_LEFT) || eventType.equals(ChatRoomMemberPresenceChangeEvent.MEMBER_KICKED) || eventType.equals(ChatRoomMemberPresenceChangeEvent.MEMBER_QUIT)) {
    Iterator chatContacts=getChatContactListPanel().getChatContacts();
    while (chatContacts.hasNext()) {
      ChatContact chatContact=(ChatContact)chatContacts.next();
      if (chatContact.getSourceContact().equals(chatRoomMember)) {
        getChatContactListPanel().removeContact(chatContact);
        break;
      }
    }
    if (eventType.equals(ChatRoomMemberPresenceChangeEvent.MEMBER_LEFT)) {
      statusMessage=Messages.getI18NString("chatRoomUserLeft",new String[]{sourceChatRoom.getName()}).getText();
    }
 else     if (eventType.equals(ChatRoomMemberPresenceChangeEvent.MEMBER_KICKED)) {
      statusMessage=Messages.getI18NString("chatRoomUserKicked",new String[]{sourceChatRoom.getName()}).getText();
    }
 else     if (eventType.equals(ChatRoomMemberPresenceChangeEvent.MEMBER_QUIT)) {
      statusMessage=Messages.getI18NString("chatRoomUserQuit",new String[]{sourceChatRoom.getName()}).getText();
    }
  }
  this.processMessage(chatRoomMember.getName(),new Date(System.currentTimeMillis()),Constants.STATUS_MESSAGE,statusMessage,ChatConversationPanel.TEXT_CONTENT_TYPE);
}
