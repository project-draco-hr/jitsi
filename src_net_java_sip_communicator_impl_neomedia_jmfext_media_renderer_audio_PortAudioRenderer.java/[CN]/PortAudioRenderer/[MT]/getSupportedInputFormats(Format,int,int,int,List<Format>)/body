{
  AudioFormat audioFormat=(AudioFormat)format;
  int sampleSizeInBits=audioFormat.getSampleSizeInBits();
  long sampleFormat=PortAudio.getPaSampleFormat(sampleSizeInBits);
  double sampleRate=audioFormat.getSampleRate();
  for (int channels=minOutputChannels; channels <= maxOutputChannels; channels++) {
    long outputParameters=PortAudio.PaStreamParameters_new(deviceIndex,channels,sampleFormat,PortAudio.LATENCY_UNSPECIFIED);
    if (outputParameters != 0) {
      try {
        if (PortAudio.Pa_IsFormatSupported(0,outputParameters,sampleRate)) {
          supportedInputFormats.add(new AudioFormat(audioFormat.getEncoding(),sampleRate,sampleSizeInBits,channels,audioFormat.getEndian(),audioFormat.getSigned(),Format.NOT_SPECIFIED,Format.NOT_SPECIFIED,audioFormat.getDataType()));
        }
      }
  finally {
        PortAudio.PaStreamParameters_free(outputParameters);
      }
    }
  }
}
