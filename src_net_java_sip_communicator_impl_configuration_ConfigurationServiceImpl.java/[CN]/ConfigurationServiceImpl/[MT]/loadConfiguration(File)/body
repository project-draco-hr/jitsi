{
  try {
    logger.logEntry();
    DocumentBuilderFactory factory=DocumentBuilderFactory.newInstance();
    DocumentBuilder builder=factory.newDocumentBuilder();
    Map properties=new Hashtable();
    propertiesDocument=builder.parse(file);
    Node root=propertiesDocument.getFirstChild();
    Node currentNode=null;
    NodeList children=root.getChildNodes();
    for (int i=0; i < children.getLength(); i++) {
      currentNode=children.item(i);
      if (currentNode.getNodeType() == Node.ELEMENT_NODE) {
        StringBuffer propertyNameBuff=new StringBuffer();
        propertyNameBuff.append(currentNode.getNodeName());
        loadNode(currentNode,propertyNameBuff,properties);
      }
    }
    return properties;
  }
 catch (  SAXException ex) {
    logger.error("Error parsing configuration file",ex);
    throw new XMLException(ex.getMessage(),ex);
  }
catch (  ParserConfigurationException ex) {
    logger.error("Error finding configuration for default parsers",ex);
    return new Hashtable();
  }
 finally {
    logger.logExit();
  }
}
