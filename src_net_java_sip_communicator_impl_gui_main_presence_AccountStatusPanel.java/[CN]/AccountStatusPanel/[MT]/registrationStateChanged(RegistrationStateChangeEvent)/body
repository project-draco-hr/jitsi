{
  final ProtocolProviderService protocolProvider=evt.getProvider();
  this.updateStatus(protocolProvider);
  if (evt.getNewState().equals(RegistrationState.REGISTERED)) {
    new Thread(new Runnable(){
      public void run(){
        OperationSetServerStoredAccountInfo accountInfoOpSet=(OperationSetServerStoredAccountInfo)protocolProvider.getOperationSet(OperationSetServerStoredAccountInfo.class);
        if (accountInfoOpSet != null) {
          byte[] accountImage=AccountInfoUtils.getImage(accountInfoOpSet);
          if (accountImage != null) {
            accountImageLabel.setIcon(ImageUtils.scaleIconWithinBounds(new ImageIcon(accountImage),AVATAR_ICON_WIDTH,AVATAR_ICON_HEIGHT));
          }
          String firstName=AccountInfoUtils.getFirstName(accountInfoOpSet);
          String lastName=AccountInfoUtils.getLastName(accountInfoOpSet);
          String accountName="";
          if (firstName != null) {
            accountName+=firstName;
          }
          if (lastName != null) {
            accountName+=" " + lastName;
          }
          if (accountName.length() == 0) {
            String displayName=AccountInfoUtils.getDisplayName(accountInfoOpSet);
            if (displayName != null)             accountName=displayName;
          }
          if (accountName.length() > 0) {
            accountNameLabel.setText(accountName);
          }
          revalidate();
          repaint();
        }
      }
    }
).start();
  }
}
