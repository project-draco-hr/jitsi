{
  super(new BorderLayout(10,0));
  this.setBorder(BorderFactory.createEmptyBorder(5,5,5,5));
  if (ConfigurationManager.isTransparentWindowEnabled())   this.setUI(new SIPCommOpaquePanelUI());
  FramedImageWithMenu imageWithMenu=new FramedImageWithMenu(mainFrame,new ImageIcon(ImageLoader.getImage(ImageLoader.DEFAULT_USER_PHOTO)),AVATAR_ICON_WIDTH,AVATAR_ICON_HEIGHT);
  imageWithMenu.setPopupMenu(new SelectAvatarMenu(imageWithMenu));
  this.accountImageLabel=imageWithMenu;
  accountNameLabel.setFont(accountNameLabel.getFont().deriveFont(Font.BOLD));
  accountNameLabel.setOpaque(false);
  statusComboBox=new GlobalStatusSelectorBox(mainFrame);
  statusComboBox.setBorder(BorderFactory.createEmptyBorder(0,0,0,0));
  TransparentPanel statusToolsPanel=new TransparentPanel(new BorderLayout(0,0));
  SIPCommMenuBar statusMenuBar=new SIPCommMenuBar();
  statusMenuBar.add(statusComboBox);
  statusToolsPanel.add(statusMenuBar,BorderLayout.WEST);
  toolbarPluginPanel=new TransparentPanel(new FlowLayout(FlowLayout.RIGHT));
  new PluginContainer(toolbarPluginPanel,Container.CONTAINER_MAIN_TOOL_BAR);
  statusToolsPanel.add(toolbarPluginPanel,BorderLayout.EAST);
  TransparentPanel rightPanel=new TransparentPanel();
  rightPanel.setLayout(new BorderLayout(0,0));
  rightPanel.setBorder(BorderFactory.createEmptyBorder(3,0,3,0));
  rightPanel.add(accountNameLabel,BorderLayout.NORTH);
  rightPanel.add(statusToolsPanel,BorderLayout.SOUTH);
  this.add(accountImageLabel,BorderLayout.WEST);
  this.add(rightPanel,BorderLayout.CENTER);
  southPluginPanel=new TransparentPanel(new BorderLayout());
  new PluginContainer(southPluginPanel,Container.CONTAINER_ACCOUNT_SOUTH);
  this.add(southPluginPanel,BorderLayout.SOUTH);
  BufferedImage bgImage=ImageLoader.getImage(ImageLoader.WINDOW_TITLE_BAR_BG);
  texture=new TexturePaint(bgImage,new Rectangle(0,0,bgImage.getWidth(null),bgImage.getHeight(null)));
  GuiActivator.getUIService().addPluginComponentListener(this);
}
