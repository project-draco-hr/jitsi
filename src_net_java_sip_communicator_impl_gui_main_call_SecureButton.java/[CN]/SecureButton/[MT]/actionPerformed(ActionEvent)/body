{
  Call call=callParticipant.getCall();
  if (call != null) {
    String command=evt.getActionCommand();
    if (command.equals("startSecureMode")) {
      OperationSetBasicTelephony telephony=(OperationSetBasicTelephony)call.getProtocolProvider().getOperationSet(OperationSetBasicTelephony.class);
      if (telephony.getSecured(callParticipant)) {
        updateSecureButton(false);
        telephony.setSecured(callParticipant,false,OperationSetBasicTelephony.SecureStatusChangeSource.SECURE_STATUS_CHANGE_BY_LOCAL);
      }
 else {
        updateSecureButton(true);
        telephony.setSecured(callParticipant,true,OperationSetBasicTelephony.SecureStatusChangeSource.SECURE_STATUS_CHANGE_BY_LOCAL);
      }
    }
  }
}
