{
  Call call=callParticipant.getCall();
  if (call != null) {
    String command=evt.getActionCommand();
    if (command.equals("startSecureMode")) {
      OperationSetSecuredTelephony telephony=(OperationSetSecuredTelephony)call.getProtocolProvider().getOperationSet(OperationSetSecuredTelephony.class);
      if (telephony != null && telephony.isSecured(callParticipant)) {
        updateSecureButton(false);
        telephony.setSecured(callParticipant,false,OperationSetSecuredTelephony.SecureStatusChangeSource.SECURE_STATUS_CHANGE_BY_LOCAL);
      }
 else       if (telephony != null) {
        updateSecureButton(true);
        telephony.setSecured(callParticipant,true,OperationSetSecuredTelephony.SecureStatusChangeSource.SECURE_STATUS_CHANGE_BY_LOCAL);
      }
    }
  }
}
