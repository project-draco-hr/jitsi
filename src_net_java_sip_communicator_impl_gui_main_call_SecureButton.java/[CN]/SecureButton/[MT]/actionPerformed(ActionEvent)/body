{
  Call call=callParticipant.getCall();
  if (call != null) {
    String command=evt.getActionCommand();
    if (command.equals("startSecureMode")) {
      OperationSetSecureTelephony telephony=(OperationSetSecureTelephony)call.getProtocolProvider().getOperationSet(OperationSetSecureTelephony.class);
      if (telephony != null && telephony.isSecure(callParticipant)) {
        updateSecureButton(false);
        telephony.setSecure(callParticipant,false,OperationSetSecureTelephony.SecureStatusChangeSource.SECURE_STATUS_CHANGE_BY_LOCAL);
      }
 else       if (telephony != null) {
        updateSecureButton(true);
        telephony.setSecure(callParticipant,true,OperationSetSecureTelephony.SecureStatusChangeSource.SECURE_STATUS_CHANGE_BY_LOCAL);
      }
    }
  }
}
