{
  this.sipProvider=provider;
  this.sentMsg=new Hashtable(3);
  provider.addRegistrationStateChangeListener(new RegistrationStateListener());
  Object isOffMsgsSupported=provider.getAccountID().getAccountProperties().get("OFFLINE_MSG_SUPPORTED");
  if (isOffMsgsSupported != null && Boolean.valueOf((String)isOffMsgsSupported).booleanValue())   offlineMessageSupported=true;
  sipProvider.registerMethodProcessor(Request.MESSAGE,new BasicInstantMessagingMethodProcessor());
  this.sipStatusEnum=sipProvider.getSipStatusEnum();
}
