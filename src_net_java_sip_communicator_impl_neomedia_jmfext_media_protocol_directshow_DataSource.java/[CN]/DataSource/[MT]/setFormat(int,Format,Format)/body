{
  if (newValue instanceof VideoFormat) {
    VideoFormat newVideoFormatValue=(VideoFormat)newValue;
    Dimension newSize=newVideoFormatValue.getSize();
    if ((newSize != null) && (newSize.width < DEFAULT_WIDTH) && (newSize.height < DEFAULT_HEIGHT)) {
      String encoding=newVideoFormatValue.getEncoding();
      Class<?> dataType=newVideoFormatValue.getDataType();
      float frameRate=newVideoFormatValue.getFrameRate();
      newSize=new Dimension(DEFAULT_WIDTH,DEFAULT_HEIGHT);
      newValue=((Format)newVideoFormatValue.clone()).relax().intersects(new VideoFormat(encoding,newSize,Format.NOT_SPECIFIED,dataType,frameRate));
    }
    if (newValue instanceof AVFrameFormat) {
      AVFrameFormat newAVFrameFormatValue=(AVFrameFormat)newValue;
      long pixelFormat=newAVFrameFormatValue.getDevicePixFmt();
      if (pixelFormat != -1) {
        nativeFormat=new DSFormat(newSize.width,newSize.height,pixelFormat);
      }
    }
    return newValue;
  }
 else   return super.setFormat(streamIndex,oldValue,newValue);
}
