{
  if (newValue instanceof VideoFormat) {
    VideoFormat newVideoFormatValue=(VideoFormat)newValue;
    Dimension newSize=newVideoFormatValue.getSize();
    if ((newSize != null) && (newSize.width < DEFAULT_WIDTH) && (newSize.height < DEFAULT_HEIGHT)) {
      String encoding=newVideoFormatValue.getEncoding();
      Class<?> dataType=newVideoFormatValue.getDataType();
      float frameRate=newVideoFormatValue.getFrameRate();
      newSize=new Dimension(DEFAULT_WIDTH,DEFAULT_HEIGHT);
      newValue=((Format)newVideoFormatValue.clone()).relax().intersects(new VideoFormat(encoding,newSize,Format.NOT_SPECIFIED,dataType,frameRate));
    }
    if (newValue instanceof AVFrameFormat) {
      AVFrameFormat f=(AVFrameFormat)newValue;
      long pixelFormat=-1;
      int pixFmt=f.getPixFmt();
      pixelFormat=getDSPixFmt(pixFmt);
      if (pixelFormat != -1) {
        DSFormat fmt=new DSFormat(newSize.width,newSize.height,pixelFormat);
        nativeFormat=fmt;
      }
    }
    return newValue;
  }
 else {
    return super.setFormat(streamIndex,oldValue,newValue);
  }
}
