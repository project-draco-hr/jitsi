{
  if (newValue instanceof VideoFormat) {
    if (newValue instanceof AVFrameFormat) {
      AVFrameFormat newAVFrameFormatValue=(AVFrameFormat)newValue;
      long pixelFormat=newAVFrameFormatValue.getDevicePixFmt();
      if (pixelFormat != -1) {
        Dimension size=newAVFrameFormatValue.getSize();
        nativeFormat=new DSFormat(size.width,size.height,pixelFormat);
      }
    }
    return newValue;
  }
 else   return super.setFormat(streamIndex,oldValue,newValue);
}
