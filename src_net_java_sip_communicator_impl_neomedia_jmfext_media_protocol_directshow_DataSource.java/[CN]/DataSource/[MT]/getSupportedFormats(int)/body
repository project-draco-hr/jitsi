{
  if (device == null)   return new Format[0];
  DSFormat[] deviceFmts=device.getSupportedFormats();
  List<Format> fmts=new ArrayList<Format>(deviceFmts.length);
  for (  DSFormat deviceFmt : deviceFmts) {
    Dimension size=new Dimension(deviceFmt.getWidth(),deviceFmt.getHeight());
    long devicePixFmt=deviceFmt.getPixelFormat();
    int pixFmt=(int)getFFmpegPixFmt(devicePixFmt);
    fmts.add(new AVFrameFormat(size,Format.NOT_SPECIFIED,pixFmt,(int)devicePixFmt));
  }
  return fmts.toArray(new Format[fmts.size()]);
}
