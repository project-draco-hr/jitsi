{
  if (fixOddYuv420Size && (format instanceof YUVFormat)) {
    YUVFormat yuvFormat=(YUVFormat)format;
    if (YUVFormat.YUV_420 == yuvFormat.getYuvType()) {
      Dimension size=yuvFormat.getSize();
      if ((size != null) && (size.width > 2) && (size.height > 2)) {
        int width=(size.width >> 1) << 1;
        int height=(size.height >> 1) << 1;
        if ((width != size.width) || (height != size.height)) {
          format=new YUVFormat(new Dimension(width,height),Format.NOT_SPECIFIED,yuvFormat.getDataType(),yuvFormat.getFrameRate(),yuvFormat.getYuvType(),Format.NOT_SPECIFIED,Format.NOT_SPECIFIED,0,Format.NOT_SPECIFIED,Format.NOT_SPECIFIED);
        }
      }
    }
  }
  Format outputFormat=super.setOutputFormat(format);
  if (logger.isDebugEnabled() && (outputFormat != null))   logger.debug("SwScaler set to output in " + outputFormat);
  return outputFormat;
}
