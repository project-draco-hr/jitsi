{
  DataSource captureDevice=getCaptureDevice();
  if ((captureDevice != null) && !captureDeviceIsConnected) {
    try {
      if (this.format != null)       setCaptureDeviceFormat(captureDevice,this.format);
    }
 catch (    Throwable t) {
      logger.warn("Failed to setup an optimized media codec chain" + " by setting the output Format" + " on the input CaptureDevice",t);
    }
    Throwable exception=null;
    try {
      getDevice().connect(captureDevice);
    }
 catch (    IOException ioex) {
      exception=ioex;
    }
    if (exception == null)     captureDeviceIsConnected=true;
 else {
      logger.error("Failed to connect to " + MediaStreamImpl.toString(captureDevice),exception);
      captureDevice=null;
    }
  }
  return captureDevice;
}
