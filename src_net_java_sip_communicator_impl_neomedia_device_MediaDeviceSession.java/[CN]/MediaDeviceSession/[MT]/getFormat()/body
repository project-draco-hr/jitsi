{
  Processor processor=getProcessor();
  if ((processor != null) && (this.processor == processor) && !processorIsPrematurelyClosed) {
    MediaType mediaType=getMediaType();
    for (    TrackControl trackControl : processor.getTrackControls()) {
      if (!trackControl.isEnabled())       continue;
      MediaFormat format=MediaFormatImpl.createInstance(trackControl.getFormat());
      if ((format != null) && format.getMediaType().equals(mediaType))       return format;
    }
  }
  return null;
}
