{
  if (direction == null)   throw new NullPointerException("direction");
switch (startedDirection) {
case SENDRECV:
    if (direction.allowsReceiving())     startedDirection=direction.allowsSending() ? MediaDirection.INACTIVE : MediaDirection.SENDONLY;
 else     if (direction.allowsSending())     startedDirection=MediaDirection.RECVONLY;
  break;
case SENDONLY:
if (direction.allowsSending()) startedDirection=MediaDirection.INACTIVE;
break;
case RECVONLY:
if (direction.allowsReceiving()) startedDirection=MediaDirection.INACTIVE;
break;
case INACTIVE:
break;
default :
throw new IllegalArgumentException("direction");
}
if (startedDirection.allowsSending()) if ((processor != null) && (processor.getState() > Processor.Configured)) {
processor.stop();
if (logger.isTraceEnabled()) logger.trace("Stopped Processor with hashCode " + processor.hashCode());
}
}
