{
  Processor processor=getProcessor();
  if ((processor != null) && (this.processor == processor) && !processorIsPrematurelyClosed) {
    MediaType mediaType=getMediaType();
    for (    TrackControl trackControl : processor.getTrackControls()) {
      if (!trackControl.isEnabled())       continue;
      Format jmfFormat=trackControl.getFormat();
      MediaType type=(jmfFormat instanceof VideoFormat) ? MediaType.VIDEO : MediaType.AUDIO;
      if (mediaType.equals(type))       return jmfFormat;
    }
  }
  return null;
}
