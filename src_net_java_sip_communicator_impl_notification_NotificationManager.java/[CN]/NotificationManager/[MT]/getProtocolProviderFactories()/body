{
  ServiceReference[] serRefs=null;
  try {
    serRefs=NotificationActivator.bundleContext.getServiceReferences(ProtocolProviderFactory.class.getName(),null);
  }
 catch (  InvalidSyntaxException e) {
    logger.error("NotificationManager : " + e);
  }
  Map<Object,ProtocolProviderFactory> providerFactoriesMap=new Hashtable<Object,ProtocolProviderFactory>();
  if (serRefs != null) {
    for (    ServiceReference serRef : serRefs) {
      ProtocolProviderFactory providerFactory=(ProtocolProviderFactory)NotificationActivator.bundleContext.getService(serRef);
      providerFactoriesMap.put(serRef.getProperty(ProtocolProviderFactory.PROTOCOL),providerFactory);
    }
  }
  return providerFactoriesMap;
}
