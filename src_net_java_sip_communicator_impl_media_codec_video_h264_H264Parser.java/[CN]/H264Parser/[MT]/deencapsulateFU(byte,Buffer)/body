{
  byte[] buf=(byte[])inputBuffer.getData();
  int len=inputBuffer.getLength();
  int offset=inputBuffer.getOffset();
  offset++;
  len--;
  byte fu_indicator=nal;
  byte fu_header=buf[offset];
  boolean start_bit=(fu_header >> 7) != 0;
  int nal_type=(fu_header & 0x1f);
  byte reconstructed_nal;
  reconstructed_nal=(byte)(fu_indicator & (byte)0xe0);
  reconstructed_nal|=nal_type;
  offset++;
  len--;
  if (start_bit) {
    System.arraycopy(startSequence,0,encodedFrame,encodedFrameLen,startSequence.length);
    encodedFrameLen+=startSequence.length;
    encodedFrame[encodedFrameLen]=reconstructed_nal;
    encodedFrameLen++;
    System.arraycopy(buf,offset,encodedFrame,encodedFrameLen,len);
    encodedFrameLen+=len;
  }
 else {
    System.arraycopy(buf,offset,encodedFrame,encodedFrameLen,len);
    encodedFrameLen+=len;
  }
}
