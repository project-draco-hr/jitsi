{
  String roomName=testRoomBaseName + roomID;
  logger.info("--- Start testRevokeMembership room:" + roomName);
  ChatRoom roomUser1=opSetMUC1.findRoom(roomName);
  assertNotNull("The room can't be retrieved on user1's side",roomUser1);
  ChatRoom roomUser3=opSetMUC3.findRoom(roomName);
  assertNotNull("The room can't be retrieved on user3's side",roomUser3);
  MUCEventCollector roomUser3Col=new MUCEventCollector(roomUser3,MUCEventCollector.EVENT_ROLE);
  roomUser1.revokeMembership(fixture.userID2);
  roomUser3Col.waitForEvent(10000);
  assertEquals("Wrong count of collected events on user3's side",1,roomUser3Col.collectedEvents.size());
  ChatRoomMemberRoleChangeEvent roleEventUser3=(ChatRoomMemberRoleChangeEvent)roomUser3Col.collectedEvents.get(0);
  assertEquals("Collected event does not belong to the right chatroom",roomName,StringUtils.parseName(roleEventUser3.getSourceChatRoom().getName()));
  assertEquals("Collected event does not belong to the expected user",fixture.userID2,roleEventUser3.getSourceMember().getContactAddress());
  assertEquals("User2's previous role does not match",ChatRoomMemberRole.MEMBER,roleEventUser3.getPreviousRole());
  assertEquals("Unexpected new role",ChatRoomMemberRole.GUEST,roleEventUser3.getNewRole());
  logger.info("--- End testRevokeMembership room:" + roomName);
}
