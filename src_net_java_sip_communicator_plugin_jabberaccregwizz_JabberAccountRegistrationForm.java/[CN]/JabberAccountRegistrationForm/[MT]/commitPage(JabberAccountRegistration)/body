{
  String userID=accountPanel.getUsername();
  if (userID == null || userID.trim().length() == 0)   throw new IllegalStateException("No user ID provided.");
  registration.setUserID(userID);
  registration.setPassword(new String(accountPanel.getPassword()));
  registration.setRememberPassword(accountPanel.isRememberPassword());
  registration.setServerAddress(connectionPanel.getServerAddress());
  registration.setSendKeepAlive(connectionPanel.isSendKeepAlive());
  registration.setGmailNotificationEnabled(connectionPanel.isGmailNotificationsEnabled());
  registration.setGoogleContactsEnabled(connectionPanel.isGoogleContactsEnabled());
  registration.setResource(connectionPanel.getResource());
  String serverPort=connectionPanel.getServerPort();
  if (serverPort != null)   registration.setPort(Integer.parseInt(serverPort));
  String priority=connectionPanel.getPriority();
  if (priority != null)   registration.setPriority(Integer.parseInt(priority));
  registration.setUseIce(iceConfigPanel.isUseIce());
  registration.setAutoDiscoverStun(iceConfigPanel.isAutoDiscoverStun());
  registration.setUseDefaultStunServer(iceConfigPanel.isUseDefaultStunServer());
  registration.getAdditionalStunServers().clear();
  List<StunServerDescriptor> stunServers=iceConfigPanel.getAdditionalStunServers();
  for (  StunServerDescriptor descriptor : stunServers)   registration.addStunServer(descriptor);
  registration.setUseJingleNodes(iceConfigPanel.isUseJingleNodes());
  registration.setAutoDiscoverJingleNodes(iceConfigPanel.isAutoDiscoverJingleNodes());
  registration.getAdditionalJingleNodes().clear();
  List<JingleNodeDescriptor> jingleNodes=iceConfigPanel.getAdditionalJingleNodes();
  for (  JingleNodeDescriptor descriptor : jingleNodes)   registration.addJingleNodes(descriptor);
  registration.setUseUPNP(iceConfigPanel.isUseUPNP());
  return true;
}
