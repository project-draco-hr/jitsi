{
  this.parentSystray=jdicSystray;
  this.provider=provider;
  this.presence=presence;
{
    String text=provider.getAccountID().getUserID();
    if (swing) {
      JMenu menu=new JMenu(text);
      byte[] icBytes=presence.getPresenceStatus().getStatusIcon();
      if (icBytes != null)       menu.setIcon(new ImageIcon(icBytes));
      this.menu=menu;
    }
 else {
      this.menu=new Menu(text);
    }
  }
  Iterator<PresenceStatus> statusIterator=this.presence.getSupportedStatusSet();
  while (statusIterator.hasNext()) {
    PresenceStatus status=statusIterator.next();
    String text=status.getStatusName();
    if (menu instanceof Container) {
      JMenuItem item=new JMenuItem(text);
      byte[] icBytes=status.getStatusIcon();
      if (icBytes != null)       item.setIcon(new ImageIcon(icBytes));
      item.addActionListener(this);
      ((Container)menu).add(item);
    }
 else {
      MenuItem item=new MenuItem(text);
      item.addActionListener(this);
      ((Menu)menu).add(item);
    }
  }
  addSeparator();
  StatusSubMenu.addMenuItem(menu,new StatusMessageMenu(provider,swing).getMenu());
}
