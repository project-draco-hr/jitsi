{
  String firstName=firstNameField.getText();
  String middleName=middleNameField.getText();
  String lastName=lastNameField.getText();
  String gender=genderField.getText();
  String email=emailField.getText();
  String phoneNumber=phoneField.getText();
  Icon avatar=avatarLabel.getIcon();
  Calendar birthDateCalendar=Calendar.getInstance();
  if (birthdayField.getText() != null && birthdayField.getText().length() > 0) {
    try {
      DateFormat dateFormat=DateFormat.getDateInstance(DateFormat.DEFAULT);
      Date birthDate=dateFormat.parse(birthdayField.getText());
      birthDateCalendar.setTime(birthDate);
    }
 catch (    ParseException e2) {
      logger.error("Failed to parse birth date.",e2);
    }
  }
  try {
    FirstNameDetail newFirstNameDetail=new ServerStoredDetails.FirstNameDetail(firstName);
    if (firstNameDetail == null)     accountInfoOpSet.addDetail(newFirstNameDetail);
 else     accountInfoOpSet.replaceDetail(firstNameDetail,newFirstNameDetail);
    LastNameDetail newLastNameDetail=new ServerStoredDetails.LastNameDetail(lastName);
    if (lastNameDetail == null)     accountInfoOpSet.addDetail(newLastNameDetail);
 else     accountInfoOpSet.replaceDetail(lastNameDetail,newLastNameDetail);
    GenderDetail newGenderDetail=new ServerStoredDetails.GenderDetail(gender);
    if (genderDetail == null)     accountInfoOpSet.addDetail(newGenderDetail);
 else     accountInfoOpSet.replaceDetail(genderDetail,newGenderDetail);
    BirthDateDetail newBirthDateDetail=new ServerStoredDetails.BirthDateDetail(birthDateCalendar);
    if (birthDateDetail == null)     accountInfoOpSet.addDetail(newBirthDateDetail);
 else     accountInfoOpSet.replaceDetail(birthDateDetail,newBirthDateDetail);
    EmailAddressDetail newEmailDetail=new ServerStoredDetails.EmailAddressDetail(email);
    if (emailDetail == null)     accountInfoOpSet.addDetail(newEmailDetail);
 else     accountInfoOpSet.replaceDetail(emailDetail,newEmailDetail);
    PhoneNumberDetail newPhoneDetail=new ServerStoredDetails.PhoneNumberDetail(phoneNumber);
    if (phoneDetail == null)     accountInfoOpSet.addDetail(newPhoneDetail);
 else     accountInfoOpSet.replaceDetail(phoneDetail,newPhoneDetail);
    BinaryDetail newAvatarDetail=new ServerStoredDetails.BinaryDetail("Avatar",newAvatarImage);
    if (avatarDetail == null)     accountInfoOpSet.addDetail(newAvatarDetail);
 else     accountInfoOpSet.replaceDetail(avatarDetail,newAvatarDetail);
  }
 catch (  ClassCastException e1) {
    logger.error("Failed to update account details.",e1);
  }
catch (  OperationFailedException e1) {
    logger.error("Failed to update account details.",e1);
  }
}
