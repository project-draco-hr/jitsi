{
  ServiceReference[] uriHandlerRefs;
  try {
    uriHandlerRefs=bundleContext.getServiceReferences(UriHandler.class.getName(),null);
  }
 catch (  InvalidSyntaxException exc) {
    if (logger.isInfoEnabled())     logger.info("An error occurred while retrieving UriHandlers",exc);
    return;
  }
  if (uriHandlerRefs == null) {
    return;
  }
synchronized (uriHandlers) {
    for (    ServiceReference uriHandlerRef : uriHandlerRefs) {
      UriHandler uriHandler=(UriHandler)bundleContext.getService(uriHandlerRef);
      uriHandlers.put(uriHandler.getProtocol(),uriHandler);
    }
  }
}
