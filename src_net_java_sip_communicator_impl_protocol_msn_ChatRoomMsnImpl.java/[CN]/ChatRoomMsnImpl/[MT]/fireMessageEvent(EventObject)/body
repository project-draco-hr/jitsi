{
  Iterator<ChatRoomMessageListener> listeners=null;
synchronized (messageListeners) {
    listeners=new ArrayList<ChatRoomMessageListener>(messageListeners).iterator();
  }
  if (!listeners.hasNext()) {
    messageBuffer.add(evt);
  }
  while (listeners.hasNext()) {
    ChatRoomMessageListener listener=listeners.next();
    if (evt instanceof ChatRoomMessageDeliveredEvent) {
      listener.messageDelivered((ChatRoomMessageDeliveredEvent)evt);
    }
 else     if (evt instanceof ChatRoomMessageReceivedEvent) {
      listener.messageReceived((ChatRoomMessageReceivedEvent)evt);
    }
 else     if (evt instanceof ChatRoomMessageDeliveryFailedEvent) {
      listener.messageDeliveryFailed((ChatRoomMessageDeliveryFailedEvent)evt);
    }
  }
}
