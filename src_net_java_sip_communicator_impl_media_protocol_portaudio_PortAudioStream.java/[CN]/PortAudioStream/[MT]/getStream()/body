{
  if (stream == 0) {
    int deviceCount=PortAudio.Pa_GetDeviceCount();
    int deviceIndex=0;
    for (; deviceIndex < deviceCount; deviceIndex++) {
      long deviceInfo=PortAudio.Pa_GetDeviceInfo(deviceIndex);
      if ((PortAudio.PaDeviceInfo_getMaxInputChannels(deviceInfo) == 2) && (PortAudio.PaDeviceInfo_getMaxOutputChannels(deviceInfo) == 0) && PortAudio.PaDeviceInfo_getName(deviceInfo).contains("Analog"))       break;
    }
    long streamParameters=PortAudio.PaStreamParameters_new(deviceIndex,1,PortAudio.SAMPLE_FORMAT_INT16);
    stream=PortAudio.Pa_OpenStream(streamParameters,0,44100,PortAudio.FRAMES_PER_BUFFER_UNSPECIFIED,PortAudio.STREAM_FLAGS_NO_FLAG,this);
  }
  return stream;
}
