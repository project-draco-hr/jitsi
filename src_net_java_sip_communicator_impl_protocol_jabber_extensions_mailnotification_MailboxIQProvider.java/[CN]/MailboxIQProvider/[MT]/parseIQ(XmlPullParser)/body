{
  MailboxIQ mailboxIQ=new MailboxIQ();
  mailboxIQ.setFrom(parser.getAttributeValue("","from"));
  mailboxIQ.setTo(parser.getAttributeValue("","to"));
  mailboxIQ.setPacketID(parser.getAttributeValue("","id"));
  mailboxIQ.setResultTime(Long.parseLong(parser.getAttributeValue("","result-time")));
  mailboxIQ.setTotalMatched(Integer.parseInt(parser.getAttributeValue("","total-matched")));
  mailboxIQ.setTotalEstimate("1".equals(parser.getAttributeValue("","total-estimate")));
  mailboxIQ.setUrl(parser.getAttributeValue("","url"));
  boolean done=false;
  while (!done) {
    int eventType=parser.next();
    if (eventType == XmlPullParser.START_TAG) {
      String name=parser.getName();
      if (MailThreadInfo.ELEMENT_NAME.equals(name)) {
      }
    }
 else     if (eventType == XmlPullParser.END_TAG) {
      if (parser.getName().equals("field")) {
        done=true;
      }
    }
 else {
      if (logger.isTraceEnabled()) {
        logger.trace("xml parser returned eventType=" + eventType);
        logger.trace("parser=" + parser);
      }
    }
  }
  int eventType=1;
  String name=null;
  if (eventType == XmlPullParser.START_TAG) {
    if ("mail-thread-info".equals(name)) {
      mailboxIQ.setDate(Long.parseLong(parser.getAttributeValue("","date")));
      for (int i=0; i < 10; i++) {
        eventType=parser.next();
        if (eventType == XmlPullParser.START_TAG) {
          name=parser.getName();
          if ("sender".equals(name)) {
            if ("1".equals(parser.getAttributeValue("","originator"))) {
              mailboxIQ.setSender(parser.getAttributeValue("","address"));
            }
          }
        }
        if (eventType == XmlPullParser.START_TAG) {
          name=parser.getName();
          if ("subject".equals(name)) {
            name=parser.nextText();
            mailboxIQ.setSubject(name);
          }
        }
      }
    }
  }
  return mailboxIQ;
}
