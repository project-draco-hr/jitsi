{
  MailboxIQ mailboxIQ=new MailboxIQ();
  mailboxIQ.setResultTime(Long.parseLong(parser.getAttributeValue("","result-time")));
  mailboxIQ.setTotalMatched(Integer.parseInt(parser.getAttributeValue("","total-matched")));
  mailboxIQ.setTotalEstimate("1".equals(parser.getAttributeValue("","total-estimate")));
  mailboxIQ.setUrl(parser.getAttributeValue("","url"));
  int eventType=parser.next();
  while (eventType != XmlPullParser.END_TAG) {
    if (eventType == XmlPullParser.START_TAG) {
      String name=parser.getName();
      if (MailThreadInfo.ELEMENT_NAME.equals(name)) {
        MailThreadInfo thread=MailThreadInfo.parse(parser);
        mailboxIQ.addThread(thread);
      }
    }
 else {
      if (logger.isTraceEnabled()) {
        logger.trace("xml parser returned eventType=" + eventType);
        logger.trace("parser=" + parser.getText());
      }
    }
    eventType=parser.next();
  }
  eventType=1;
  String name=null;
  if (eventType == XmlPullParser.START_TAG) {
    if ("mail-thread-info".equals(name)) {
      mailboxIQ.setDate(Long.parseLong(parser.getAttributeValue("","date")));
      for (int i=0; i < 10; i++) {
        eventType=parser.next();
        if (eventType == XmlPullParser.START_TAG) {
          name=parser.getName();
          if ("sender".equals(name)) {
            if ("1".equals(parser.getAttributeValue("","originator"))) {
            }
          }
        }
        if (eventType == XmlPullParser.START_TAG) {
          name=parser.getName();
          if ("subject".equals(name)) {
            name=parser.nextText();
          }
        }
      }
    }
  }
  return mailboxIQ;
}
