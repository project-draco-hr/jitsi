{
  Point currentMouseLocation=MouseInfo.getPointerInfo().getLocation();
  SwingUtilities.convertPointFromScreen(currentMouseLocation,this);
  int index=this.locationToIndex(currentMouseLocation);
  Object element=getModel().getElementAt(index);
  ExtendedTooltip tip=new ExtendedTooltip();
  if (element instanceof MetaContact) {
    MetaContact metaContact=(MetaContact)element;
    byte[] avatarImage=metaContact.getAvatar();
    if (avatarImage != null && avatarImage.length > 0)     tip.setImage(new ImageIcon(avatarImage));
    tip.setTitle(metaContact.getDisplayName());
    Iterator<Contact> i=metaContact.getContacts();
    while (i.hasNext()) {
      Contact protocolContact=i.next();
      Image protocolStatusIcon=ImageLoader.getBytesInImage(protocolContact.getPresenceStatus().getStatusIcon());
      String contactAddress=protocolContact.getAddress();
      tip.addLine(new ImageIcon(protocolStatusIcon),contactAddress);
    }
  }
 else   if (element instanceof MetaContactGroup) {
    MetaContactGroup metaGroup=(MetaContactGroup)element;
    tip.setTitle(metaGroup.getGroupName());
  }
 else   if (element instanceof ChatContact) {
    ChatContact chatContact=(ChatContact)element;
    ImageIcon avatarImage=chatContact.getAvatar();
    if (avatarImage != null)     tip.setImage(avatarImage);
    tip.setTitle(chatContact.getName());
  }
  tip.setComponent(this);
  return tip;
}
