{
  PresenceStatus status=(PresenceStatus)presenceStatus;
  OperationSetPresence presence=mainFrame.getProtocolPresenceOpSet(protocolProvider);
  logger.trace("Update status for provider: " + protocolProvider.getAccountID().getAccountAddress() + ". The new status will be: "+ status.getStatusName());
  if (connecting.isRunning()) {
    logger.trace("Stop the connecting icon for provider: " + protocolProvider.getAccountID().getAccountAddress());
    this.connecting.stop();
  }
  this.setSelectedStatus(status);
  if (protocolProvider.isRegistered() && !presence.getPresenceStatus().equals(status)) {
    new PublishPresenceStatusThread(status).start();
  }
}
