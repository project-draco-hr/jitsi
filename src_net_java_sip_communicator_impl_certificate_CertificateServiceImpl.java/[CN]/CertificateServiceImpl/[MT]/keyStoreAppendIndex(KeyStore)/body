{
  Field keyStoreSpiField=ks.getClass().getDeclaredField("keyStoreSpi");
  keyStoreSpiField.setAccessible(true);
  KeyStoreSpi keyStoreSpi=(KeyStoreSpi)keyStoreSpiField.get(ks);
  if ("sun.security.mscapi.KeyStore$ROOT".equals(keyStoreSpi.getClass().getName())) {
    Field entriesField=keyStoreSpi.getClass().getEnclosingClass().getDeclaredField("entries");
    entriesField.setAccessible(true);
    Collection<?> entries=(Collection<?>)entriesField.get(keyStoreSpi);
    int i=0;
    for (    Object entry : entries) {
      Field aliasField=entry.getClass().getDeclaredField("alias");
      aliasField.setAccessible(true);
      String alias=(String)aliasField.get(entry);
      aliasField.set(entry,alias.concat("_").concat(Integer.toString(i++)));
    }
    return i;
  }
  return -1;
}
