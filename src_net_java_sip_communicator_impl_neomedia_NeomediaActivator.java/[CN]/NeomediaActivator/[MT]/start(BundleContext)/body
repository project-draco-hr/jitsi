{
  if (logger.isDebugEnabled())   logger.debug("Started.");
  NeomediaActivator.bundleContext=bundleContext;
  mediaServiceImpl=new MediaServiceImpl();
  mediaServiceImpl.start();
  mediaServiceRegistration=bundleContext.registerService(MediaService.class.getName(),mediaServiceImpl,null);
  if (logger.isDebugEnabled())   logger.debug("Media Service ... [REGISTERED]");
  bundleContext.registerService(ConfigurationForm.class.getName(),new LazyConfigurationForm("net.java.sip.communicator.impl.neomedia" + ".AudioConfigurationPanel",getClass().getClassLoader(),"plugin.mediaconfig.AUDIO_ICON","impl.neomedia.configform.AUDIO",3),null);
  bundleContext.registerService(ConfigurationForm.class.getName(),new LazyConfigurationForm("net.java.sip.communicator.impl.neomedia" + ".VideoConfigurationPanel",getClass().getClassLoader(),"plugin.mediaconfig.VIDEO_ICON","impl.neomedia.configform.VIDEO",4),null);
  GatherEntropy entropy=new GatherEntropy(mediaServiceImpl.getDeviceConfiguration());
  entropy.setEntropy();
  System.setProperty("gov.nist.core.STRIP_ADDR_SCOPES","true");
  AudioNotifierServiceImpl audioNotifier=new AudioNotifierServiceImpl(mediaServiceImpl.getDeviceConfiguration());
  audioNotifier.setMute(!getConfigurationService().getBoolean("net.java.sip.communicator.impl.sound.isSoundEnabled",true));
  getBundleContext().registerService(AudioNotifierService.class.getName(),audioNotifier,null);
  if (logger.isInfoEnabled())   logger.info("Audio Notifier Service ...[REGISTERED]");
}
