{
  ModeParser parser=new ModeParser(msg);
  for (  Mode mode : parser.getModes()) {
switch (mode.getMode()) {
case 'O':
      ChatRoomMember owner=this.chatroom.getChatRoomMember(mode.getParams()[0]);
    if (mode.isAdded()) {
      this.chatroom.fireMemberRoleEvent(owner,ChatRoomMemberRole.OWNER);
    }
 else {
      this.chatroom.fireMemberRoleEvent(owner,ChatRoomMemberRole.SILENT_MEMBER);
    }
  break;
case 'o':
ChatRoomMember op=this.chatroom.getChatRoomMember(mode.getParams()[0]);
if (mode.isAdded()) {
this.chatroom.fireMemberRoleEvent(op,ChatRoomMemberRole.ADMINISTRATOR);
}
 else {
this.chatroom.fireMemberRoleEvent(op,ChatRoomMemberRole.SILENT_MEMBER);
}
break;
case 'v':
ChatRoomMember voice=this.chatroom.getChatRoomMember(mode.getParams()[0]);
if (mode.isAdded()) {
this.chatroom.fireMemberRoleEvent(voice,ChatRoomMemberRole.MEMBER);
}
 else {
this.chatroom.fireMemberRoleEvent(voice,ChatRoomMemberRole.SILENT_MEMBER);
}
break;
default :
System.out.println("Unsupported mode '" + mode.getMode() + "' (from modestring '"+ msg.getModeStr()+ "')");
break;
}
}
}
