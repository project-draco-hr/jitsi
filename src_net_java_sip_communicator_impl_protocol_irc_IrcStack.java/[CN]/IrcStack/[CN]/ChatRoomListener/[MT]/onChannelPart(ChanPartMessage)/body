{
  if (!isThisChatRoom(msg.getChannelName()))   return;
  if (isMe(msg.getSource())) {
    IrcStack.this.irc.deleteListener(this);
    IrcStack.this.joined.remove(this.chatroom);
    IrcStack.this.provider.getMUC().fireLocalUserPresenceEvent(this.chatroom,LocalUserChatRoomPresenceChangeEvent.LOCAL_USER_LEFT,null);
  }
 else {
    String user=msg.getSource().getNick();
    ChatRoomMember member=this.chatroom.getChatRoomMember(user);
    try {
      this.chatroom.fireMemberPresenceEvent(member,null,ChatRoomMemberPresenceChangeEvent.MEMBER_LEFT,msg.getPartMsg());
    }
 catch (    NullPointerException e) {
      LOGGER.warn("This should not have happened. Please report this " + "as it is a bug.",e);
    }
  }
}
