{
  final IRCTopic topic=channel.getTopic();
  chatRoom.updateSubject(topic.getValue());
  OperationSetPersistentPresenceIrcImpl opSetPersistentPresence=this.provider.getPersistentPresence();
  ContactGroupIrcImpl nonPersistentGroup=opSetPersistentPresence.getNonPersistentGroup();
  for (  IRCUser user : channel.getUsers()) {
    ChatRoomMemberRole role=ChatRoomMemberRole.SILENT_MEMBER;
    for (    IRCUserStatus status : channel.getStatusesForUser(user)) {
      role=convertMemberMode(status.getChanModeType().charValue());
    }
    if (this.getNick().equals(user.getNick())) {
      chatRoom.prepUserRole(role);
    }
    ChatRoomMemberIrcImpl member=new ChatRoomMemberIrcImpl(this.provider,chatRoom,user.getNick(),role);
    chatRoom.addChatRoomMember(member.getContactAddress(),member);
  }
}
