{
  if (this.connectionState == null && this.irc == null)   return;
synchronized (this.joined) {
    for (    ChatRoomIrcImpl channel : this.joined.values()) {
      if (channel == null) {
        continue;
      }
      leave(channel);
    }
  }
synchronized (this.irc) {
    try {
      this.irc.disconnect();
    }
 catch (    RuntimeException e) {
      LOGGER.debug("exception occurred while disconnecting",e);
    }
    this.irc=null;
    this.connectionState=null;
  }
  this.provider.setCurrentRegistrationState(RegistrationState.UNREGISTERED);
}
