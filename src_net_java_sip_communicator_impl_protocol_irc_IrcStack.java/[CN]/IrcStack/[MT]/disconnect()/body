{
  if (this.connectionState == null && this.session.get() == null)   return;
synchronized (this.joined) {
    for (    ChatRoomIrcImpl channel : this.joined.values()) {
      if (channel == null) {
        continue;
      }
      leave(channel);
    }
  }
synchronized (this.session) {
    final IRCApi irc=this.session.get();
    try {
      irc.disconnect();
    }
 catch (    RuntimeException e) {
      LOGGER.debug("exception occurred while disconnecting",e);
    }
    this.session.set(null);
    this.connectionState=null;
  }
  this.provider.setCurrentRegistrationState(RegistrationState.UNREGISTERED);
}
