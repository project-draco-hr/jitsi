{
  if (this.connectionState == null && this.irc == null)   return;
synchronized (this.joined) {
    for (    ChatRoomIrcImpl channel : this.joined.values()) {
      leave(channel);
    }
  }
synchronized (this.irc) {
    this.irc.disconnect();
    this.irc=null;
    this.connectionState=null;
  }
  this.provider.setCurrentRegistrationState(RegistrationState.UNREGISTERED);
}
