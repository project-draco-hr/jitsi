{
  if (this.connectionState != null) {
    for (    String channel : this.joined.keySet()) {
      leave(channel);
    }
    this.joined.clear();
    this.irc.disconnect();
    this.irc=null;
    this.connectionState=null;
    this.provider.setCurrentRegistrationState(RegistrationState.UNREGISTERED);
  }
}
