{
  LOGGER.trace("Start retrieve server chat room list.");
synchronized (this.channellist) {
    if (this.channellist.instance == null) {
      Result<List<String>,Exception> listSignal=new Result<List<String>,Exception>(new LinkedList<String>());
synchronized (listSignal) {
        try {
          this.irc.addListener(new ChannelListListener(this.irc,listSignal));
          this.irc.rawMessage("LIST");
          while (!listSignal.isDone()) {
            LOGGER.trace("Start waiting for list ...");
            listSignal.wait();
          }
          LOGGER.trace("Done waiting for list.");
        }
 catch (        InterruptedException e) {
          LOGGER.warn("INTERRUPTED while waiting for list.",e);
        }
      }
      this.channellist.instance=listSignal.getValue();
    }
    LOGGER.trace("Finished retrieve server chat room list.");
    return Collections.unmodifiableList(this.channellist.instance);
  }
}
