{
  if (!isConnected()) {
    throw new IllegalStateException("Not connected to an IRC server.");
  }
  final String target=contact.getAddress();
  try {
    final IRCApi irc=this.session.get();
    irc.message(target,message.getContent());
    IrcStack.this.provider.getBasicInstantMessaging().fireMessageDelivered(message,contact);
    LOGGER.trace("Message delivered to server successfully.");
  }
 catch (  RuntimeException e) {
    IrcStack.this.provider.getBasicInstantMessaging().fireMessageDeliveryFailed(message,contact,MessageDeliveryFailedEvent.NETWORK_FAILURE);
    LOGGER.trace("Failed to deliver message: " + e.getMessage(),e);
  }
}
