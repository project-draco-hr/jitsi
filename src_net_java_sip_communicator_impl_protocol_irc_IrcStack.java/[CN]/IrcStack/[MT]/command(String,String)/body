{
  final String target;
  final String command;
  if (message.toLowerCase().startsWith("/msg ")) {
    String part=message.substring(5);
    int endOfNick=part.indexOf(' ');
    if (endOfNick == -1) {
      throw new IllegalArgumentException("Invalid private message " + "format. Message was not sent.");
    }
    target=part.substring(0,endOfNick);
    command=part.substring(endOfNick + 1);
  }
 else {
    target=source;
    command=message;
  }
  final IRCApi irc=this.session.get();
  irc.message(target,command);
}
