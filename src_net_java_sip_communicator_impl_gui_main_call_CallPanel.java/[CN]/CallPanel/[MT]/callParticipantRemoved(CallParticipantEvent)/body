{
  if (evt.getSourceCall() == call) {
    CallParticipant participant=evt.getSourceCallParticipant();
    CallParticipantPanel participantPanel=(CallParticipantPanel)participantsPanels.get(participant);
    if (participantPanel != null) {
      CallParticipantState state=participant.getState();
      participantPanel.setState(state.getStateString());
      participantPanel.stopCallTimer();
      GuiCallParticipantRecord participantRecord=new GuiCallParticipantRecord(participantPanel.getName(),participantPanel.getCallType(),participantPanel.getStartTime(),participantPanel.getEndTime());
      callManager.getMainFrame().getCallList().addItem(participantRecord,1);
      this.participantsPanels.remove(participant);
      if (participantsPanels.size() != 0) {
        Timer timer=new Timer(5000,new RemoveParticipantPanelListener(participantPanel));
        timer.setRepeats(false);
        timer.start();
      }
      this.revalidate();
      this.repaint();
    }
  }
}
