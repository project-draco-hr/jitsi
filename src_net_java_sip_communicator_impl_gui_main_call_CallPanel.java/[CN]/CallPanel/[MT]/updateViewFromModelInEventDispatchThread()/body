{
  if (disposed)   return;
  Dimension oldPreferredSize=getPreferredSize();
  doUpdateViewFromModelInEventDispatchThread();
  Dimension newPreferredSize=getPreferredSize();
  if ((newPreferredSize != null) && ((newPreferredSize.height > getHeight()) || (newPreferredSize.width > getWidth()))) {
    int oldPreferredHeight, oldPreferredWidth;
    if (oldPreferredSize == null) {
      oldPreferredHeight=0;
      oldPreferredWidth=0;
    }
 else {
      oldPreferredHeight=oldPreferredSize.height;
      oldPreferredWidth=oldPreferredSize.width;
    }
    if ((newPreferredSize.height != oldPreferredHeight) || (newPreferredSize.width != oldPreferredWidth)) {
      ensureSize(this,newPreferredSize.width,newPreferredSize.height);
    }
  }
}
