{
  if (logger.isTraceEnabled())   logger.trace("Desktop sharing enabled: " + isSelected);
  if (isSelected && !desktopSharingButton.isSelected())   desktopSharingButton.setSelected(true);
 else   if (!isSelected && desktopSharingButton.isSelected())   desktopSharingButton.setSelected(false);
  if (callPanel instanceof OneToOneCallPanel) {
    OneToOneCallPanel oneToOneCallPanel=(OneToOneCallPanel)callPanel;
    if (isSelected && (oneToOneCallPanel.getCall().getProtocolProvider().getOperationSet(OperationSetDesktopSharingServer.class) != null)) {
      oneToOneCallPanel.addDesktopSharingComponents();
    }
 else     oneToOneCallPanel.removeDesktopSharingComponents();
  }
}
