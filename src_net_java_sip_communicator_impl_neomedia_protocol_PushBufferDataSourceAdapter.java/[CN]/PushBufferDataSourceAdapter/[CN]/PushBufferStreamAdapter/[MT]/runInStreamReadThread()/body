{
  boolean bufferIsWritten;
synchronized (buffer) {
    try {
      stream.read(buffer);
      this.bufferIsWritten=!buffer.isDiscard();
      streamReadException=null;
    }
 catch (    IOException ie) {
      this.bufferIsWritten=false;
      streamReadException=ie;
    }
    bufferIsWritten=this.bufferIsWritten;
  }
  if (bufferIsWritten) {
    BufferTransferHandler transferHandler=this.transferHandler;
    if (transferHandler != null)     transferHandler.transferData(this);
  }
}
