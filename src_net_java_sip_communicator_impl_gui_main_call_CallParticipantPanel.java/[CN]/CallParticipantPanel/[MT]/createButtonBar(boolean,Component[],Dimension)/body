{
  Container buttonBar=heavyweight ? new Container() : new TransparentPanel();
  buttonBar.setLayout(new GridLayout(1,0));
  for (int buttonIndex=0; buttonIndex < buttons.length; buttonIndex++) {
    Component button=buttons[buttonIndex];
    if (button != null) {
      if ((button instanceof JButton) || (button instanceof JToggleButton)) {
        button.setPreferredSize(preferredButtonSize);
      }
      buttonBar.add(button);
    }
  }
  return buttonBar;
}
