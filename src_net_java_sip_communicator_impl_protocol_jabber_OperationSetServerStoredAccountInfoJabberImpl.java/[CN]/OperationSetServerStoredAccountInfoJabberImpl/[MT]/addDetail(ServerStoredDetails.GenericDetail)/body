{
  assertConnected();
  Iterator<GenericDetail> iter=getDetails(detail.getClass());
  int currentDetailsSize=0;
  while (iter.hasNext()) {
    currentDetailsSize++;
  }
  if (currentDetailsSize >= getMaxDetailInstances(detail.getClass())) {
    throw new ArrayIndexOutOfBoundsException("Max count for this detail is already reached");
  }
  if (detail instanceof ImageDetail) {
    this.uploadImageDetail(ServerStoredDetailsChangeEvent.DETAIL_ADDED,null,detail);
  }
}
