{
  String wizardClassName=null;
  String prefix="net.java.sip.communicator.impl.gui.accounts";
  List accounts=this.configService.getPropertyNamesByPrefix(prefix,true);
  Iterator accountsIter=accounts.iterator();
  while (accountsIter.hasNext()) {
    String accountRootPropName=(String)accountsIter.next();
    String accountUID=configService.getString(accountRootPropName);
    if (accountUID.equals(protocolProvider.getAccountID().getAccountUniqueID())) {
      wizardClassName=configService.getString(accountRootPropName + ".wizard");
      break;
    }
  }
  AccountRegistrationWizard wizard=getWizardFromClassName(wizardClassName);
  this.registerWizardPage(summaryPage.getIdentifier(),summaryPage);
  this.setCurrentWizard(wizard);
  Iterator i=wizard.getPages();
  Object identifier=null;
  boolean firstPage=true;
  while (i.hasNext()) {
    WizardPage page=(WizardPage)i.next();
    identifier=page.getIdentifier();
    this.registerWizardPage(identifier,page);
    if (firstPage) {
      this.setCurrentPage(identifier);
      firstPage=false;
    }
  }
  wizard.loadAccount(protocolProvider);
  this.getSummaryPage().setPreviousPageIdentifier(identifier);
  try {
    this.setWizzardIcon(ImageIO.read(new ByteArrayInputStream(wizard.getPageImage())));
  }
 catch (  IOException e1) {
    e1.printStackTrace();
  }
}
