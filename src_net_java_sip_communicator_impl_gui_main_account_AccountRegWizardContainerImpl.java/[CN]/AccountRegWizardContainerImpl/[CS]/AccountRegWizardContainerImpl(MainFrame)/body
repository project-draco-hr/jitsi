{
  super(mainFrame);
  this.setTitle(Messages.getI18NString("accountRegistrationWizard").getText());
  this.defaultPage=new AccountRegFirstPage(this);
  this.summaryPage=new AccountRegSummaryPage(this);
  this.registerWizardPage(defaultPage.getIdentifier(),defaultPage);
  this.registerWizardPage(summaryPage.getIdentifier(),summaryPage);
  ServiceReference[] accountWizardRefs=null;
  try {
    accountWizardRefs=GuiActivator.bundleContext.getServiceReferences(AccountRegistrationWizard.class.getName(),null);
  }
 catch (  InvalidSyntaxException ex) {
    logger.error("Error while retrieving service refs",ex);
    return;
  }
  if (accountWizardRefs != null) {
    logger.debug("Found " + accountWizardRefs.length + " already installed providers.");
    for (int i=0; i < accountWizardRefs.length; i++) {
      ServiceReference serRef=accountWizardRefs[i];
      String protocolName=(String)serRef.getProperty(ProtocolProviderFactory.PROTOCOL);
      AccountRegistrationWizard wizard=(AccountRegistrationWizard)GuiActivator.bundleContext.getService(serRef);
      this.addAccountRegistrationWizard(protocolName,wizard);
    }
  }
  GuiActivator.bundleContext.addServiceListener(this);
}
