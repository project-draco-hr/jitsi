{
  this.mainFrame=mainFrame;
  if (!ConfigurationManager.isWindowDecorated()) {
    this.setUndecorated(true);
  }
  this.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);
  menusPanel=new MenusPanel(this);
  if (ConfigurationManager.isMultiChatWindowEnabled()) {
    chatTabbedPane=new SIPCommTabbedPane(true,false);
    chatTabbedPane.addCloseListener(new CloseListener(){
      public void closeOperation(      MouseEvent e){
        int tabIndex=chatTabbedPane.getOverTabIndex();
        ChatPanel chatPanel=(ChatPanel)chatTabbedPane.getComponentAt(tabIndex);
        ChatWindow.this.mainFrame.getChatWindowManager().closeChat(chatPanel);
      }
    }
);
    chatTabbedPane.addChangeListener(new ChangeListener(){
      public void stateChanged(      ChangeEvent e){
        int tabIndex=chatTabbedPane.getSelectedIndex();
        if (tabIndex == -1)         return;
        ChatPanel chatPanel=(ChatPanel)chatTabbedPane.getComponentAt(tabIndex);
        fireChatChangeEvent(chatPanel);
      }
    }
);
  }
  this.setSizeAndLocation();
  JPanel northPanel=new JPanel(new BorderLayout());
  northPanel.add(new LogoBar(),BorderLayout.NORTH);
  northPanel.add(menusPanel,BorderLayout.CENTER);
  this.mainPanel.add(northPanel,BorderLayout.NORTH);
  this.getContentPane().add(mainPanel,BorderLayout.CENTER);
  this.getContentPane().add(statusBarPanel,BorderLayout.SOUTH);
  this.initPluginComponents();
  this.setKeybindingInput(KeybindingSet.Category.CHAT);
  this.addKeybindingAction("chat-nextTab",new ForwordTabAction());
  this.addKeybindingAction("chat-previousTab",new BackwordTabAction());
  this.addKeybindingAction("chat-copy",new CopyAction());
  this.addKeybindingAction("chat-paste",new PasteAction());
  this.addKeybindingAction("chat-openSmilies",new OpenSmileyAction());
  this.addKeybindingAction("chat-openHistory",new OpenHistoryAction());
  this.addKeybindingAction("chat-close",new CloseAction());
  this.addWindowListener(new ChatWindowAdapter());
}
