{
  try {
    History history=this.getHistory(source,destination);
    writeMessage(history,direction,message,messageTimestamp);
  }
 catch (  IOException e) {
    logger.error("Could not add message to history",e);
  }
}
