{
  String userName=userCredentials.getUserName();
  char[] password=userCredentials.getPassword();
  ImageIcon icon=ImageLoader.getAuthenticationWindowIcon(provider);
  AuthenticationWindow loginWindow=new AuthenticationWindow(userName,password,realm,isUserNameEditable,icon);
  loginWindow.pack();
  loginWindow.setVisible(true);
  if (!loginWindow.isCanceled()) {
    userCredentials.setUserName(loginWindow.getUserName());
    userCredentials.setPassword(loginWindow.getPassword());
    userCredentials.setPasswordPersistent(loginWindow.isRememberPassword());
  }
 else {
    userCredentials.setUserName(null);
    userCredentials=null;
  }
  return userCredentials;
}
