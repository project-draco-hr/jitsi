{
  this.mainFrame=mainFrame;
  this.protocolProvider=protocolProvider;
  this.statusIterator=this.mainFrame.getProtocolPresence(protocolProvider).getSupportedStatusSet();
  this.setToolTipText(protocolProvider.getAccountID().getUserID());
  while (statusIterator.hasNext()) {
    PresenceStatus status=(PresenceStatus)statusIterator.next();
    int connectivity=status.getStatus();
    if (connectivity < 1) {
      this.offlineStatus=status;
    }
 else     if ((onlineStatus != null && (onlineStatus.getStatus() < connectivity)) || (onlineStatus == null && (connectivity > 50 && connectivity < 80))) {
      this.onlineStatus=status;
    }
    this.addItem(status.getStatusName(),new ImageIcon(ImageLoader.getBytesInImage(status.getStatusIcon())),new ItemActionListener());
  }
}
