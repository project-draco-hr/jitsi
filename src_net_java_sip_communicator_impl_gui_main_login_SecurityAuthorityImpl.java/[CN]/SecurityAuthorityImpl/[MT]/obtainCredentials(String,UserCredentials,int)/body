{
  String errorMessage=null;
  if (reasonCode == WRONG_PASSWORD || reasonCode == WRONG_USERNAME) {
    errorMessage=GuiActivator.getResources().getI18NString("service.gui.AUTHENTICATION_FAILED",new String[]{userCredentials.getUserName(),realm});
  }
  AuthenticationWindow loginWindow=null;
  if (errorMessage == null)   loginWindow=new AuthenticationWindow(mainFrame,protocolProvider,realm,userCredentials,isUserNameEditable);
 else   loginWindow=new AuthenticationWindow(mainFrame,protocolProvider,realm,userCredentials,isUserNameEditable,errorMessage);
  loginWindow.pack();
  loginWindow.setVisible(true);
  return userCredentials;
}
