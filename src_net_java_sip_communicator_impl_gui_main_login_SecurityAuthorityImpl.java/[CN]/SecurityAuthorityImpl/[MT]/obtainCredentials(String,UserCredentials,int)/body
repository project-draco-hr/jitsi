{
  String errorMessage=null;
  if (reasonCode == WRONG_PASSWORD) {
    errorMessage=Messages.getI18NString("authenticationFailed",new String[]{userCredentials.getUserName(),realm}).getText();
  }
 else   if (reasonCode == WRONG_USERNAME) {
    errorMessage=Messages.getI18NString("authenticationFailed",new String[]{userCredentials.getUserName(),realm}).getText();
  }
  AuthenticationWindow loginWindow=null;
  if (errorMessage == null)   loginWindow=new AuthenticationWindow(mainFrame,protocolProvider,realm,userCredentials,isUserNameEditable);
 else   loginWindow=new AuthenticationWindow(mainFrame,protocolProvider,realm,userCredentials,isUserNameEditable,errorMessage);
  loginWindow.pack();
  loginWindow.setVisible(true);
  return userCredentials;
}
