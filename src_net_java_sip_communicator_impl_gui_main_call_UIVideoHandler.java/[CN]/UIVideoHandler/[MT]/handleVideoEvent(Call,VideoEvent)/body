{
  if (event != null && logger.isTraceEnabled()) {
    logger.trace("Received UI video event with origin " + event.getOrigin() + " and type "+ event.getType());
  }
  if ((event != null) && !event.isConsumed()) {
    int origin=event.getOrigin();
    Component video=event.getVisualComponent();
synchronized (videoContainers) {
switch (event.getType()) {
case VideoEvent.VIDEO_ADDED:
switch (origin) {
case VideoEvent.LOCAL:
          localVideo=video;
        closeButton=new CloseButton();
      break;
case VideoEvent.REMOTE:
    remoteVideo=video;
  break;
}
addMouseListeners(origin);
event.consume();
break;
case VideoEvent.VIDEO_REMOVED:
switch (origin) {
case VideoEvent.LOCAL:
if (localVideo == video) {
localVideo=null;
closeButton=null;
}
break;
case VideoEvent.REMOTE:
if (remoteVideo == video) remoteVideo=null;
break;
}
break;
}
}
}
if (!SwingUtilities.isEventDispatchThread()) {
SwingUtilities.invokeLater(new Runnable(){
public void run(){
handleVideoEvent(call,event);
}
}
);
return;
}
synchronized (videoContainers) {
int videoContainerCount;
if ((videoTelephony != null) && ((videoContainerCount=videoContainers.size()) > 0)) {
Container videoContainer=videoContainers.get(videoContainerCount - 1);
handleVideoEvent(call,event,videoContainer);
}
}
}
