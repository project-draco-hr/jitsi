{
  this.remove(callButton);
  this.remove(callVideoButton);
  this.remove(desktopSharingButton);
  this.remove(chatButton);
  if (!isSelected)   return;
  int statusMessageLabelHeight=0;
  if (displayDetailsLabel.getText().length() > 0)   statusMessageLabelHeight=20;
 else   statusMessageLabelHeight=15;
  UIContactDetail imContact=null;
  if (uiContact.getDescriptor() instanceof MetaContact)   imContact=uiContact.getDefaultContactDetail(OperationSetBasicInstantMessaging.class);
  if (imContact != null) {
    constraints.anchor=GridBagConstraints.WEST;
    constraints.fill=GridBagConstraints.NONE;
    constraints.gridx=1;
    constraints.gridy=2;
    constraints.gridwidth=1;
    constraints.gridheight=1;
    constraints.weightx=0f;
    constraints.weighty=0f;
    this.chatButton.setBorder(null);
    this.add(chatButton,constraints);
    int x=statusLabel.getWidth();
    chatButton.setBounds(x,nameLabel.getHeight() + statusMessageLabelHeight,28,28);
  }
  UIContactDetail telephonyContact=uiContact.getDefaultContactDetail(OperationSetBasicTelephony.class);
  if (telephonyContact != null || uiContact.getDescriptor() instanceof SourceContact) {
    constraints.anchor=GridBagConstraints.WEST;
    constraints.fill=GridBagConstraints.NONE;
    constraints.gridx=2;
    constraints.gridy=2;
    constraints.gridwidth=1;
    constraints.gridheight=1;
    constraints.weightx=0f;
    constraints.weighty=0f;
    this.callButton.setBorder(null);
    this.add(callButton,constraints);
    int x=statusLabel.getWidth();
    if (imContact != null)     x+=callButton.getWidth();
    callButton.setBounds(x,nameLabel.getHeight() + statusMessageLabelHeight,28,28);
    callButton.setEnabled(telephonyContact != null);
  }
  UIContactDetail videoContact=uiContact.getDefaultContactDetail(OperationSetVideoTelephony.class);
  if (videoContact != null) {
    constraints.anchor=GridBagConstraints.WEST;
    constraints.fill=GridBagConstraints.NONE;
    constraints.gridx=3;
    constraints.gridy=2;
    constraints.gridwidth=1;
    constraints.gridheight=1;
    constraints.weightx=0f;
    constraints.weighty=0f;
    this.callVideoButton.setBorder(null);
    this.add(callVideoButton,constraints);
    int x=statusLabel.getWidth();
    if (imContact != null)     x+=chatButton.getWidth();
    if (telephonyContact != null)     x+=callButton.getWidth();
    callVideoButton.setBounds(x,nameLabel.getHeight() + statusMessageLabelHeight,28,28);
  }
  UIContactDetail desktopContact=uiContact.getDefaultContactDetail(OperationSetDesktopSharingServer.class);
  if (desktopContact != null) {
    constraints.anchor=GridBagConstraints.WEST;
    constraints.fill=GridBagConstraints.NONE;
    constraints.gridx=4;
    constraints.gridy=2;
    constraints.gridwidth=1;
    constraints.gridheight=1;
    constraints.weightx=0f;
    constraints.weighty=0f;
    this.desktopSharingButton.setBorder(null);
    this.add(desktopSharingButton,constraints);
    int x=statusLabel.getWidth();
    if (imContact != null)     x+=chatButton.getWidth();
    if (telephonyContact != null)     x+=callButton.getWidth();
    if (videoContact != null)     x+=callVideoButton.getWidth();
    desktopSharingButton.setBounds(x,nameLabel.getHeight() + statusMessageLabelHeight,28,28);
  }
  this.setBounds(0,0,tree.getWidth(),getPreferredSize().height);
}
