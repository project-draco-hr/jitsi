{
  Message msg=evt.getSourceMessage();
  Hashtable waitToBeDelivered=this.mainFrame.getWaitToBeDeliveredMsgs();
  String msgUID=msg.getMessageUID();
  if (waitToBeDelivered.containsKey(msgUID)) {
    ChatPanel chatPanel=(ChatPanel)waitToBeDelivered.get(msgUID);
    JEditorPane messagePane=chatPanel.getWriteMessagePanel().getEditorPane();
    Calendar calendar=Calendar.getInstance();
    calendar.setTime(evt.getTimestamp());
    ProtocolProviderService protocolProvider=evt.getDestinationContact().getProtocolProvider();
    chatPanel.getConversationPanel().processMessage(this.mainFrame.getDefaultAccount(protocolProvider),calendar,ChatMessage.OUTGOING_MESSAGE,msg.getContent());
    messagePane.setText("");
    messagePane.requestFocus();
  }
}
