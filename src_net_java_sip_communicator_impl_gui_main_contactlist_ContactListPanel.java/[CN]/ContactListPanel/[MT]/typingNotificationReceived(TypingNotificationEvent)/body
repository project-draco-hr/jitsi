{
  if (typingTimer.isRunning())   typingTimer.stop();
  String notificationMsg="";
  MetaContact metaContact=mainFrame.getContactList().findMetaContactByContact(evt.getSourceContact());
  String contactName=metaContact.getDisplayName() + " ";
  if (contactName.equals("")) {
    contactName=Messages.getI18NString("unknown").getText() + " ";
  }
  int typingState=evt.getTypingState();
  if (typingState == OperationSetTypingNotifications.STATE_TYPING) {
    notificationMsg=Messages.getI18NString("contactTyping",new String[]{contactName}).getText();
    typingTimer.setMetaContact(metaContact);
    typingTimer.start();
    if (!chatWindowManager.isChatOpenedForContact(metaContact)) {
      NotificationManager.fireNotification(NotificationManager.PROACTIVE_NOTIFICATION,contactName.trim(),"is writing a message");
      return;
    }
  }
 else   if (typingState == OperationSetTypingNotifications.STATE_PAUSED) {
    notificationMsg=Messages.getI18NString("contactPausedTyping",new String[]{contactName}).getText();
    typingTimer.setMetaContact(metaContact);
    typingTimer.start();
  }
 else   if (typingState == OperationSetTypingNotifications.STATE_STOPPED) {
    notificationMsg="";
  }
 else   if (typingState == OperationSetTypingNotifications.STATE_STALE) {
    notificationMsg=Messages.getI18NString("contactTypingStateStale").getText();
  }
 else   if (typingState == OperationSetTypingNotifications.STATE_UNKNOWN) {
  }
  this.setChatNotificationMsg(metaContact,notificationMsg);
}
