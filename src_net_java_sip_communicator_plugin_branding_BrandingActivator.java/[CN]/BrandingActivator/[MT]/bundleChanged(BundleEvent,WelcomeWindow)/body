{
  if ((welcomeWindow != null) && welcomeWindow.isShowing() && (evt.getType() == BundleEvent.STARTED)) {
    Object bundleName=evt.getBundle().getHeaders().get("Bundle-Name");
    welcomeWindow.setBundle((bundleName == null) ? null : bundleName.toString());
  }
  ServiceReference uiServiceRef=bundleContext.getServiceReference(UIService.class.getName());
  if ((uiServiceRef != null) && (Bundle.ACTIVE == uiServiceRef.getBundle().getState())) {
    registerMenuEntry(uiServiceRef);
    if (welcomeWindow != null)     welcomeWindow.close();
    return false;
  }
  return true;
}
