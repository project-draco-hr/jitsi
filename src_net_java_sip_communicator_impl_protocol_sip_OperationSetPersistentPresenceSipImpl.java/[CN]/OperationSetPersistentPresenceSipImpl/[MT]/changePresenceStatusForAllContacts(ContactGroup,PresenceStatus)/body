{
  Iterator childContacts=parent.contacts();
  while (childContacts.hasNext()) {
    ContactSipImpl contact=(ContactSipImpl)childContacts.next();
    PresenceStatus oldStatus=contact.getPresenceStatus();
    contact.setPresenceStatus(newStatus.isOnline() ? SipStatusEnum.ONLINE : SipStatusEnum.OFFLINE);
    fireContactPresenceStatusChangeEvent(contact,parent,oldStatus);
  }
  Iterator subgroups=parent.subgroups();
  while (subgroups.hasNext()) {
    ContactGroup subgroup=(ContactGroup)subgroups.next();
    changePresenceStatusForAllContacts(subgroup,newStatus);
  }
}
