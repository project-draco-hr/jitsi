{
  isFiltering=true;
  if (currentFilter == null || !currentFilter.equals(filter))   this.currentFilter=filter;
  tempTreeModel=new ContactListTreeModel();
synchronized (filterLock) {
    treeModel.clearDependencies();
    currentFilter.applyFilter(tempTreeModel);
    treeModel=tempTreeModel;
  }
  if (!isFiltering) {
    return (treeModel.getChildCount(treeModel.getRoot()) > 0);
  }
  SwingUtilities.invokeLater(new Runnable(){
    public void run(){
      setTreeModel(treeModel);
      treeModel.reload();
      expandAllRows();
      revalidate();
      repaint();
    }
  }
);
  isFiltering=false;
  boolean hasResults=false;
  if (tempTreeModel.getChildCount(tempTreeModel.getRoot()) > 0)   hasResults=true;
  tempTreeModel=null;
  return hasResults;
}
