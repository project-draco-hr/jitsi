{
  isFiltering=true;
  if (currentFilter == null || !currentFilter.equals(filter))   this.currentFilter=filter;
  tempTreeModel=new ContactListTreeModel();
synchronized (tempTreeModel) {
    treeModel.clearDependencies();
    currentFilter.applyFilter(tempTreeModel);
    treeModel=tempTreeModel;
  }
  if (!isFiltering) {
    return (treeModel.getChildCount(treeModel.getRoot()) > 0);
  }
  SwingUtilities.invokeLater(new Runnable(){
    public void run(){
      setTreeModel(treeModel);
      treeModel.reload();
      expandAllRows();
      revalidate();
      repaint();
    }
  }
);
  isFiltering=false;
  if (tempTreeModel.getChildCount(tempTreeModel.getRoot()) > 0)   return true;
  return false;
}
