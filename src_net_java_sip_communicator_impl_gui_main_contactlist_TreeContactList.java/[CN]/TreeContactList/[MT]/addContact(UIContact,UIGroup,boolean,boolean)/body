{
  if (!SwingUtilities.isEventDispatchThread()) {
    SwingUtilities.invokeLater(new Runnable(){
      public void run(){
        addContact(contact,group,isContactSorted,isGroupSorted);
      }
    }
);
    return;
  }
  GroupNode groupNode=null;
  if (group == null)   groupNode=treeModel.getRoot();
 else   if (group instanceof UIGroupImpl) {
    UIGroupImpl contactImpl=(UIGroupImpl)group;
    groupNode=contactImpl.getGroupNode();
    if (groupNode == null) {
      GroupNode parentNode=treeModel.getRoot();
      if (isGroupSorted)       groupNode=parentNode.sortedAddContactGroup(contactImpl);
 else       groupNode=parentNode.addContactGroup(contactImpl);
    }
  }
  if (groupNode == null)   return;
  contact.setParentGroup(groupNode.getGroupDescriptor());
  if (!(contact instanceof UIContactImpl))   return;
  UIContactImpl contactImpl=(UIContactImpl)contact;
  if (isContactSorted)   groupNode.sortedAddContact(contactImpl);
 else   groupNode.addContact(contactImpl);
  if ((!currentFilter.equals(presenceFilter) || !groupNode.isCollapsed()))   this.expandGroup(groupNode);
 else   this.expandGroup(treeModel.getRoot());
}
