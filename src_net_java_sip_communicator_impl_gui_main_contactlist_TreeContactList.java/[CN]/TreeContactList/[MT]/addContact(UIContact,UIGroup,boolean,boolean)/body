{
  if (!SwingUtilities.isEventDispatchThread()) {
    SwingUtilities.invokeLater(new Runnable(){
      public void run(){
        addContact(contact,group,isContactSorted,isGroupSorted);
      }
    }
);
    return;
  }
  GroupNode groupNode;
  if (group == null)   groupNode=treeModel.getRoot();
 else {
    groupNode=group.getGroupNode();
    if (groupNode == null) {
      GroupNode parentNode=treeModel.getRoot();
      if (isGroupSorted)       groupNode=parentNode.sortedAddContactGroup(group);
 else {
        groupNode=parentNode.addContactGroup(group);
      }
    }
  }
  contact.setParentGroup(groupNode.getGroupDescriptor());
  if (isContactSorted)   groupNode.sortedAddContact(contact);
 else   groupNode.addContact(contact);
  if ((!currentFilter.equals(presenceFilter) || !groupNode.isCollapsed()))   this.expandGroup(groupNode);
 else   this.expandGroup(treeModel.getRoot());
}
