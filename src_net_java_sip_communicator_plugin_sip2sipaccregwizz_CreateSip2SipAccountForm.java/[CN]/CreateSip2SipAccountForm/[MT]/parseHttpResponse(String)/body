{
  NewAccount newAccount=null;
  try {
    JSONObject jsonObject=new JSONObject(response);
    boolean isSuccess=jsonObject.getBoolean("success");
    if (isSuccess) {
      newAccount=new NewAccount(jsonObject.getString("sip_address"),passField.getPassword(),null,jsonObject.getString("outbound_proxy"));
      String xcapRoot=jsonObject.getString("xcap_root");
      String domain=null;
      int delimIndex=newAccount.getUserName().indexOf("@");
      if (delimIndex != -1) {
        domain=newAccount.getUserName().substring(delimIndex);
      }
      if (domain != null) {
        if (xcapRoot.endsWith("/"))         xcapRoot=xcapRoot.substring(0,xcapRoot.length() - 1) + domain;
 else         xcapRoot+=domain;
      }
      newAccount.setXcapRoot(xcapRoot);
    }
 else {
      showErrorMessage(jsonObject.getString("error_message"));
    }
  }
 catch (  JSONException e1) {
    if (logger.isInfoEnabled())     logger.info("Failed Json parsing.",e1);
  }
  return newAccount;
}
