{
  lastFormat=inFormat;
  decoder=new SpeexDecoder();
  int sampleRate=(int)inFormat.getSampleRate();
  int band=JavaEncoder.NARROW_BAND;
  if (sampleRate == 16000)   band=JavaEncoder.WIDE_BAND;
 else   if (sampleRate == 32000)   band=JavaEncoder.ULTRA_WIDE_BAND;
  decoder.init(band,sampleRate,inFormat.getChannels(),false);
}
