{
  CallPeerGTalkImpl callPeer=new CallPeerGTalkImpl(calleeJID,this);
  if (!firstCallPeerIsGV)   firstCallPeerIsGV=calleeJID.endsWith(ProtocolProviderServiceJabberImpl.GOOGLE_VOICE_DOMAIN);
  addCallPeer(callPeer);
  callPeer.setState(CallPeerState.INITIATING_CALL);
  if (getCallPeerCount() == 1 && !calleeJID.endsWith(ProtocolProviderServiceJabberImpl.GOOGLE_VOICE_DOMAIN) || getCallPeerCount() == 2 && firstCallPeerIsGV) {
    if (firstCallPeerIsGV) {
      firstCallPeerIsGV=false;
      Iterator<CallPeerGTalkImpl> it=getCallPeersVector().iterator();
      String sub=calleeJID.substring(0,calleeJID.indexOf("/"));
      while (it.hasNext()) {
        CallPeer p=it.next();
        if (p.getAddress().equals(sub)) {
          it.remove();
          break;
        }
      }
    }
    if (getCallPeerCount() == 1 && getCallGroup() == null) {
      parentOpSet.fireCallEvent(CallEvent.CALL_INITIATED,this);
    }
 else     if (getCallGroup() != null) {
      CallEvent cEvent=new CallEvent(this,CallEvent.CALL_INITIATED);
      AbstractOperationSetTelephonyConferencing<?,?,?,?,?> opSet=(AbstractOperationSetTelephonyConferencing<?,?,?,?,?>)getProtocolProvider().getOperationSet(OperationSetTelephonyConferencing.class);
      if (opSet != null)       opSet.outgoingCallCreated(cEvent);
    }
  }
  CallPeerMediaHandlerGTalkImpl mediaHandler=callPeer.getMediaHandler();
  mediaHandler.setLocalVideoTransmissionEnabled(localVideoAllowed);
  callPeer.setState(CallPeerState.CONNECTING);
  boolean sessionInitiated=false;
  try {
    callPeer.initiateSession(sessionInitiateExtensions);
    sessionInitiated=true;
    return callPeer;
  }
  finally {
    if (!sessionInitiated) {
      callPeer.setState(CallPeerState.FAILED);
    }
  }
}
