{
  String prop=e.getPropertyName();
  if ((prop.equals("focusOwner")) && (e.getNewValue() != null) && (e.getNewValue() instanceof Component)&& ((Component)e.getNewValue()).getFocusCycleRootAncestor() instanceof ChatWindow) {
    ChatWindow chatWindow=(ChatWindow)((Component)e.getNewValue()).getFocusCycleRootAncestor();
    ChatPanel chatPanel=chatWindow.getCurrentChatPanel();
    if (chatPanel instanceof MetaContactChatPanel) {
      MetaContact selectedMetaContact=((MetaContactChatPanel)chatPanel).getMetaContact();
      ContactList clist=chatWindow.getMainFrame().getContactListPanel().getContactList();
      ContactListModel clistModel=(ContactListModel)clist.getModel();
      if (clistModel.isContactActive(selectedMetaContact)) {
        clistModel.removeActiveContact(selectedMetaContact);
        clist.modifyContact(selectedMetaContact);
      }
      fireChatFocusEvent(ChatFocusEvent.FOCUS_GAINED);
    }
  }
}
