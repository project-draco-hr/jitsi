{
  this.index=index;
  this.photoLabel.setIcon(null);
  ContactList contactList=(ContactList)list;
  ContactListModel listModel=(ContactListModel)contactList.getModel();
  if (value instanceof MetaContact) {
    this.setPreferredSize(new Dimension(20,30));
    MetaContact contactItem=(MetaContact)value;
    String displayName=contactItem.getDisplayName();
    if (displayName == null || displayName.length() < 1) {
      displayName=Messages.getI18NString("unknown").getText();
    }
    this.nameLabel.setText(displayName);
    this.nameLabel.setIcon(listModel.getMetaContactStatusIcon(contactItem));
    this.nameLabel.setFont(this.getFont().deriveFont(Font.PLAIN));
    if (contactForegroundColor != null)     this.nameLabel.setForeground(contactForegroundColor);
    this.setBorder(BorderFactory.createEmptyBorder(1,5,1,1));
    byte[] avatar=contactItem.getAvatar(true);
    if (avatar != null && avatar.length > 0) {
      Image roundedAvatar=createRoundImage(avatar);
      if (roundedAvatar != null)       this.photoLabel.setIcon(new ImageIcon(roundedAvatar));
    }
    this.setBounds(0,0,list.getWidth() - 2,30);
    this.buttonsPanel.removeAll();
    this.nameLabel.setBounds(0,0,list.getWidth() - 28,17);
    this.photoLabel.setBounds(list.getWidth() - 28,0,25,30);
    this.isLeaf=true;
    this.setToolTipText(getContactToolTip(contactItem));
  }
 else   if (value instanceof MetaContactGroup) {
    this.setPreferredSize(new Dimension(20,20));
    MetaContactGroup groupItem=(MetaContactGroup)value;
    this.nameLabel.setText(groupItem.getGroupName() + "  ( " + groupItem.countChildContacts()+ " )");
    this.nameLabel.setIcon(new ImageIcon(ImageLoader.getImage(ImageLoader.GROUPS_16x16_ICON)));
    this.nameLabel.setFont(this.getFont().deriveFont(Font.BOLD));
    if (groupForegroundColor != null)     this.nameLabel.setForeground(groupForegroundColor);
    this.setBorder(BorderFactory.createEmptyBorder(2,5,2,2));
    this.setBounds(0,0,list.getWidth() - 2,20);
    JLabel groupContentIndicator=new JLabel();
    if (((ContactListModel)list.getModel()).isGroupClosed(groupItem))     photoLabel.setIcon(new ImageIcon(ImageLoader.getImage(ImageLoader.CLOSED_GROUP)));
 else     photoLabel.setIcon(new ImageIcon(ImageLoader.getImage(ImageLoader.OPENED_GROUP)));
    groupContentIndicator.setBounds(0,0,12,12);
    this.buttonsPanel.setPreferredSize(new Dimension(17,16));
    this.buttonsPanel.setBounds(list.getWidth() - 2 - 17,0,17,16);
    this.buttonsPanel.add(groupContentIndicator);
    this.isLeaf=false;
    this.setToolTipText(getGroupToolTip(groupItem));
  }
  this.isSelected=isSelected;
  return this;
}
