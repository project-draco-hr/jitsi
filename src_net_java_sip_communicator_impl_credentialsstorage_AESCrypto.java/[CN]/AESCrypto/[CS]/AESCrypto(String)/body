{
  if (masterPassword == null) {
    masterPassword=" ";
  }
  try {
    decryptCipher=Cipher.getInstance(CIPHER_ALGORITHM);
    encryptCipher=Cipher.getInstance(CIPHER_ALGORITHM);
    SecretKeyFactory factory=SecretKeyFactory.getInstance("PBKDF2WithHmacSHA1");
    KeySpec spec=new PBEKeySpec(masterPassword.toCharArray(),SALT,ITERATION_COUNT,KEY_LENGTH);
    SecretKey tmp=factory.generateSecret(spec);
    key=new SecretKeySpec(tmp.getEncoded(),KEY_ALGORITHM);
  }
 catch (  InvalidKeySpecException e) {
    throw new RuntimeException("Invalid key specification",e);
  }
catch (  NoSuchAlgorithmException e) {
    throw new RuntimeException("Algorithm not found",e);
  }
catch (  NoSuchPaddingException e) {
    throw new RuntimeException("Padding not found",e);
  }
}
