{
  if (!isGroupChatMessage(switchboard))   return;
  Message newMessage=createMessage(message.getContent());
  Contact sourceContact=opSetPersPresence.findContactByID(contact.getEmail().getEmailAddress());
  logger.debug("Group chat message received.");
  Object attachment=switchboard.getAttachment();
  try {
    ChatRoomMsnImpl chatRoom=null;
    if (attachment == null)     chatRoom=(ChatRoomMsnImpl)findRoom(switchboard);
    if (attachment != null && userCreatedChatRoomList.containsKey(attachment))     chatRoom=(ChatRoomMsnImpl)userCreatedChatRoomList.get(attachment);
    if (chatRoom == null)     return;
    ChatRoomMemberMsnImpl member=chatRoom.getChatRoomMember(contact.getDisplayName(),contact.getEmail().getEmailAddress());
    ChatRoomMessageReceivedEvent msgReceivedEvent=new ChatRoomMessageReceivedEvent(chatRoom,member,new Date(),newMessage,ChatRoomMessageReceivedEvent.CONVERSATION_MESSAGE_RECEIVED);
    chatRoom.fireMessageEvent(msgReceivedEvent);
  }
 catch (  OperationFailedException e) {
    logger.error("Failed to find room with name: ",e);
  }
catch (  OperationNotSupportedException e) {
    logger.error("Failed to find room with name: ",e);
  }
}
