{
synchronized (dialog) {
    DialogApplicationData applicationData=(DialogApplicationData)dialog.getApplicationData();
    if (applicationData == null) {
      applicationData=new DialogApplicationData();
      dialog.setApplicationData(applicationData);
    }
    if (applicationData.addSubscription(subscription)) {
      try {
        dialog.terminateOnBye(false);
        return true;
      }
 catch (      SipException ex) {
        applicationData.removeSubscription(subscription);
        throw ex;
      }
    }
    return false;
  }
}
