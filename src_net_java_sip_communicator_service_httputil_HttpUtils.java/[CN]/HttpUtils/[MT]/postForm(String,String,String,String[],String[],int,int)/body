{
  DefaultHttpClient httpClient;
  HttpPost postMethod;
  HttpEntity resEntity=null;
  try {
    AuthenticationException authEx;
    do {
      postMethod=new HttpPost(address);
      httpClient=getHttpClient(usernamePropertyName,passwordPropertyName,postMethod.getURI().getHost());
      try {
        resEntity=postForm(httpClient,postMethod,address,usernamePropertyName,passwordPropertyName,formParamNames,formParamValues,usernameParamIx,passwordParamIx);
        authEx=null;
      }
 catch (      AuthenticationException ex) {
        authEx=ex;
      }
    }
 while (authEx != null);
    if (resEntity == null)     return null;
    return new HTTPResponseResult(resEntity,httpClient);
  }
 catch (  Throwable e) {
    logger.error("Error posting form",e);
  }
  return null;
}
