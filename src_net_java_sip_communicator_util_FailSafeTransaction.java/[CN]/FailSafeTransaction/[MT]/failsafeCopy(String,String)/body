{
  FileInputStream in=null;
  FileOutputStream out=null;
  File toF=new File(to);
  if (toF.exists()) {
    toF.delete();
  }
  File ptoF=new File(to + PART_EXT);
  if (ptoF.exists()) {
    ptoF.delete();
  }
  try {
    in=new FileInputStream(from);
    out=new FileOutputStream(to + PART_EXT);
  }
 catch (  FileNotFoundException e) {
    throw new IllegalStateException(e.getMessage());
  }
  byte[] buf=new byte[1024];
  int len;
  while ((len=in.read(buf)) > 0) {
    out.write(buf,0,len);
  }
  in.close();
  out.close();
  ptoF.renameTo(toF);
}
