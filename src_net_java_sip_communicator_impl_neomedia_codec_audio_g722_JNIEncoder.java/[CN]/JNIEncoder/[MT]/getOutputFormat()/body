{
  Format outputFormat=super.getOutputFormat();
  if ((outputFormat != null) && (outputFormat.getClass() == AudioFormat.class)) {
    AudioFormat outputAudioFormat=(AudioFormat)outputFormat;
    setOutputFormat(new AudioFormat(outputAudioFormat.getEncoding(),outputAudioFormat.getSampleRate(),outputAudioFormat.getSampleSizeInBits(),outputAudioFormat.getChannels(),outputAudioFormat.getEndian(),outputAudioFormat.getSigned(),outputAudioFormat.getFrameSizeInBits(),outputAudioFormat.getFrameRate(),outputAudioFormat.getDataType()){
      @Override public long computeDuration(      long length){
        return JNIEncoder.this.computeDuration(length);
      }
    }
);
  }
  return outputFormat;
}
