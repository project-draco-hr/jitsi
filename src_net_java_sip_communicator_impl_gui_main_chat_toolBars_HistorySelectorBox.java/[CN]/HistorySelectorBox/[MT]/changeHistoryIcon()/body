{
  toggleAllHistory.setSelected(false);
  toggleHistoryPerContact.setSelected(false);
  if (!ConfigurationUtils.isHistoryLoggingEnabled())   toggleAllHistory.setSelected(true);
  if (chatContainer.getCurrentChat() != null) {
    Object desc=chatContainer.getCurrentChat().getChatSession().getDescriptor();
    if (desc instanceof MetaContact) {
      MetaContact contact=(MetaContact)desc;
      if (!ConfigurationUtils.isHistoryLoggingEnabled(contact)) {
        toggleHistoryPerContact.setSelected(true);
      }
    }
  }
  if (toggleAllHistory.isSelected() || toggleHistoryPerContact.isSelected()) {
    this.setIcon(new ImageIcon(ImageLoader.getImage(ImageLoader.HISTORY_ICON_OFF)));
  }
 else   this.setIcon(new ImageIcon(ImageLoader.getImage(ImageLoader.HISTORY_ICON_ON)));
}
