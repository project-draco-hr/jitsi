{
  NodeList usersList=conferenceInfoDocument.getElementsByTagName(ELEMENT_USERS);
  ConferenceMember[] conferenceMembersToRemove=callPeer.getConferenceMembers();
  int conferenceMembersToRemoveCount=conferenceMembersToRemove.length;
  boolean changed=false;
  if (usersList.getLength() > 0) {
    NodeList userList=usersList.item(0).getChildNodes();
    int userCount=userList.getLength();
    for (int userIndex=0; userIndex < userCount; userIndex++) {
      Node user=userList.item(userIndex);
      if (!ELEMENT_USER.equals(user.getNodeName()))       continue;
      String address=stripParametersFromAddress(((Element)user).getAttribute("entity"));
      if ((address == null) || (address.length() < 1))       continue;
      ConferenceMemberSipImpl existingConferenceMember=null;
      for (int conferenceMemberIndex=0; conferenceMemberIndex < conferenceMembersToRemoveCount; conferenceMemberIndex++) {
        ConferenceMemberSipImpl conferenceMember=(ConferenceMemberSipImpl)conferenceMembersToRemove[conferenceMemberIndex];
        if ((conferenceMember != null) && address.equalsIgnoreCase(conferenceMember.getAddress())) {
          conferenceMembersToRemove[conferenceMemberIndex]=null;
          existingConferenceMember=conferenceMember;
          break;
        }
      }
      boolean addConferenceMember;
      if (existingConferenceMember == null) {
        existingConferenceMember=new ConferenceMemberSipImpl(callPeer,address);
        addConferenceMember=true;
      }
 else       addConferenceMember=false;
      if (existingConferenceMember != null) {
        NodeList userChildList=user.getChildNodes();
        int userChildCount=userChildList.getLength();
        String displayName=null;
        String endpointStatus=null;
        String audioSsrc=null;
        String videoSsrc=null;
        for (int userChildIndex=0; userChildIndex < userChildCount; userChildIndex++) {
          Node userChild=userChildList.item(userChildIndex);
          String userChildName=userChild.getNodeName();
          if (ELEMENT_DISPLAY_TEXT.equals(userChildName))           displayName=userChild.getTextContent();
 else           if (ELEMENT_ENDPOINT.equals(userChildName)) {
            endpointStatus=getEndpointStatus(userChild);
            audioSsrc=getEndpointMediaSrcId(userChild,MediaType.AUDIO);
            videoSsrc=getEndpointMediaSrcId(userChild,MediaType.VIDEO);
          }
        }
        existingConferenceMember.setDisplayName(displayName);
        existingConferenceMember.setEndpointStatus(endpointStatus);
        if (audioSsrc != null) {
          long newSsrc=Long.parseLong(audioSsrc);
          if (existingConferenceMember.getAudioSsrc() != newSsrc)           changed=true;
          existingConferenceMember.setAudioSsrc(newSsrc);
        }
        if (videoSsrc != null) {
          long newSsrc=Long.parseLong(videoSsrc);
          long currentSsrc=existingConferenceMember.getVideoSsrc();
          if (currentSsrc != -1 && currentSsrc == newSsrc)           continue;
          if (existingConferenceMember.getVideoSsrc() != newSsrc)           changed=true;
          existingConferenceMember.setVideoSsrc(newSsrc);
          VideoMediaStream peerVideoStream=(VideoMediaStream)callPeer.getMediaHandler().getStream(MediaType.VIDEO);
          Component visualComponent=peerVideoStream.getVisualComponent(newSsrc);
          if (visualComponent != null)           callPeer.getMediaHandler().fireVisualComponentResolveEvent(visualComponent,existingConferenceMember);
        }
        if (addConferenceMember)         callPeer.addConferenceMember(existingConferenceMember);
      }
    }
  }
  for (int conferenceMemberIndex=0; conferenceMemberIndex < conferenceMembersToRemoveCount; conferenceMemberIndex++) {
    ConferenceMember conferenceMemberToRemove=conferenceMembersToRemove[conferenceMemberIndex];
    if (conferenceMemberToRemove != null)     callPeer.removeConferenceMember(conferenceMemberToRemove);
  }
  if (changed)   notifyAll(callPeer.getCall());
}
