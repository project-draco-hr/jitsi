{
  if (!(out instanceof VideoFormat) || (null == AbstractCodecExt.matches(out,getMatchingOutputFormats(inputFormat))))   return null;
  VideoFormat videoOut=(VideoFormat)out;
  Dimension outSize=videoOut.getSize();
  if (outSize == null) {
    Dimension inSize=((VideoFormat)inputFormat).getSize();
    outSize=(inSize == null) ? new Dimension(Constants.VIDEO_WIDTH,Constants.VIDEO_HEIGHT) : inSize;
  }
  Map<String,String> fmtps=null;
  if (out instanceof ParameterizedVideoFormat)   fmtps=((ParameterizedVideoFormat)out).getFormatParameters();
  if (fmtps == null)   fmtps=new HashMap<String,String>();
  if (packetizationMode != null)   fmtps.put(PACKETIZATION_MODE_FMTP,packetizationMode);
  outputFormat=new ParameterizedVideoFormat(videoOut.getEncoding(),outSize,Format.NOT_SPECIFIED,Format.byteArray,videoOut.getFrameRate(),fmtps);
  return outputFormat;
}
