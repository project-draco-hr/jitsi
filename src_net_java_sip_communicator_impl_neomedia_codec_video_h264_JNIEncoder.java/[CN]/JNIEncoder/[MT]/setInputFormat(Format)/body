{
  if (!(in instanceof VideoFormat) || null == AbstractCodecExt.matches(in,inputFormats))   return null;
  VideoFormat videoIn=(VideoFormat)in;
  Dimension inSize=videoIn.getSize();
  if (inSize == null) {
    inSize=new Dimension(Constants.VIDEO_WIDTH,Constants.VIDEO_HEIGHT);
  }
  YUVFormat yuv=(YUVFormat)videoIn;
  if (yuv.getOffsetU() > yuv.getOffsetV())   return null;
  int strideY=inSize.width;
  int strideUV=strideY / 2;
  int offsetU=strideY * inSize.height;
  int offsetV=offsetU + strideUV * inSize.height / 2;
  int inputYuvLength=(strideY + strideUV) * inSize.height;
  float sourceFrameRate=videoIn.getFrameRate();
  inputFormat=new YUVFormat(inSize,inputYuvLength + INPUT_BUFFER_PADDING_SIZE,Format.byteArray,sourceFrameRate,YUVFormat.YUV_420,strideY,strideUV,0,offsetU,offsetV);
  return inputFormat;
}
