{
  if (!(in instanceof VideoFormat) || (null == AbstractCodecExt.matches(in,inputFormats)))   return null;
  YUVFormat yuv=(YUVFormat)in;
  Dimension inSize=yuv.getSize();
  if (inSize == null)   inSize=new Dimension(Constants.VIDEO_WIDTH,Constants.VIDEO_HEIGHT);
  if (yuv.getOffsetU() > yuv.getOffsetV())   return null;
  int strideY=inSize.width;
  int strideUV=strideY / 2;
  int offsetU=strideY * inSize.height;
  int offsetV=offsetU + strideUV * inSize.height / 2;
  int inYUVLength=(strideY + strideUV) * inSize.height;
  inputFormat=new YUVFormat(inSize,inYUVLength + INPUT_BUFFER_PADDING_SIZE,Format.byteArray,yuv.getFrameRate(),YUVFormat.YUV_420,strideY,strideUV,0,offsetU,offsetV);
  return inputFormat;
}
