{
  JMenuItem menuItem=(JMenuItem)e.getSource();
  String itemTitle=menuItem.getText();
  for (int i=0; i < protocolsList.size(); i++) {
    ProtocolProviderService protocolProvider=(ProtocolProviderService)protocolsList.get(i);
    if (protocolProvider.getProtocolName().equals(itemTitle)) {
      OperationSetBasicInstantMessaging im=chatPanel.getChatWindow().getMainFrame().getProtocolIM(protocolProvider);
      chatPanel.setImOperationSet(im);
      protocolSelectorBox.setSelected(menuItem);
    }
  }
}
