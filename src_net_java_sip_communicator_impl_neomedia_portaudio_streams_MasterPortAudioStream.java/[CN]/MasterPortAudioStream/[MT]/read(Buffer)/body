{
synchronized (readSync) {
    if (readActive) {
      return false;
    }
    readActive=true;
    if (!started) {
      buffer.setLength(0);
      return true;
    }
  }
  Object data=buffer.getData();
  byte[] bufferData;
  if (data instanceof byte[] && ((byte[])data).length >= bytesPerBuffer) {
    bufferData=(byte[])data;
  }
 else {
    bufferData=new byte[bytesPerBuffer];
    buffer.setData(bufferData);
  }
synchronized (connectedToStreamSync) {
    PortAudio.Pa_ReadStream(stream,bufferData,framesPerBuffer);
  }
  long bufferTimeStamp=System.nanoTime();
  buffer.setFlags(Buffer.FLAG_SYSTEM_TIME);
  buffer.setLength(bytesPerBuffer);
  buffer.setOffset(0);
  buffer.setTimeStamp(bufferTimeStamp);
  int slaveCount=slaves.size();
  for (int slaveIndex=0; slaveIndex < slaveCount; slaveIndex++) {
    slaves.get(slaveIndex).setBuffer(bufferData,bytesPerBuffer,bufferTimeStamp);
  }
synchronized (readSync) {
    readActive=false;
    readSync.notify();
  }
  return true;
}
