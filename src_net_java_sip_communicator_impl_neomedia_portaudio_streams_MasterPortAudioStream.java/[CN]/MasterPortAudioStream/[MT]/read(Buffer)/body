{
  if (!started) {
    buffer.setLength(0);
    return;
  }
  int bufferLength=bytesPerBuffer;
  byte[] bufferData=new byte[bufferLength];
synchronized (connectedToStreamSync) {
    PortAudio.Pa_ReadStream(stream,bufferData,framesPerBuffer);
  }
  long bufferTimeStamp=System.nanoTime();
  buffer.setData(bufferData);
  buffer.setFlags(Buffer.FLAG_SYSTEM_TIME);
  buffer.setLength(bufferLength);
  buffer.setOffset(0);
  buffer.setTimeStamp(bufferTimeStamp);
  int slaveCount=slaves.size();
  for (int slaveIndex=0; slaveIndex < slaveCount; slaveIndex++) {
    slaves.get(slaveIndex).setBuffer(bufferData,bufferLength,bufferTimeStamp);
  }
}
