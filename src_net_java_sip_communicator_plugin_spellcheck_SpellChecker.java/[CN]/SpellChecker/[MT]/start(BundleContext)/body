{
  enabled=SpellCheckActivator.getConfigService().getBoolean("plugin.spellcheck.ENABLE",true);
  FileAccessService faService=SpellCheckActivator.getFileAccessService();
  File dictionaryDir=faService.getPrivatePersistentFile(DICT_DIR);
  if (!dictionaryDir.exists()) {
    dictionaryDir.mkdir();
    @SuppressWarnings("unchecked") Enumeration<URL> dictUrls=SpellCheckActivator.bundleContext.getBundle().findEntries(DEFAULT_DICT_PATH,"*.zip",false);
    if (dictUrls != null) {
      while (dictUrls.hasMoreElements()) {
        URL dictUrl=dictUrls.nextElement();
        InputStream source=dictUrl.openStream();
        int filenameStart=dictUrl.getPath().lastIndexOf('/') + 1;
        String filename=dictUrl.getPath().substring(filenameStart);
        File dictLocation=faService.getPrivatePersistentFile(DICT_DIR + filename);
        copyDictionary(source,dictLocation);
      }
    }
  }
  this.personalDictLocation=faService.getPrivatePersistentFile(DICT_DIR + PERSONAL_DICT_NAME);
  if (!personalDictLocation.exists())   personalDictLocation.createNewFile();
  String localeIso=SpellCheckActivator.getConfigService().getString(LOCALE_CONFIG_PARAM);
  if (localeIso == null) {
    localeIso=Parameters.getDefault(Parameters.Default.LOCALE);
    if (localeIso == null)     throw new Exception("No default locale provided for spell checker");
  }
  Parameters.Locale tmp=Parameters.getLocale(localeIso);
  if (tmp == null)   throw new Exception("No dictionary resources defined for locale: " + localeIso);
  this.locale=tmp;
  LanguageMenuBar.makeSelectionField(this).createSpellCheckerWorker(locale).start();
synchronized (this.attachedChats) {
    SpellCheckActivator.getUIService().addChatListener(this);
    for (    Chat chat : SpellCheckActivator.getUIService().getAllChats())     chatCreated(chat);
  }
  if (logger.isInfoEnabled())   logger.info("Spell Checker loaded.");
}
