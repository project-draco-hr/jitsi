{
  if (t.isDataFlavorSupported(DataFlavor.javaFileListFlavor)) {
    Object o=null;
    try {
      o=t.getTransferData(DataFlavor.javaFileListFlavor);
    }
 catch (    UnsupportedFlavorException e) {
      logger.debug("Failed to drop files.",e);
    }
catch (    IOException e) {
      logger.debug("Failed to drop files.",e);
    }
    if (o instanceof Collection) {
      ChatPanel chatPanel=getChatPanel();
      if (chatPanel != null) {
        Collection<File> files=(Collection<File>)o;
        for (        File file : files) {
          chatPanel.sendFile(file);
          GuiActivator.getUIService().getChatWindowManager().openChat(chatPanel,false);
        }
        return true;
      }
    }
  }
 else   if (t.isDataFlavorSupported(metaContactDataFlavor)) {
    Object o=null;
    try {
      o=t.getTransferData(metaContactDataFlavor);
    }
 catch (    UnsupportedFlavorException e) {
      if (logger.isDebugEnabled())       logger.debug("Failed to drop meta contact.",e);
    }
catch (    IOException e) {
      if (logger.isDebugEnabled())       logger.debug("Failed to drop meta contact.",e);
    }
    if (o instanceof ContactNode && comp instanceof TreeContactList) {
      MetaContact transferredContact=((ContactNode)o).getMetaContact();
      TreeContactList list=(TreeContactList)comp;
      Object dest=list.getSelectionPath().getLastPathComponent();
      if (transferredContact != null) {
        if (dest instanceof ContactNode) {
          MetaContact destContact=((ContactNode)dest).getMetaContact();
          if (transferredContact != destContact) {
            MetaContactListManager.moveMetaContactToMetaContact(transferredContact,destContact);
          }
          return true;
        }
 else         if (dest instanceof GroupNode) {
          MetaContactGroup destGroup=((GroupNode)dest).getMetaContactGroup();
          if (transferredContact.getParentMetaContactGroup() != destGroup) {
            MetaContactListManager.moveMetaContactToGroup(transferredContact,destGroup);
          }
          return true;
        }
      }
    }
  }
  return false;
}
