{
  if (t.isDataFlavorSupported(DataFlavor.javaFileListFlavor)) {
    Object o=null;
    try {
      o=t.getTransferData(DataFlavor.javaFileListFlavor);
    }
 catch (    UnsupportedFlavorException e) {
      if (logger.isDebugEnabled())       logger.debug("Failed to drop files.",e);
    }
catch (    IOException e) {
      if (logger.isDebugEnabled())       logger.debug("Failed to drop files.",e);
    }
    if (o instanceof Collection) {
      ChatPanel chatPanel=getChatPanel();
      if (chatPanel != null) {
        Collection<File> files=(Collection<File>)o;
        for (        File file : files) {
          chatPanel.sendFile(file);
          GuiActivator.getUIService().getChatWindowManager().openChat(chatPanel,false);
        }
        return true;
      }
    }
  }
 else   if (t.isDataFlavorSupported(uiContactDataFlavor)) {
    Object o=null;
    try {
      o=t.getTransferData(uiContactDataFlavor);
    }
 catch (    UnsupportedFlavorException e) {
      if (logger.isDebugEnabled())       logger.debug("Failed to drop meta contact.",e);
    }
catch (    IOException e) {
      if (logger.isDebugEnabled())       logger.debug("Failed to drop meta contact.",e);
    }
    if (o instanceof ContactNode && comp instanceof TreeContactList) {
      UIContact transferredContact=((ContactNode)o).getContactDescriptor();
      if (!(transferredContact instanceof MetaUIContact))       return false;
      TreeContactList list=(TreeContactList)comp;
      Object dest=list.getSelectionPath().getLastPathComponent();
      if (transferredContact != null) {
        if (dest instanceof ContactNode) {
          UIContact destContact=((ContactNode)dest).getContactDescriptor();
          if (!(destContact instanceof MetaUIContact))           return false;
          if (transferredContact != destContact) {
            MetaContactListManager.moveMetaContactToMetaContact((MetaContact)transferredContact.getDescriptor(),(MetaContact)destContact.getDescriptor());
          }
          return true;
        }
 else         if (dest instanceof GroupNode) {
          UIGroup destGroup=((GroupNode)dest).getGroupDescriptor();
          if (!(destGroup instanceof MetaUIGroup))           return false;
          if (!transferredContact.getParentGroup().equals(destGroup)) {
            MetaContactListManager.moveMetaContactToGroup((MetaContact)transferredContact.getDescriptor(),(MetaContactGroup)destGroup.getDescriptor());
          }
          return true;
        }
      }
    }
  }
  return false;
}
