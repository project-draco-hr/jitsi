{
  unregisteredProviders.add(pp);
  new Thread(new Runnable(){
    public void run(){
      try {
        if (pp.getRegistrationState().equals(RegistrationState.UNREGISTERING) || pp.getRegistrationState().equals(RegistrationState.UNREGISTERED) || pp.getRegistrationState().equals(RegistrationState.CONNECTION_FAILED))         return;
        pp.unregister();
      }
 catch (      Throwable t) {
        logger.error("Error unregistering pp:" + pp,t);
      }
    }
  }
).start();
}
