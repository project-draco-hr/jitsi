{
  Request invite=serverTransaction.getRequest();
  CallPeerSipImpl peer=createCallPeerFor(serverTransaction,jainSipProvider);
  ContentLengthHeader cl=invite.getContentLength();
  if (cl != null && cl.getContentLength() > 0) {
    peer.setSdpDescription(new String(invite.getRawContent()));
  }
  Response response=null;
  try {
    logger.trace("will send ringing response: ");
    response=messageFactory.createResponse(Response.RINGING,invite);
    serverTransaction.sendResponse(response);
    logger.debug("sent a ringing response: " + response);
  }
 catch (  ParseException ex) {
    logger.error("Error while trying to create a response",ex);
    peer.setState(CallPeerState.FAILED,"Internal Error: " + ex.getMessage());
    return peer;
  }
catch (  Exception ex) {
    logger.error("Error while trying to send a request",ex);
    peer.setState(CallPeerState.FAILED,"Internal Error: " + ex.getMessage());
    return peer;
  }
  return peer;
}
