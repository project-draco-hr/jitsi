{
  try {
    CallSession callSession=SipActivator.getMediaService().createCallSession(callPeer.getCall());
    callPeer.setMediaCallSession(callSession);
    callSession.setSessionCreatorCallback(callPeer);
    URI calleeURI=callPeer.getPeerAddress().getURI();
    if (calleeURI.isSipURI()) {
      ContentTypeHeader contentTypeHeader=getProtocolProvider().getHeaderFactory().createContentTypeHeader("application","sdp");
      String host=((SipURI)calleeURI).getHost();
      InetAddress intendedDestination=getProtocolProvider().resolveSipAddress(host).getAddress();
      invite.setContent(callSession.createSdpOffer(intendedDestination),contentTypeHeader);
    }
  }
 catch (  UnknownHostException ex) {
    ProtocolProviderServiceSipImpl.throwOperationFailedException("Failed to obtain an InetAddress for " + ex.getMessage(),OperationFailedException.NETWORK_FAILURE,ex,logger);
  }
catch (  ParseException ex) {
    ProtocolProviderServiceSipImpl.throwOperationFailedException("Failed to parse sdp data while creating invite request!",OperationFailedException.INTERNAL_ERROR,ex,logger);
  }
catch (  MediaException ex) {
    ProtocolProviderServiceSipImpl.throwOperationFailedException("Could not access media devices!",OperationFailedException.INTERNAL_ERROR,ex,logger);
  }
}
