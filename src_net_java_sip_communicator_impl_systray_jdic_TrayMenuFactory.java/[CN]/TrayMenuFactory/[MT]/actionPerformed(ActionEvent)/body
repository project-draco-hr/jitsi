{
  Object source=evt.getSource();
  String itemName;
  if (source instanceof JMenuItem) {
    JMenuItem menuItem=(JMenuItem)source;
    itemName=menuItem.getName();
  }
 else {
    MenuItem menuItem=(MenuItem)source;
    itemName=menuItem.getName();
  }
  if (itemName.equals("settings")) {
    ExportedWindow configWindow=SystrayActivator.getUIService().getExportedWindow(ExportedWindow.CONFIGURATION_WINDOW);
    configWindow.setVisible(true);
  }
 else   if (itemName.equals("service.gui.CLOSE")) {
    try {
      SystrayActivator.bundleContext.getBundle(0).stop();
    }
 catch (    BundleException ex) {
      logger.error("Failed to gently shutdown Felix",ex);
      System.exit(0);
    }
  }
 else   if (itemName.equals("addContact")) {
    ExportedWindow dialog=SystrayActivator.getUIService().getExportedWindow(ExportedWindow.ADD_CONTACT_WINDOW);
    if (dialog != null)     dialog.setVisible(true);
 else     SystrayActivator.getUIService().getPopupDialog().showMessagePopupDialog(Resources.getString("impl.systray.FAILED_TO_OPEN_ADD_CONTACT_DIALOG"));
  }
}
