{
  if (chatRoomWrapper.getChatRoom() == null)   return;
  try {
    ChatRoomConfigurationForm configForm=chatRoomWrapper.getChatRoom().getConfigurationForm();
    ChatRoomConfigurationWindow configWindow=new ChatRoomConfigurationWindow(chatRoomWrapper.getChatRoomName(),configForm);
    configWindow.setVisible(true);
  }
 catch (  OperationFailedException e) {
    logger.error("Failed to obtain the chat room configuration form.",e);
    if (e.getErrorCode() == OperationFailedException.NOT_ENOUGH_PRIVILEGES) {
      new ErrorDialog(chatWindow,Messages.getI18NString("warning").getText(),Messages.getI18NString("chatRoomOpenConfigForbidden",new String[]{chatRoomWrapper.getChatRoomName()}).getText(),ErrorDialog.WARNING).showDialog();
    }
 else {
      new ErrorDialog(chatWindow,Messages.getI18NString("error").getText(),Messages.getI18NString("chatRoomOpenConfigFailed",new String[]{chatRoomWrapper.getChatRoomName()}).getText(),e).showDialog();
    }
  }
}
