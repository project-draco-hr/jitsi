{
  ConfigurationService configService=GuiActivator.getConfigurationService();
  int accountIndex=-1;
  for (  ProtocolProviderService pps : protocolProviders.keySet()) {
    if (pps.getProtocolDisplayName().equals(protocolProvider.getProtocolDisplayName()) && !pps.equals(protocolProvider)) {
      int index=protocolProviders.get(pps).intValue();
      if (accountIndex < index)       accountIndex=index;
    }
  }
  accountIndex++;
  configService.setProperty(accountRootPropName + ".accountIndex",new Integer(accountIndex));
  return accountIndex;
}
