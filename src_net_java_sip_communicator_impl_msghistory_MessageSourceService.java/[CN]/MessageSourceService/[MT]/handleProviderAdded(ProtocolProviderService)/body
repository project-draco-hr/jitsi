{
synchronized (recentMessages) {
    List<MessageSourceContact> sourceContactsToAdd=getSourceContacts(provider);
    if (sourceContactsToAdd.isEmpty()) {
      Collection<EventObject> res=messageHistoryService.findRecentMessagesPerContact(numberOfMessages,provider.getAccountID().getAccountUniqueID(),null,isSMSEnabled);
      List<MessageSourceContact> newMsc=new ArrayList<MessageSourceContact>();
      for (      EventObject obj : res) {
        MessageSourceContact msc=new MessageSourceContact(obj,MessageSourceService.this);
        if (!recentMessages.contains(msc) && !newMsc.contains(msc))         newMsc.add(msc);
      }
      addNewRecentMessages(newMsc);
      for (      MessageSourceContact msc : newMsc) {
        saveRecentMessageToHistory(msc);
      }
    }
 else     addNewRecentMessages(sourceContactsToAdd);
  }
}
