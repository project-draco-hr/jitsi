{
  if (eventID == ChatRoomMemberPresenceChangeEvent.MEMBER_JOINED) {
    this.chatRoomMembers.put(member.getContactAddress(),member);
  }
 else {
    this.chatRoomMembers.remove(member.getContactAddress());
  }
  ChatRoomMemberPresenceChangeEvent evt;
  if (actorMember != null)   evt=new ChatRoomMemberPresenceChangeEvent(this,member,actorMember,eventID,eventReason);
 else   evt=new ChatRoomMemberPresenceChangeEvent(this,member,eventID,eventReason);
  if (logger.isTraceEnabled())   logger.trace("Will dispatch the following ChatRoom event: " + evt);
  Iterable<ChatRoomMemberPresenceListener> listeners;
synchronized (memberListeners) {
    listeners=new ArrayList<ChatRoomMemberPresenceListener>(memberListeners);
  }
  for (  ChatRoomMemberPresenceListener listener : listeners)   listener.memberPresenceChanged(evt);
}
