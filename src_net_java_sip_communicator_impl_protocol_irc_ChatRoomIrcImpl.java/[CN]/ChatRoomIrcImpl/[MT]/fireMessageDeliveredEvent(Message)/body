{
  int eventType=ChatRoomMessageDeliveredEvent.CONVERSATION_MESSAGE_DELIVERED;
  MessageIrcImpl msg=(MessageIrcImpl)message;
  if (msg.isAction()) {
    eventType=ChatRoomMessageDeliveredEvent.ACTION_MESSAGE_DELIVERED;
    if (msg.getContent().indexOf(' ') != -1)     msg.setContent(msg.getContent().substring(message.getContent().indexOf(' ')));
  }
  ChatRoomMessageDeliveredEvent msgDeliveredEvt=new ChatRoomMessageDeliveredEvent(this,System.currentTimeMillis(),msg,eventType);
  Iterator listeners=null;
synchronized (messageListeners) {
    listeners=new ArrayList(messageListeners).iterator();
  }
  while (listeners.hasNext()) {
    ChatRoomMessageListener listener=(ChatRoomMessageListener)listeners.next();
    listener.messageDelivered(msgDeliveredEvt);
  }
}
