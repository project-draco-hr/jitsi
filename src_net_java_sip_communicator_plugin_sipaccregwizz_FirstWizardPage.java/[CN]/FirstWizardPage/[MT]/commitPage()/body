{
  String uin=userIDField.getText();
  int indexOfSeparator=uin.indexOf('@');
  if (indexOfSeparator > -1) {
    uin=uin.substring(0,indexOfSeparator);
  }
  SIPAccountRegistration registration=wizard.getRegistration();
  String userID=userIDField.getText();
  if (userID == null || userID.trim().length() == 0)   throw new IllegalStateException("No user ID provided.");
  registration.setUserID(userID);
  if (passField.getPassword() != null)   registration.setPassword(new String(passField.getPassword()));
  registration.setRememberPassword(rememberPassBox.isSelected());
  registration.setServerAddress(serverField.getText());
  String displayName=displayNameField.getText();
  registration.setDisplayName(displayName);
  String authName=authNameField.getText();
  if (authName != null && authName.length() > 0)   registration.setAuthorizationName(authName);
  registration.setServerPort(serverPortField.getText());
  registration.setProxy(proxyField.getText());
  registration.setProxyPort(proxyPortField.getText());
  Object selectedItem=transportCombo.getSelectedItem();
  if (selectedItem == null)   selectedItem=transportCombo.getItemAt(0);
  registration.setPreferredTransport(selectedItem.toString());
  registration.setEnablePresence(enablePresOpButton.isSelected());
  registration.setForceP2PMode(forceP2PPresOpButton.isSelected());
  registration.setDefaultEncryption(enableDefaultEncryption.isSelected());
  registration.setSipZrtpAttribute(enableSipZrtpAttribute.isSelected());
  registration.setPollingPeriod(pollPeriodField.getText());
  registration.setSubscriptionExpiration(subscribeExpiresField.getText());
  registration.setKeepAliveMethod(keepAliveMethodBox.getSelectedItem().toString());
  registration.setKeepAliveInterval(keepAliveIntervalValue.getText());
  wizard.getWizardContainer().setBackButtonEnabled(true);
  nextPageIdentifier=SUMMARY_PAGE_IDENTIFIER;
  this.isCommitted=true;
}
