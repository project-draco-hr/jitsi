{
  String msg=null;
  int keycode=event.getKeyCode();
  int key=event.getKeyChar();
  if (key != KeyEvent.CHAR_UNDEFINED) {
    keycode=event.getKeyChar();
  }
 else {
    keycode=event.getKeyCode();
  }
  if (keycode == 0) {
    return;
  }
switch (event.getID()) {
case KeyEvent.KEY_TYPED:
    msg=DesktopSharingProtocolSipImpl.getKeyTypedXML(keycode);
  break;
case KeyEvent.KEY_PRESSED:
msg=DesktopSharingProtocolSipImpl.getKeyPressedXML(keycode);
break;
case KeyEvent.KEY_RELEASED:
msg=DesktopSharingProtocolSipImpl.getKeyReleasedXML(keycode);
break;
default :
return;
}
synchronized (inputSync) {
inputEvents.add(msg);
notifySubscriptions();
}
}
