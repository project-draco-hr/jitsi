{
  try {
    try {
      detector.shutDown();
    }
 catch (    Exception ex) {
      logger.debug("Failed to properly shutdown a stun detector: " + ex.getMessage());
    }
    detector=null;
    useStun=false;
    NetaddrActivator.getConfigurationService().removeVetoableChangeListener(PROP_STUN_SERVER_ADDRESS,this);
    NetaddrActivator.getConfigurationService().removeVetoableChangeListener(PROP_STUN_SERVER_PORT,this);
  }
  finally {
    logger.logExit();
  }
}
