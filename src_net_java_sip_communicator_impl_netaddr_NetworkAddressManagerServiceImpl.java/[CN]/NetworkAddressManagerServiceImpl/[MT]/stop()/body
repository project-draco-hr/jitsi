{
  try {
    if (detector != null) {
      try {
        detector.shutDown();
      }
 catch (      Exception ex) {
        logger.debug("Failed to properly shutdown a stun detector: " + ex.getMessage());
      }
      detector=null;
    }
    useStun=false;
    ConfigurationService configurationService=NetaddrActivator.getConfigurationService();
    configurationService.removeVetoableChangeListener(PROP_STUN_SERVER_ADDRESS,this);
    configurationService.removeVetoableChangeListener(PROP_STUN_SERVER_PORT,this);
    if (networkConfigurationWatcher != null)     networkConfigurationWatcher.stop();
  }
  finally {
    logger.logExit();
  }
}
