{
  try {
    logger.logEntry();
    StunAddress mappedAddress=null;
    if (detector != null && useStun) {
      try {
        mappedAddress=detector.getMappingFor(port);
        if (logger.isDebugEnabled())         logger.debug("For port:" + port + "a Stun server returned the "+ "following mapping ["+ mappedAddress);
      }
 catch (      StunException ex) {
        logger.error("Failed to retrive mapped address port:" + port,ex);
        mappedAddress=null;
      }
    }
    return mappedAddress;
  }
  finally {
    logger.logExit();
  }
}
