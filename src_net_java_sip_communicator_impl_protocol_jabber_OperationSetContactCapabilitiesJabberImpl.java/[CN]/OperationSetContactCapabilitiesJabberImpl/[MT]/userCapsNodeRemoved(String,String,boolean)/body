{
  OperationSetPresence opsetPresence=parentProvider.getOperationSet(OperationSetPresence.class);
  if (opsetPresence != null) {
    String jid=StringUtils.parseBareAddress(user);
    Contact contact=opsetPresence.findContactByID(jid);
    if (contact != null) {
      if (online) {
        fireContactCapabilitiesEvent(contact,ContactCapabilitiesEvent.SUPPORTED_OPERATION_SETS_CHANGED,getSupportedOperationSets(user,contact.getPresenceStatus().isOnline()));
      }
 else {
        fireContactCapabilitiesEvent(contact,ContactCapabilitiesEvent.SUPPORTED_OPERATION_SETS_CHANGED,getSupportedOperationSets(contact));
      }
    }
  }
}
