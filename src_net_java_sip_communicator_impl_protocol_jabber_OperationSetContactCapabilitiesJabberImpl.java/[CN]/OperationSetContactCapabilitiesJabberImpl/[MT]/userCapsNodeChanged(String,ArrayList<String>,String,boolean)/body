{
  OperationSetPresence opsetPresence=parentProvider.getOperationSet(OperationSetPresence.class);
  if (opsetPresence != null) {
    String bareJid=StringUtils.parseBareAddress(user);
    Contact contact=opsetPresence.findContactByID(bareJid);
    if (contact != null) {
      if (online) {
        fireContactCapabilitiesEvent(contact,ContactCapabilitiesEvent.SUPPORTED_OPERATION_SETS_CHANGED,getLargestSupportedOperationSet(fullJids));
      }
 else {
        fireContactCapabilitiesEvent(contact,ContactCapabilitiesEvent.SUPPORTED_OPERATION_SETS_CHANGED,getLargestSupportedOperationSet(fullJids));
      }
    }
  }
}
