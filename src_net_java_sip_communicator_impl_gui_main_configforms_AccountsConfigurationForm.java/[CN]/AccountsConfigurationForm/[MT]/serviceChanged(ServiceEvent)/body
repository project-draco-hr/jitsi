{
  Object service=GuiActivator.bundleContext.getService(event.getServiceReference());
  if (!(service instanceof ProtocolProviderService)) {
    return;
  }
  ProtocolProviderService pps=(ProtocolProviderService)service;
  if (event.getType() == ServiceEvent.REGISTERED) {
    String pName=pps.getProtocolName();
    JLabel protocolLabel=new JLabel();
    protocolLabel.setText(pName);
    protocolLabel.setIcon(new ImageIcon(Constants.getProtocolIcon(pName)));
    tableModel.addRow(new Object[]{pps,protocolLabel,pps.getAccountID().getUserID()});
  }
 else   if (event.getType() == ServiceEvent.UNREGISTERING) {
    tableModel.removeRow(tableModel.rowIndexOf(pps));
  }
}
