{
synchronized (initializationLock) {
    String password=(String)initializationProperties.get(AccountProperties.PASSWORD);
    session=new DefaultAppSession();
    aimSession=session.openAimSession(new Screenname(screenname));
    aimConnection=aimSession.openConnection(new AimConnectionProperties(new Screenname(screenname),password));
    aimConnStateListener=new AimConnStateListener();
    aimConnection.addStateListener(aimConnStateListener);
    aimIcbmListener=new AimIcbmListener();
    OperationSetPersistentPresence persistentPresence=new OperationSetPersistentPresenceIcqImpl(this,screenname);
    supportedOperationSets.put(OperationSetPersistentPresence.class.getName(),persistentPresence);
    isInitialized=true;
  }
}
