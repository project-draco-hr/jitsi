{
  RegistrationState oldRegistrationState=joustSimStateToRegistrationState(oldJoustSimState,oldJoustSimStateInfo);
  RegistrationState newRegistrationState=joustSimStateToRegistrationState(newJoustSimState,newJoustSimStateInfo);
  RegistrationStateChangeEvent event=new RegistrationStateChangeEvent(this,oldRegistrationState,newRegistrationState,reasonCode,reason);
  logger.debug("Dispatching " + event + " to "+ registrationListeners.size()+ " listeners.");
  for (int i=0; i < registrationListeners.size(); i++) {
    RegistrationStateChangeListener listener=(RegistrationStateChangeListener)registrationListeners.get(i);
    listener.registrationStateChanged(event);
  }
  logger.trace("Done.");
}
