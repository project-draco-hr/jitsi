{
synchronized (initializationLock) {
    this.accountID=accountID;
    if (IcqAccountID.isAIM(accountID.getAccountProperties()))     USING_ICQ=false;
    supportedOperationSets.put(OperationSetInstantMessageTransform.class.getName(),new OperationSetInstantMessageTransformImpl());
    OperationSetPersistentPresence persistentPresence=new OperationSetPersistentPresenceIcqImpl(this,screenname);
    supportedOperationSets.put(OperationSetPersistentPresence.class.getName(),persistentPresence);
    supportedOperationSets.put(OperationSetPresence.class.getName(),persistentPresence);
    OperationSetBasicInstantMessaging basicInstantMessaging=new OperationSetBasicInstantMessagingIcqImpl(this);
    supportedOperationSets.put(OperationSetBasicInstantMessaging.class.getName(),basicInstantMessaging);
    OperationSetMultiUserChatIcqImpl multiUserOpSet=new OperationSetMultiUserChatIcqImpl(this);
    supportedOperationSets.put(OperationSetMultiUserChat.class.getName(),multiUserOpSet);
    OperationSetTypingNotifications typingNotifications=new OperationSetTypingNotificationsIcqImpl(this);
    supportedOperationSets.put(OperationSetTypingNotifications.class.getName(),typingNotifications);
    if (USING_ICQ) {
      this.infoRetreiver=new InfoRetreiver(this,screenname);
      OperationSetServerStoredContactInfo serverStoredContactInfo=new OperationSetServerStoredContactInfoIcqImpl(infoRetreiver,this);
      supportedOperationSets.put(OperationSetServerStoredContactInfo.class.getName(),serverStoredContactInfo);
      OperationSetServerStoredAccountInfo serverStoredAccountInfo=new OperationSetServerStoredAccountInfoIcqImpl(infoRetreiver,screenname,this);
      supportedOperationSets.put(OperationSetServerStoredAccountInfo.class.getName(),serverStoredAccountInfo);
      OperationSetWebAccountRegistration webAccountRegistration=new OperationSetWebAccountRegistrationIcqImpl();
      supportedOperationSets.put(OperationSetWebAccountRegistration.class.getName(),webAccountRegistration);
      OperationSetWebContactInfo webContactInfo=new OperationSetWebContactInfoIcqImpl();
      supportedOperationSets.put(OperationSetWebContactInfo.class.getName(),webContactInfo);
      OperationSetExtendedAuthorizationsIcqImpl extendedAuth=new OperationSetExtendedAuthorizationsIcqImpl(this);
      supportedOperationSets.put(OperationSetExtendedAuthorizations.class.getName(),extendedAuth);
    }
    OperationSetFileTransferIcqImpl fileTransferOpSet=new OperationSetFileTransferIcqImpl(this);
    supportedOperationSets.put(OperationSetFileTransfer.class.getName(),fileTransferOpSet);
    isInitialized=true;
  }
}
