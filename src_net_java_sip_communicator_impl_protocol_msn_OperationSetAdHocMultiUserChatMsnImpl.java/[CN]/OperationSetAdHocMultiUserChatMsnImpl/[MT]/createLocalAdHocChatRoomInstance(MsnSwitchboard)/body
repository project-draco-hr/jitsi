{
  AdHocChatRoomMsnImpl adHocChatRoom=adHocChatRoomCache.get(switchboard);
  if (adHocChatRoom == null) {
    String name=String.valueOf(switchboard.hashCode());
    adHocChatRoom=new AdHocChatRoomMsnImpl(name,provider,switchboard);
    this.adHocChatRoomCache.put(switchboard,adHocChatRoom);
    Object attachment=switchboard.getAttachment();
    if (attachment != null && pendingAdHocChatRoomList.containsKey(attachment)) {
      pendingAdHocChatRoomList.remove(attachment);
    }
  }
  adHocChatRoom.join();
  return adHocChatRoom;
}
