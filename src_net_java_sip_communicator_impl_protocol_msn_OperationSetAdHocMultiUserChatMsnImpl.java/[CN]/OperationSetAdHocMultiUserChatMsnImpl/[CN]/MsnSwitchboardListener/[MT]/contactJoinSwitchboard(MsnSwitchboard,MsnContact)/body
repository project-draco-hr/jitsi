{
  if (!isGroupChatMessage(switchboard))   return;
  Object attachment=switchboard.getAttachment();
  try {
    AdHocChatRoomMsnImpl chatRoom=null;
    if (attachment == null)     chatRoom=(AdHocChatRoomMsnImpl)findRoom(switchboard);
    if (attachment != null && userCreatedAdHocChatRoomList.containsKey(attachment))     chatRoom=(AdHocChatRoomMsnImpl)userCreatedAdHocChatRoomList.get(attachment);
    if (chatRoom == null)     return;
    Contact msnContact=new ContactMsnImpl(contact,new ServerStoredContactListMsnImpl(new OperationSetPersistentPresenceMsnImpl(provider),provider),true,true);
    chatRoom.addAdHocChatRoomParticipant(contact.getId(),msnContact);
  }
 catch (  Exception e) {
    logger.error("Failed to join switchboard.",e);
  }
}
