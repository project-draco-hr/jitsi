{
  String userID=accountPanel.getUserID();
  if (userID == null || userID.trim().length() == 0)   throw new IllegalStateException("No user ID provided.");
  registration.setUserID(userID);
  char[] password=accountPanel.getPassword();
  if (password != null)   registration.setPassword(new String(password));
  registration.setRememberPassword(accountPanel.isRememberPassword());
  registration.setServerAddress(connectionPanel.getServerAddress());
  String displayName=accountPanel.getDisplayName();
  registration.setDisplayName(displayName);
  String authName=connectionPanel.getAuthenticationName();
  if (authName != null && authName.length() > 0)   registration.setAuthorizationName(authName);
  registration.setServerPort(connectionPanel.getServerPort());
  registration.setProxy(connectionPanel.getProxy());
  registration.setProxyPort(connectionPanel.getProxyPort());
  registration.setPreferredTransport(connectionPanel.getSelectedTransport());
  registration.setEnablePresence(presencePanel.isPresenceEnabled());
  registration.setForceP2PMode(presencePanel.isForcePeerToPeerMode());
  registration.setDefaultEncryption(connectionPanel.isDefaultEncryptionEnabled());
  registration.setSipZrtpAttribute(connectionPanel.isSipZrtpEnabled());
  registration.setPollingPeriod(presencePanel.getPollPeriod());
  registration.setSubscriptionExpiration(presencePanel.getSubscriptionExpiration());
  registration.setKeepAliveMethod(connectionPanel.getKeepAliveMethod());
  registration.setKeepAliveInterval(connectionPanel.getKeepAliveInterval());
  SIPAccRegWizzActivator.getUIService().getAccountRegWizardContainer().setBackButtonEnabled(true);
}
