{
  if (ioError) {
    return -1;
  }
  if (length < pkt.getLength()) {
    throw new IOException("Input buffer not big enough for " + String.valueOf(pkt.getLength()));
  }
  System.arraycopy(pkt.getBuffer(),pkt.getOffset(),inBuffer,offset,pkt.getLength());
  return pkt.getLength();
}
