{
  try {
    ServiceReference[] serRefs=GuiActivator.bundleContext.getServiceReferences(ProtocolProviderService.class.getName(),null);
    if (serRefs == null)     return;
    for (    ServiceReference serRef : serRefs) {
      ProtocolProviderService protocolProvider=(ProtocolProviderService)GuiActivator.bundleContext.getService(serRef);
      Object adHocMultiUserChatOpSet=protocolProvider.getOperationSet(OperationSetAdHocMultiUserChat.class);
      if (adHocMultiUserChatOpSet != null) {
        this.addChatProvider(protocolProvider);
      }
    }
  }
 catch (  InvalidSyntaxException e) {
    logger.error("Failed to obtain service references.",e);
  }
}
