{
  Timer connectionTimer;
synchronized (this) {
    if (this.connectionTimer == null)     this.connectionTimer=new Timer("Msn connection timer",true);
    connectionTimer=this.connectionTimer;
  }
  connectionTimer.schedule(new TimerTask(){
    @Override public void run(){
      if (!connected && msnProvider.isRegistered()) {
        msnProvider.unregister(false);
        msnProvider.fireRegistrationStateChanged(msnProvider.getRegistrationState(),RegistrationState.CONNECTION_FAILED,RegistrationStateChangeEvent.REASON_NOT_SPECIFIED,null);
      }
    }
  }
,20000);
  connected=false;
}
