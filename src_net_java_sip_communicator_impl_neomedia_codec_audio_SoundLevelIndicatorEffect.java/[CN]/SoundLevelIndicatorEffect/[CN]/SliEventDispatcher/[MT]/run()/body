{
  stopped=false;
  while (!stopped) {
    byte[] dataToProcess=null;
synchronized (this) {
      if (data == null)       try {
        wait();
      }
 catch (      InterruptedException ie) {
      }
      dataToProcess=data;
      data=null;
    }
    if (dataToProcess != null) {
      int newLevel=calculateCurrentSignalPower(dataToProcess,0,dataToProcess.length,levelRatio,maxOutputLevel,minOutputLevel,lastLevel);
      if (newLevel != lastLevel)       listener.soundLevelChanged(newLevel);
      lastLevel=newLevel;
    }
  }
}
