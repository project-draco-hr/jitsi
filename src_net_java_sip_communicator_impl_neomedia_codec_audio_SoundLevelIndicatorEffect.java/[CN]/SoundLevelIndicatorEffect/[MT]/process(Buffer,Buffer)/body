{
  byte[] b=new byte[inputBuffer.getLength()];
  System.arraycopy(inputBuffer.getData(),inputBuffer.getOffset(),b,0,b.length);
  outputBuffer.setData(b);
  outputBuffer.setData(b);
  outputBuffer.setFormat(inputBuffer.getFormat());
  outputBuffer.setLength(inputBuffer.getLength());
  outputBuffer.setOffset(inputBuffer.getOffset());
  outputBuffer.setHeader(inputBuffer.getHeader());
  outputBuffer.setSequenceNumber(inputBuffer.getSequenceNumber());
  outputBuffer.setTimeStamp(inputBuffer.getTimeStamp());
  outputBuffer.setFlags(inputBuffer.getFlags());
  outputBuffer.setDiscard(inputBuffer.isDiscard());
  outputBuffer.setEOM(inputBuffer.isEOM());
  outputBuffer.setDuration(inputBuffer.getDuration());
  int newLevel=calculateCurrentSignalPower(b,0,b.length,levelRatio);
  if (newLevel != lastLevel)   listener.soundLevelChanged(newLevel);
  lastLevel=newLevel;
  return BUFFER_PROCESSED_OK;
}
