{
  if (stopping || !started) {
    buffer.setLength(0);
    return;
  }
synchronized (parentStream) {
    if (bufferData == null) {
      parentStream.read(buffer);
    }
 else {
      buffer.setData(bufferData);
      buffer.setFlags(Buffer.FLAG_SYSTEM_TIME);
      buffer.setLength(bufferLength);
      buffer.setOffset(0);
      buffer.setTimeStamp(bufferTimeStamp);
    }
    bufferData=null;
  }
}
