{
  if (stopping || !started)   return new byte[0];
synchronized (parentStream) {
    byte[] res=buffer;
    if (res == null)     res=parentStream.read();
    buffer=null;
    return res;
  }
}
