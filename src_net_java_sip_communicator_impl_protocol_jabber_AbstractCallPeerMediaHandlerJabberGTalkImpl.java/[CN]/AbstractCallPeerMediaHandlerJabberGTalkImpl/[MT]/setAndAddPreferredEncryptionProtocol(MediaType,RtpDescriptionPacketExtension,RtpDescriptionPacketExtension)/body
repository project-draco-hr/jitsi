{
  List<String> preferredEncryptionProtocols=getPeer().getProtocolProvider().getAccountID().getSortedEnabledEncryptionProtocolList();
  for (  String preferredEncryptionProtocol : preferredEncryptionProtocols) {
    if (preferredEncryptionProtocol.equals(ProtocolProviderFactory.ENCRYPTION_PROTOCOL + ".ZRTP")) {
      boolean isZRTPAddedToDescription=setZrtpEncryptionToDescription(mediaType,localDescription,remoteDescription);
      if (isZRTPAddedToDescription) {
        addZRTPAdvertisedEncryptions(false,remoteDescription,mediaType);
        return;
      }
    }
 else     if (preferredEncryptionProtocol.equals(ProtocolProviderFactory.ENCRYPTION_PROTOCOL + ".SDES")) {
      addSDESAdvertisedEncryptions(false,remoteDescription,mediaType);
      if (setSDesEncryptionToDescription(mediaType,localDescription,remoteDescription)) {
        return;
      }
    }
  }
}
