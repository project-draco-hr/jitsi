{
  ConfigurationService config=NeomediaActivator.getConfigurationService();
  int bindRetries=config.getInt(BIND_RETRIES_PROPERTY_NAME,BIND_RETRIES_DEFAULT_VALUE);
  if (maxPort < 0)   maxPort=config.getInt(MAX_PORT_NUMBER_PROPERTY_NAME,6000);
  for (int i=0; i < bindRetries; i++) {
    if ((minPort < 0) || (minPort > maxPort))     minPort=config.getInt(MIN_PORT_NUMBER_PROPERTY_NAME,5000);
    int port=minPort++;
    try {
      return (bindAddr == null) ? new DatagramSocket(port) : new DatagramSocket(port,bindAddr);
    }
 catch (    SocketException se) {
      logger.warn("Retrying a bind because of a failure to bind to address " + bindAddr + " and port "+ port,se);
    }
  }
  return null;
}
