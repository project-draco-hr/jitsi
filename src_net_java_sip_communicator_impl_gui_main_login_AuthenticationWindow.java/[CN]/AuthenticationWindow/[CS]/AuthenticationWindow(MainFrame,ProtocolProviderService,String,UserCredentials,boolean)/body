{
  this.userCredentials=userCredentials;
  this.realm=realm;
  this.isUserNameEditable=isUserNameEditable;
  Image logoImage=null;
  if (protocolProvider != null) {
    ProtocolIcon protocolIcon=protocolProvider.getProtocolIcon();
    if (protocolIcon.isSizeSupported(ProtocolIcon.ICON_SIZE_64x64))     logoImage=ImageLoader.getBytesInImage(protocolIcon.getIcon(ProtocolIcon.ICON_SIZE_64x64));
 else     if (protocolIcon.isSizeSupported(ProtocolIcon.ICON_SIZE_48x48))     logoImage=ImageLoader.getBytesInImage(protocolIcon.getIcon(ProtocolIcon.ICON_SIZE_48x48));
    this.setTitle(GuiActivator.getResources().getI18NString("service.gui.AUTHENTICATION_WINDOW_TITLE",new String[]{protocolProvider.getProtocolName()}));
  }
  backgroundPanel=new LoginWindowBackground(logoImage);
  this.backgroundPanel.setBorder(BorderFactory.createEmptyBorder(20,5,5,5));
  this.backgroundPanel.setLayout(new FlowLayout(FlowLayout.RIGHT));
  this.backgroundPanel.setPreferredSize(new Dimension(420,230));
  this.getContentPane().setLayout(new BorderLayout());
  this.init();
  this.getContentPane().add(backgroundPanel,BorderLayout.CENTER);
  this.setResizable(false);
  this.setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);
  this.enableKeyActions();
}
