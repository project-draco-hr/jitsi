{
  Iterator<ProtocolProviderService> providers=mainFrame.getProtocolProviders();
  accountCombo.addItem(GuiActivator.getResources().getI18NString("service.gui.SELECT_ACCOUNT"));
  accountCombo.addItemListener(new ItemListener(){
    public void itemStateChanged(    ItemEvent e){
      updateAddButtonState();
    }
  }
);
  while (providers.hasNext()) {
    ProtocolProviderService provider=providers.next();
    boolean isHidden=provider.getAccountID().getAccountProperty(ProtocolProviderFactory.IS_PROTOCOL_HIDDEN) != null;
    if (isHidden)     continue;
    OperationSet opSet=provider.getOperationSet(OperationSetPresence.class);
    if (opSet == null)     continue;
    accountCombo.addItem(provider);
    if (isPreferredProvider(provider.getAccountID()))     accountCombo.setSelectedItem(provider);
  }
  if (accountCombo.getItemCount() == 2)   accountCombo.setSelectedIndex(1);
}
