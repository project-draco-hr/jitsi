{
  stopped=false;
  SimpleAudioLevelListener listenerToNotify=null;
  while (!stopped) {
    byte[] dataToProcess=null;
synchronized (this) {
      if (data == null) {
        try {
          wait();
          if (levelListener == null)           continue;
          listenerToNotify=levelListener;
        }
 catch (        InterruptedException ie) {
        }
      }
      dataToProcess=data;
      data=null;
    }
    if (dataToProcess != null) {
      int newLevel=AudioLevelCalculator.calculateCurrentSignalPower(dataToProcess,0,dataToProcess.length,SimpleAudioLevelListener.MAX_LEVEL,SimpleAudioLevelListener.MIN_LEVEL,lastLevel);
      if ((levelMap != null) && (ssrc != -1))       levelMap.putLevel(ssrc,newLevel);
      if (listenerToNotify != null)       listenerToNotify.audioLevelChanged(newLevel);
      lastLevel=newLevel;
    }
  }
}
