{
  int clockRateCount=clockRates.length;
  List<MediaFormat> mediaFormats=new ArrayList<MediaFormat>(clockRateCount);
  if (clockRateCount > 0)   for (  double clockRate : clockRates) {
    Format format;
switch (mediaType) {
case AUDIO:
      format=new AudioFormat(jmfEncoding);
    break;
case VIDEO:
  format=new VideoFormat(jmfEncoding);
break;
default :
throw new IllegalArgumentException("mediaType");
}
if (format != null) {
MediaFormat mediaFormat=MediaFormatImpl.createInstance(format,clockRate,formatParameters);
if (mediaFormat != null) mediaFormats.add(mediaFormat);
}
}
 else {
Format format;
switch (mediaType) {
case AUDIO:
format=new AudioFormat(jmfEncoding);
break;
case VIDEO:
format=new VideoFormat(jmfEncoding);
break;
default :
throw new IllegalArgumentException("mediaType");
}
if (format != null) {
MediaFormat mediaFormat=MediaFormatImpl.createInstance(format);
if (mediaFormat != null) mediaFormats.add(mediaFormat);
}
}
int mediaFormatCount=mediaFormats.size();
String rtpPayloadTypeStr=Integer.toString(rtpPayloadType);
if (mediaFormatCount > 0) rtpPayloadTypeStrToMediaFormats.put(rtpPayloadTypeStr,mediaFormats.toArray(new MediaFormat[mediaFormatCount]));
if (encoding != null) rtpPayloadTypeStrToEncodings.put(rtpPayloadTypeStr,encoding);
}
