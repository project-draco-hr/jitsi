{
  int clockRateCount=clockRates.length;
  List<MediaFormat> mediaFormats=new ArrayList<MediaFormat>(clockRateCount);
  if (clockRateCount > 0)   for (  double clockRate : clockRates) {
    Format format;
switch (mediaType) {
case AUDIO:
      format=new AudioFormat(jmfEncoding);
    break;
case VIDEO:
  format=new VideoFormat(jmfEncoding);
break;
default :
throw new IllegalArgumentException("mediaType");
}
if (format != null) {
MediaFormat mediaFormat=MediaFormatImpl.createInstance(format,clockRate,formatParameters,advancedAttributes);
if (mediaFormat != null) mediaFormats.add(mediaFormat);
}
}
 else {
Format format;
double clockRate;
switch (mediaType) {
case AUDIO:
AudioFormat audioFormat=new AudioFormat(jmfEncoding);
format=audioFormat;
clockRate=audioFormat.getSampleRate();
break;
case VIDEO:
format=new VideoFormat(jmfEncoding);
clockRate=VideoMediaFormatImpl.DEFAULT_CLOCK_RATE;
break;
default :
throw new IllegalArgumentException("mediaType");
}
if (format != null) {
MediaFormat mediaFormat=MediaFormatImpl.createInstance(format,clockRate,formatParameters,advancedAttributes);
if (mediaFormat != null) mediaFormats.add(mediaFormat);
}
}
if (mediaFormats.size() > 0) {
if (MediaFormat.RTP_PAYLOAD_TYPE_UNKNOWN == rtpPayloadType) rtpPayloadTypelessMediaFormats.addAll(mediaFormats);
 else rtpPayloadTypeStrToMediaFormats.put(Byte.toString(rtpPayloadType),mediaFormats.toArray(EMPTY_MEDIA_FORMATS));
jmfEncodingToEncodings.put(((MediaFormatImpl<? extends Format>)mediaFormats.get(0)).getJMFEncoding(),encoding);
}
}
