{
  double clockRate;
  if (format instanceof AudioFormat)   clockRate=((AudioFormat)format).getSampleRate();
 else   if (format instanceof VideoFormat)   clockRate=VideoMediaFormatImpl.DEFAULT_CLOCK_RATE;
 else   clockRate=Format.NOT_SPECIFIED;
  byte rtpPayloadType=getRTPPayloadType(format.getEncoding(),clockRate);
  if (MediaFormatImpl.RTP_PAYLOAD_TYPE_UNKNOWN != rtpPayloadType) {
    for (    MediaFormat mediaFormat : getMediaFormats(rtpPayloadType)) {
      MediaFormatImpl<? extends Format> mediaFormatImpl=(MediaFormatImpl<? extends Format>)mediaFormat;
      if (format.matches(mediaFormatImpl.getFormat()))       return mediaFormat;
    }
  }
  return null;
}
