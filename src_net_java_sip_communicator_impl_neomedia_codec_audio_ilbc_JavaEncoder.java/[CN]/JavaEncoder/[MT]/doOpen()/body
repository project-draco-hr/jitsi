{
  int mode=Constants.ILBC_MODE;
  enc=new ilbc_encoder(mode);
switch (mode) {
case 20:
    outputLength=ilbc_constants.NO_OF_BYTES_20MS;
  break;
case 30:
outputLength=ilbc_constants.NO_OF_BYTES_30MS;
break;
default :
throw new IllegalStateException("mode");
}
duration=mode * 1000000;
inputLength=enc.ULP_inst.blockl * 2;
prevInput=new byte[inputLength];
prevInputLength=0;
}
