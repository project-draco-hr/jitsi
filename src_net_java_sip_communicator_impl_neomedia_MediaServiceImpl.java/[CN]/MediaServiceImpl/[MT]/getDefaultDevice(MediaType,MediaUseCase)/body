{
  CaptureDeviceInfo captureDeviceInfo;
switch (mediaType) {
case AUDIO:
    captureDeviceInfo=getDeviceConfiguration().getAudioCaptureDevice();
  break;
case VIDEO:
captureDeviceInfo=getDeviceConfiguration().getVideoCaptureDevice(useCase);
break;
default :
captureDeviceInfo=null;
break;
}
MediaDevice defaultDevice=null;
if (captureDeviceInfo != null) {
for (MediaDevice device : getDevices(mediaType,useCase)) {
if ((device instanceof MediaDeviceImpl) && captureDeviceInfo.equals(((MediaDeviceImpl)device).getCaptureDeviceInfo())) {
defaultDevice=device;
break;
}
}
}
if (defaultDevice == null) switch (mediaType) {
case AUDIO:
defaultDevice=getNonSendAudioDevice();
break;
case VIDEO:
defaultDevice=getNonSendVideoDevice();
break;
default :
break;
}
if (defaultDevice != null && defaultDevice.getSupportedFormats().size() == 0) {
defaultDevice=null;
}
return defaultDevice;
}
