{
  if (!SwingUtilities.isEventDispatchThread()) {
    SwingUtilities.invokeLater(new Runnable(){
      public void run(){
        showPreview(previewContainer,preview,player);
      }
    }
);
    return;
  }
  previewContainer.removeAll();
  if (preview != null) {
    HierarchyListener hierarchyListener=new HierarchyListener(){
      private Window window;
      private WindowListener windowListener;
      public void dispose(){
        if (windowListener != null) {
          if (window != null) {
            window.removeWindowListener(windowListener);
            window=null;
          }
          windowListener=null;
        }
        preview.removeHierarchyListener(this);
        disposePlayer(player);
        previewContainer.remove(preview);
      }
      public void hierarchyChanged(      HierarchyEvent event){
        if ((event.getChangeFlags() & HierarchyEvent.DISPLAYABILITY_CHANGED) == 0)         return;
        if (!preview.isDisplayable()) {
          dispose();
          return;
        }
 else {
          player.start();
        }
        if (windowListener == null) {
          window=SwingUtilities.windowForComponent(preview);
          if (window != null) {
            windowListener=new WindowAdapter(){
              @Override public void windowClosing(              WindowEvent event){
                dispose();
              }
            }
;
            window.addWindowListener(windowListener);
          }
        }
      }
    }
;
    preview.addHierarchyListener(hierarchyListener);
    previewContainer.add(preview);
    previewContainer.revalidate();
    previewContainer.repaint();
  }
 else   disposePlayer(player);
}
