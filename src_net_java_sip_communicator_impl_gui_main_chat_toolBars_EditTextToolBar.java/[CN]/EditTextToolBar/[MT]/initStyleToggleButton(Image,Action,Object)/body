{
  final SIPCommToggleButton button=new SIPCommToggleButton(ImageLoader.getImage(ImageLoader.EDIT_TOOLBAR_BUTTON),ImageLoader.getImage(ImageLoader.EDIT_TOOLBAR_BUTTON),buttonImage,ImageLoader.getImage(ImageLoader.EDIT_TOOLBAR_BUTTON_PRESSED));
  button.setPreferredSize(new Dimension(18,18));
  button.setName(styleConstant.toString());
  button.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      ActionEvent event=new ActionEvent(chatEditorPane,ActionEvent.ACTION_PERFORMED,styleConstant.toString());
      action.actionPerformed(event);
      chatEditorPane.requestFocus();
    }
  }
);
  chatEditorPane.addCaretListener(new CaretListener(){
    public void caretUpdate(    CaretEvent e){
      selectButton(styleConstant,button);
    }
  }
);
  chatEditorPane.addKeyListener(new KeyAdapter(){
    public void keyTyped(    KeyEvent e){
      if (chatEditorPane.getText().length() > 0) {
        button.setSelected(((HTMLEditorKit)chatEditorPane.getEditorKit()).getInputAttributes().containsAttribute(styleConstant,true));
      }
    }
  }
);
  chatEditorPane.addMouseListener(new MouseAdapter(){
    public void mouseClicked(    MouseEvent e){
      selectButton(styleConstant,button);
    }
  }
);
  return button;
}
