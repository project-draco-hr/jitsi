{
  if (chatEditorPane.getDocument().getLength() == 0) {
    return;
  }
  int index=chatEditorPane.getCaretPosition();
  if (index == 0) {
    index=1;
  }
  AttributeSet attributes=((HTMLDocument)chatEditorPane.getDocument()).getCharacterElement(index - 1).getAttributes();
  if (attributes.getAttribute(styleConstant) != null) {
    Object selectedAttribute=attributes.getAttribute(styleConstant);
    colorLabel.setBackground((Color)selectedAttribute);
  }
 else {
    colorLabel.setBackground(Color.BLACK);
  }
}
