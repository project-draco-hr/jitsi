{
  for (  Map.Entry<ProtocolProviderService,OperationSetPresence> e : ppss.entrySet()) {
    ProtocolProviderService pps=e.getKey();
    OperationSetContactCapabilities contactCapabilitiesOpSet=pps.getOperationSet(OperationSetContactCapabilities.class);
    for (    Contact contact : Messenger.findContactsBySigninName(pps,e.getValue(),signinName)) {
      if ((contactCapabilitiesOpSet == null) || (contactCapabilitiesOpSet.getOperationSet(contact,opSetClass) != null))       contacts.add(contact);
    }
  }
}
