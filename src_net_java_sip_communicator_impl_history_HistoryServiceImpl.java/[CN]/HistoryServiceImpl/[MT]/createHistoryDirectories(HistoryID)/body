{
  String[] idComponents=id.getID();
  String[] dirs=new String[idComponents.length + 1];
  dirs[0]="history";
  System.arraycopy(idComponents,0,dirs,1,dirs.length - 1);
  File directory=null;
  try {
    directory=this.fileAccessService.getPrivatePersistentDirectory(dirs);
  }
 catch (  Exception e) {
    throw (IOException)new IOException("Could not create history due to file system error").initCause(e);
  }
  if (!directory.exists() && !directory.mkdirs()) {
    throw new IOException("Could not create requested history service files:" + directory.getAbsolutePath());
  }
  return directory;
}
