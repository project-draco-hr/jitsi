{
  Thread t=Thread.currentThread();
  while (keepRunning & this.session.isLoggedIn() & t.isAlive()& !t.isInterrupted()) {
    try {
      this.session.getBuddyList().update();
      this.retries=0;
    }
 catch (    BrokenFacebookProtocolException e) {
      try {
        this.session.logout();
      }
 catch (      Exception e1) {
      }
      throw new IllegalStateException(e);
    }
catch (    IOException e) {
      if (this.retries > 3) {
        try {
          this.session.logout();
        }
 catch (        Exception e1) {
          throw new RuntimeException(e1);
        }
      }
 else {
        this.retries++;
      }
    }
catch (    FacebookErrorException e) {
    }
    try {
      Thread.sleep(59 * 1000);
    }
 catch (    InterruptedException e) {
    }
  }
}
