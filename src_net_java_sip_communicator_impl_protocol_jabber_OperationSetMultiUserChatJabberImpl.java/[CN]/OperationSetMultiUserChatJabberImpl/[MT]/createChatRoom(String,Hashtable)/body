{
  assertSupportedAndConnected();
  roomName=getCanonicalRoomName(roomName);
  ChatRoom room=findRoom(roomName);
  if (room != null)   throw new OperationFailedException("There is already a room with this name.",OperationFailedException.IDENTIFICATION_CONFLICT);
  MultiUserChat muc=new MultiUserChat(getXmppConnection(),roomName);
  try {
    muc.create(getXmppConnection().getUser());
  }
 catch (  XMPPException ex) {
    logger.error("Failed to create chat room.",ex);
    throw new OperationFailedException("Failed to create chat room",ex.getXMPPError().getCode(),ex.getCause());
  }
  return createLocalChatRoomInstance(muc);
}
