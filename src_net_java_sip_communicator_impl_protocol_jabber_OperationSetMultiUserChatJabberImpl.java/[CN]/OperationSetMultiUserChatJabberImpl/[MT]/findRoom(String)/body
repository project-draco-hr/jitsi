{
  assertSupportedAndConnected();
  String canonicalRoomName=getCanonicalRoomName(roomName);
  ChatRoom room=chatRoomCache.get(canonicalRoomName);
  if (room == null) {
    try {
      Collection<HostedRoom> co=MultiUserChat.getHostedRooms(getXmppConnection(),canonicalRoomName);
      for (      HostedRoom ho : co) {
        if (ho.getJid().equals(canonicalRoomName)) {
          MultiUserChat muc=new MultiUserChat(getXmppConnection(),canonicalRoomName);
          room=new ChatRoomJabberImpl(muc,jabberProvider);
          chatRoomCache.put(canonicalRoomName,room);
          break;
        }
      }
    }
 catch (    XMPPException ex) {
      if (!ex.getXMPPError().getCondition().equals(XMPPError.Condition.item_not_found.toString())) {
        MultiUserChat muc=new MultiUserChat(getXmppConnection(),canonicalRoomName);
        room=new ChatRoomJabberImpl(muc,jabberProvider);
        chatRoomCache.put(canonicalRoomName,room);
      }
      logger.debug("failed to find room " + canonicalRoomName + "\n",ex);
    }
  }
  return room;
}
