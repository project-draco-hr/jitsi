{
  super(chatWindow);
  this.metaContact=metaContact;
  ChatContact chatContact=new ChatContact(metaContact,protocolContact);
  getChatContactListPanel().addContact(chatContact);
  setupListeners(true);
  contactSelectorBox=new ProtocolContactSelectorBox(this,metaContact,protocolContact);
  JPanel sendPanel=getChatSendPanel().getSendPanel();
  sendPanel.add(contactSelectorBox,0);
  sendPanel.add(new JLabel(Messages.getI18NString("sendVia").getText()),0);
  Object smsOpSet=protocolContact.getProtocolProvider().getOperationSet(OperationSetSmsMessaging.class);
  if (smsOpSet == null)   sendSmsCheckBox.setEnabled(false);
  ActionMap amap=this.getActionMap();
  amap.put("ChangeProtocol",new ChangeProtocolAction());
  InputMap imap=this.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW);
  imap.put(KeyStroke.getKeyStroke(KeyEvent.VK_P,KeyEvent.CTRL_DOWN_MASK),"ChangeProtocol");
}
