{
  Contact sourceContact=evt.getSourceContact();
  MainFrame mainFrame=getChatWindow().getMainFrame();
  MetaContact sourceMetaContact=mainFrame.getContactList().findMetaContactByContact(sourceContact);
  if (sourceMetaContact != null && metaContact.equals(sourceMetaContact)) {
    contactSelectorBox.updateContactStatus(sourceContact);
    PresenceStatus status=contactSelectorBox.getSelectedProtocolContact().getPresenceStatus();
    getChatContactListPanel().updateContactStatus(metaContact);
    String message=getChatConversationPanel().processMessage(this.metaContact.getDisplayName(),new Date(System.currentTimeMillis()),Constants.SYSTEM_MESSAGE,Messages.getI18NString("statusChangedChatMessage",new String[]{status.getStatusName()}).getText());
    getChatConversationPanel().appendMessageToEnd(message);
    if (Constants.TABBED_CHAT_WINDOW) {
      if (getChatWindow().getChatTabCount() > 0) {
        getChatWindow().setTabIcon(this,new ImageIcon(Constants.getStatusIcon(status)));
      }
    }
  }
}
