{
synchronized (packetQueue) {
    while (packetQueue.size() >= MAX_PACKETS_PER_MILLIS_POLICY_PACKET_QUEUE_CAPACITY) {
      try {
        packetQueue.wait();
      }
 catch (      InterruptedException iex) {
      }
    }
    packetQueue.add(packet);
    if (sendThread == null) {
      sendThread=new Thread(getClass().getName()){
        @Override public void run(){
          runInSendThread();
        }
      }
;
      sendThread.setDaemon(true);
      sendThread.start();
    }
    packetQueue.notifyAll();
  }
}
