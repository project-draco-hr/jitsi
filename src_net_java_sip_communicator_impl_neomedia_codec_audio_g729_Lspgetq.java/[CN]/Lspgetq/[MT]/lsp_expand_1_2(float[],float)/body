{
  int M=Ld8k.M;
  int j;
  float diff, tmp;
  for (j=1; j < M; j++) {
    diff=buf[j - 1] - buf[j];
    tmp=(diff + gap) * 0.5f;
    if (tmp > 0) {
      buf[j - 1]-=tmp;
      buf[j]+=tmp;
    }
  }
}
