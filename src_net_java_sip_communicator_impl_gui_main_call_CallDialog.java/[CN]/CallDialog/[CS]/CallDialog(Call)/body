{
  this.call=call;
  this.setCallTitle(null);
  this.isLastConference=isConference();
  if (isLastConference) {
    this.callPanel=new ConferenceCallPanel(this,call);
  }
 else {
    CallPeer callPeer=null;
    if (call.getCallPeers().hasNext())     callPeer=call.getCallPeers().next();
    if (callPeer != null)     this.callPanel=new OneToOneCallPanel(this,call,callPeer);
    this.setPreferredSize(new Dimension(500,400));
  }
  call.addCallChangeListener(this);
  TransparentPanel buttonsPanel=new TransparentPanel(new BorderLayout(5,5));
  TransparentPanel settingsPanel=new TransparentPanel();
  SIPCommButton hangupButton=new SIPCommButton(ImageLoader.getImage(ImageLoader.HANGUP_BUTTON_BG));
  SIPCommButton dialButton=new SIPCommButton(ImageLoader.getImage(ImageLoader.CALL_SETTING_BUTTON_BG),ImageLoader.getImage(ImageLoader.DIAL_BUTTON));
  SIPCommButton conferenceButton=new SIPCommButton(ImageLoader.getImage(ImageLoader.CALL_SETTING_BUTTON_BG),ImageLoader.getImage(ImageLoader.ADD_TO_CALL_BUTTON));
  holdButton=new HoldButton(call);
  muteButton=new MuteButton(call);
  videoButton=new LocalVideoButton(call);
  dialButton.setName(DIAL_BUTTON);
  dialButton.setToolTipText(GuiActivator.getResources().getI18NString("service.gui.DIALPAD"));
  dialButton.addActionListener(this);
  dialButton.addMouseListener(this);
  conferenceButton.setName(CONFERENCE_BUTTON);
  conferenceButton.setToolTipText(GuiActivator.getResources().getI18NString("service.gui.CREATE_CONFERENCE_CALL"));
  conferenceButton.addActionListener(this);
  conferenceButton.addMouseListener(this);
  contentPane.add(callPanel,BorderLayout.CENTER);
  contentPane.add(buttonsPanel,BorderLayout.SOUTH);
  hangupButton.setName(HANGUP_BUTTON);
  hangupButton.setToolTipText(GuiActivator.getResources().getI18NString("service.gui.HANG_UP"));
  hangupButton.addActionListener(this);
  settingsPanel.add(dialButton);
  settingsPanel.add(conferenceButton);
  settingsPanel.add(holdButton);
  settingsPanel.add(muteButton);
  if (!isLastConference)   settingsPanel.add(videoButton);
  buttonsPanel.add(settingsPanel,BorderLayout.WEST);
  buttonsPanel.add(hangupButton,BorderLayout.EAST);
  buttonsPanel.setBorder(new ExtendedEtchedBorder(EtchedBorder.LOWERED,1,0,0,0));
  this.timer=new Timer(1000,new CallTimerListener());
  this.timer.setRepeats(true);
}
