{
  JMenuItem menuItem=(JMenuItem)e.getSource();
  ChatPanel chatPanel=sendPanel.getChatPanel();
  MainFrame mainFrame=chatPanel.getChatWindow().getMainFrame();
  Enumeration i=contactsTable.keys();
  while (i.hasMoreElements()) {
    Contact protocolContact=(Contact)i.nextElement();
    if (contactsTable.get(protocolContact).equals(menuItem)) {
      OperationSetBasicInstantMessaging im=mainFrame.getProtocolIM(protocolContact.getProtocolProvider());
      OperationSetTypingNotifications tn=mainFrame.getTypingNotifications(protocolContact.getProtocolProvider());
      chatPanel.setImOperationSet(im);
      chatPanel.setTnOperationSet(tn);
      chatPanel.setProtocolContact(protocolContact);
      setSelected(protocolContact,menuItem.getIcon());
      break;
    }
  }
}
