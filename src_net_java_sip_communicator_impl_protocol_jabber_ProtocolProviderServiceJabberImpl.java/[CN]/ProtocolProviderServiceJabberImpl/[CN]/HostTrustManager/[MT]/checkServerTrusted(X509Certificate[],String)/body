{
  if (certChecked)   return;
  abortConnecting=true;
  try {
    certChecked=true;
    tm.checkServerTrusted(chain,authType);
  }
 catch (  CertificateException e) {
    fireRegistrationStateChanged(getRegistrationState(),RegistrationState.CONNECTION_FAILED,RegistrationStateChangeEvent.REASON_USER_REQUEST,"Not trusted certificate");
    throw e;
  }
  if (abortConnecting) {
    abortConnectingAndReconnect=true;
    return;
  }
 else {
    new Thread(new Runnable(){
      public void run(){
        reregister(SecurityAuthority.CONNECTION_FAILED);
      }
    }
).start();
    return;
  }
}
