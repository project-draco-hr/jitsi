{
  logger.error("connectionClosedOnError " + exception.getLocalizedMessage());
  if (exception instanceof XMPPException) {
    StreamError err=((XMPPException)exception).getStreamError();
    if (err != null && err.getCode().equals(XMPPError.Condition.conflict.toString())) {
      fireRegistrationStateChanged(getRegistrationState(),RegistrationState.CONNECTION_FAILED,RegistrationStateChangeEvent.REASON_MULTIPLE_LOGINS,"Connecting multiple times with the same resource");
      return;
    }
  }
 else   if (exception instanceof SSLHandshakeException && exception.getCause() instanceof CertificateException) {
    return;
  }
  if (!reconnecting)   reregister(SecurityAuthority.CONNECTION_FAILED);
 else   reconnecting=false;
}
