{
  Iterator pluginComponents=GuiActivator.getUIService().getComponentsForContainer(UIService.CONTAINER_MAIN_TOOL_BAR);
  if (pluginComponents.hasNext())   this.addSeparator();
  while (pluginComponents.hasNext()) {
    Component c=(Component)pluginComponents.next();
    this.add(c);
    if (c instanceof ContactAwareComponent) {
      Object selectedValue=mainFrame.getContactListPanel().getContactList().getSelectedValue();
      if (selectedValue instanceof MetaContact) {
        ((ContactAwareComponent)c).setCurrentContact((MetaContact)selectedValue);
      }
 else       if (selectedValue instanceof MetaContactGroup) {
        ((ContactAwareComponent)c).setCurrentContactGroup((MetaContactGroup)selectedValue);
      }
    }
    this.revalidate();
    this.repaint();
  }
}
