{
  String mediaName=null;
  if (mediaType == MediaType.AUDIO) {
    mediaName="rtp";
  }
 else   if (mediaType == MediaType.VIDEO) {
    mediaName="video_rtp";
  }
 else {
    logger.error("Not an audio/rtp mediatype");
    return null;
  }
  IceMediaStream stream=iceAgent.getStream(mediaName);
  if (stream != null) {
    DatagramSocket[] streamConnectorSockets=new DatagramSocket[COMPONENT_IDS.length];
    int streamConnectorSocketCount=0;
    for (int i=0; i < COMPONENT_IDS.length; i++) {
      Component component=stream.getComponent(COMPONENT_IDS[i]);
      if (component != null) {
        CandidatePair selectedPair=component.getSelectedPair();
        if (selectedPair != null) {
          DatagramSocket streamConnectorSocket=selectedPair.getLocalCandidate().getSocket();
          if (streamConnectorSocket != null) {
            streamConnectorSockets[i]=streamConnectorSocket;
            streamConnectorSocketCount++;
          }
        }
      }
    }
    if (streamConnectorSocketCount > 0) {
      if (mediaName.equals("rtp") && streamConnectorSocketCount == 1) {
        try {
          streamConnectorSockets[1]=new DatagramSocket();
        }
 catch (        Exception e) {
        }
      }
      return streamConnectorSockets;
    }
  }
  return null;
}
