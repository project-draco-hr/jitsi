{
  Contact destContact=evt.getDestinationContact();
  Contact containedContact=metaContact.getContact(destContact.getAddress(),destContact.getProtocolProvider());
  if (containedContact != null) {
    if (lastDate != null && GuiUtils.compareDates(lastDate,evt.getTimestamp()) == 0) {
      HTMLDocument document=(HTMLDocument)dateHistoryTable.get(lastDate);
      if (currentDocument.equals(document)) {
        String processedMessage=chatConvPanel.processMessage(destContact.getDisplayName(),evt.getTimestamp(),Constants.OUTGOING_MESSAGE,evt.getSourceMessage().getContent(),searchKeyword);
        chatConvPanel.appendMessageToEnd(processedMessage);
      }
    }
 else     if (lastDate == null || GuiUtils.compareDates(lastDate,evt.getTimestamp()) < 0) {
      long milisecondsPerDay=24 * 60 * 60* 1000;
      Date date=new Date(evt.getTimestamp().getTime() - evt.getTimestamp().getTime() % milisecondsPerDay);
      datesVector.add(date);
      datesPanel.addDate(date);
      this.lastDate=date;
    }
  }
}
