{
  Collection msgList=this.msgHistory.findByEndDate(this.metaContact,new Date(System.currentTimeMillis()));
  Iterator i=msgList.iterator();
  Date date=null;
  while (i.hasNext()) {
    Object o=i.next();
    if (o instanceof MessageDeliveredEvent) {
      MessageDeliveredEvent evt=(MessageDeliveredEvent)o;
      date=evt.getTimestamp();
    }
 else     if (o instanceof MessageReceivedEvent) {
      MessageReceivedEvent evt=(MessageReceivedEvent)o;
      date=evt.getTimestamp();
    }
    if (!datesPanel.containsDate(date)) {
      datesPanel.addDate(date);
    }
  }
}
