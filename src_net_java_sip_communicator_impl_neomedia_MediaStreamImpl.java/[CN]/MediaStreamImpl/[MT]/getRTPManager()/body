{
  if (rtpManager == null) {
    RTPConnector rtpConnector=getRTPConnector();
    if (rtpConnector == null)     throw new IllegalStateException("rtpConnector");
    rtpManager=RTPManager.newInstance();
    registerCustomCodecFormats(rtpManager);
    rtpManager.addReceiveStreamListener(this);
    rtpManager.addSendStreamListener(this);
    rtpManager.addSessionListener(this);
    rtpManager.addRemoteListener(this);
    BufferControl bc=(BufferControl)rtpManager.getControl(BufferControl.class.getName());
    if (bc != null)     configureRTPManagerBufferControl(rtpManager,bc);
    rtpManager.initialize(rtpConnector);
    setLocalSourceID(((RTPSessionMgr)rtpManager).getLocalSSRC());
  }
  return rtpManager;
}
