{
  setDevice(device);
  rtpConnector=new RTPTransformConnector(connector){
    @Override protected TransformOutputStream createDataOutputStream() throws IOException {
      TransformOutputStream dataOutputStream=super.createDataOutputStream();
      if (dataOutputStream != null)       configureDataOutputStream(dataOutputStream);
      return dataOutputStream;
    }
    @Override protected TransformInputStream createDataInputStream() throws IOException {
      TransformInputStream dataInputStream=super.createDataInputStream();
      if (dataInputStream != null)       configureDataInputStream(dataInputStream);
      return dataInputStream;
    }
  }
;
  this.zrtpControl=(zrtpControl == null) ? new ZrtpControlImpl() : zrtpControl;
  this.zrtpControl.setConnector(rtpConnector);
  rtpConnector.setEngine(createTransformEngineChain());
}
