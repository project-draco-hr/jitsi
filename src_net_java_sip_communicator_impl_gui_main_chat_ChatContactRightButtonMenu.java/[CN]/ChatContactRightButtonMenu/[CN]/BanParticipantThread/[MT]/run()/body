{
  try {
    chatRoom.banParticipant((ChatRoomMember)chatContact.getDescriptor(),reason);
  }
 catch (  OperationFailedException e) {
    logger.error("Failed to ban participant.",e);
    String errorTitle=GuiActivator.getResources().getI18NString("service.gui.BAN_FAILED");
    if (e.getErrorCode() == OperationFailedException.NOT_ENOUGH_PRIVILEGES) {
      new ErrorDialog(chatPanel.getChatWindow(),errorTitle,GuiActivator.getResources().getI18NString("service.gui.BAN_FAILED_NOT_ENOUGH_PERMISSIONS",new String[]{chatContact.getName()}),e).showDialog();
    }
 else     if (e.getErrorCode() == OperationFailedException.FORBIDDEN) {
      new ErrorDialog(chatPanel.getChatWindow(),errorTitle,GuiActivator.getResources().getI18NString("service.gui.BAN_FAILED_NOT_ALLOWED",new String[]{chatContact.getName()}),e).showDialog();
    }
 else {
      new ErrorDialog(chatPanel.getChatWindow(),errorTitle,GuiActivator.getResources().getI18NString("service.gui.BAN_FAILED_GENERAL_ERROR",new String[]{chatContact.getName()}),e).showDialog();
    }
  }
}
