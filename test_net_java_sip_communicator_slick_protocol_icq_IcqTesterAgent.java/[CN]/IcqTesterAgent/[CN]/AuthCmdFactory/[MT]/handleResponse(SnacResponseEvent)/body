{
  if (e.getSnacCommand() instanceof SsiDataModResponse) {
    SsiDataModResponse dataModResponse=(SsiDataModResponse)e.getSnacCommand();
    int[] results=dataModResponse.getResults();
    List items=((ItemsCmd)e.getRequest().getCommand()).getItems();
    items=new LinkedList(items);
    for (int i=0; i < results.length; i++) {
      int result=results[i];
      if (result == SsiDataModResponse.RESULT_ICQ_AUTH_REQUIRED) {
        isErrorAddingReceived=true;
        SsiItem buddyItem=(SsiItem)items.get(i);
        String uinToAskForAuth=buddyItem.getName();
        logger.trace("finding buddy : " + uinToAskForAuth);
        Vector buddiesToBeAdded=new Vector();
        BuddyAwaitingAuth newBuddy=new BuddyAwaitingAuth(buddyItem);
        buddiesToBeAdded.add(newBuddy);
        CreateItemsCmd addCMD=new CreateItemsCmd(buddiesToBeAdded);
        logger.trace("Adding buddy as awaiting authorization");
        MutableBuddyList joustSimBuddyList=(MutableBuddyList)conn.getSsiService().getBuddyList();
        LayoutEventCollector evtCollector=new LayoutEventCollector();
        joustSimBuddyList.addLayoutListener(evtCollector);
        conn.getSsiService().sendSnac(addCMD);
        evtCollector.waitForANewBuddy(15000);
        joustSimBuddyList.removeLayoutListener(evtCollector);
        logger.trace("Finished - Adding buddy as awaiting authorization");
        conn.getSsiService().sendSnac(new RequestAuthCmd(uinToAskForAuth,requestReasonStr));
      }
    }
  }
}
