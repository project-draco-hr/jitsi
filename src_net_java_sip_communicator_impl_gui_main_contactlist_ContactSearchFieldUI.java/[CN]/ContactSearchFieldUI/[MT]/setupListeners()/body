{
  providerRegListener=new ProtocolProviderRegListener();
  GuiActivator.bundleContext.addServiceListener(providerRegListener);
  for (  ProtocolProviderFactory providerFactory : GuiActivator.getProtocolProviderFactories().values()) {
    for (    AccountID accountID : providerFactory.getRegisteredAccounts()) {
      ProtocolProviderService pps=(ProtocolProviderService)GuiActivator.bundleContext.getService(providerFactory.getProviderForAccount(accountID));
      providers.add(pps);
      pps.addRegistrationStateChangeListener(providerRegistrationStateListener);
    }
  }
  setCallButtonEnabled(isCallButtonEnabled);
}
