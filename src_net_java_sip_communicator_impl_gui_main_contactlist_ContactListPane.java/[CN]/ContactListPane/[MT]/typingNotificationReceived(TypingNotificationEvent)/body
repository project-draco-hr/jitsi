{
  if (typingTimer.isRunning())   typingTimer.stop();
  String notificationMsg="";
  MetaContact metaContact=mainFrame.getContactList().findMetaContactByContact(evt.getSourceContact());
  String contactName=metaContact.getDisplayName() + " ";
  if (contactName.equals("")) {
    contactName=GuiActivator.getResources().getI18NString("service.gui.UNKNOWN") + " ";
  }
  int typingState=evt.getTypingState();
  if (typingState == OperationSetTypingNotifications.STATE_TYPING) {
    notificationMsg=GuiActivator.getResources().getI18NString("service.gui.CONTACT_TYPING",new String[]{contactName});
    typingTimer.setMetaContact(metaContact);
    typingTimer.start();
    if (!chatWindowManager.isChatOpenedForContact(metaContact)) {
      this.fireProactiveNotification(evt.getSourceContact());
      return;
    }
  }
 else   if (typingState == OperationSetTypingNotifications.STATE_PAUSED) {
    notificationMsg=GuiActivator.getResources().getI18NString("service.gui.CONTACT_PAUSED_TYPING",new String[]{contactName});
    typingTimer.setMetaContact(metaContact);
    typingTimer.start();
  }
 else   if (typingState == OperationSetTypingNotifications.STATE_STOPPED) {
    notificationMsg="";
  }
 else   if (typingState == OperationSetTypingNotifications.STATE_STALE) {
    notificationMsg=GuiActivator.getResources().getI18NString("service.gui.CONTACT_TYPING_STATE_STALE");
  }
 else   if (typingState == OperationSetTypingNotifications.STATE_UNKNOWN) {
  }
  this.setChatNotificationMsg(metaContact,notificationMsg);
}
