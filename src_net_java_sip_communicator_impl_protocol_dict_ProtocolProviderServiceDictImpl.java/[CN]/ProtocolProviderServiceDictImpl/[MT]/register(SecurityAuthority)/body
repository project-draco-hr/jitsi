{
  boolean connected=connect();
  if (connected) {
    fireRegistrationStateChanged(getRegistrationState(),RegistrationState.REGISTERED,RegistrationStateChangeEvent.REASON_USER_REQUEST,null);
    currentRegistrationState=RegistrationState.REGISTERED;
  }
 else {
    fireRegistrationStateChanged(getRegistrationState(),RegistrationState.CONNECTION_FAILED,RegistrationStateChangeEvent.REASON_SERVER_NOT_FOUND,null);
    currentRegistrationState=RegistrationState.UNREGISTERED;
  }
}
