{
  ClientTransaction clientTransaction=responseEvent.getClientTransaction();
  Response response=responseEvent.getResponse();
  CSeqHeader cseq=((CSeqHeader)response.getHeader(CSeqHeader.NAME));
  if (cseq == null) {
    logger.error("An incoming response did not contain a CSeq header");
  }
  String method=cseq.getMethod();
  SipProvider sourceProvider=(SipProvider)responseEvent.getSource();
  int responseStatusCode=response.getStatusCode();
  boolean processed=false;
switch (responseStatusCode) {
case Response.OK:
    if (method.equals(Request.INVITE)) {
      processInviteOK(clientTransaction,response);
      processed=true;
    }
  break;
case Response.RINGING:
processRinging(clientTransaction,response);
processed=true;
break;
case Response.SESSION_PROGRESS:
processSessionProgress(clientTransaction,response);
processed=true;
break;
case Response.TRYING:
processTrying(clientTransaction,response);
processed=true;
break;
case Response.BUSY_HERE:
case Response.BUSY_EVERYWHERE:
case Response.DECLINE:
processBusyHere(clientTransaction,response);
processed=true;
break;
case Response.ACCEPTED:
if (Request.REFER.equals(method)) {
processReferAccepted(clientTransaction,response);
processed=true;
}
break;
case Response.UNAUTHORIZED:
case Response.PROXY_AUTHENTICATION_REQUIRED:
processAuthenticationChallenge(clientTransaction,response,sourceProvider);
processed=true;
break;
default :
if ((responseStatusCode / 100 == 4) || (responseStatusCode / 100 == 5) || (responseStatusCode / 100 == 6)) {
CallParticipantSipImpl callParticipant=activeCallsRepository.findCallParticipant(clientTransaction.getDialog());
logger.error("Received error: " + response.getStatusCode() + " "+ response.getReasonPhrase());
if (callParticipant != null) callParticipant.setState(CallParticipantState.FAILED);
processed=true;
}
break;
}
return processed;
}
