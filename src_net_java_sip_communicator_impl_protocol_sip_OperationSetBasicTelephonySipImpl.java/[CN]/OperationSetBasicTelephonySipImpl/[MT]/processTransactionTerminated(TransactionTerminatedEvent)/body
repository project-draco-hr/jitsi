{
  Transaction transaction;
  if (transactionTerminatedEvent.isServerTransaction()) {
    transaction=transactionTerminatedEvent.getServerTransaction();
  }
 else {
    transaction=transactionTerminatedEvent.getClientTransaction();
  }
  CallParticipantSipImpl callParticipant=activeCallsRepository.findCallParticipant(transaction.getDialog());
  if (callParticipant == null) {
    return;
  }
  CallSipImpl call=(CallSipImpl)callParticipant.getCall();
  callParticipant.setState(CallParticipantState.DISCONNECTED);
}
