{
  CallParticipantSipImpl callParticipant=activeCallsRepository.findCallParticipant(clientTransaction.getDialog());
  if (callParticipant == null) {
    logger.debug("Received an authorization challenge for no " + "participant. authorizing anyway.");
  }
  try {
    logger.debug("Authenticating an INVITE request.");
    ClientTransaction retryTran=protocolProvider.getSipSecurityManager().handleChallenge(response,clientTransaction,jainSipProvider);
    if (retryTran == null) {
      logger.trace("No password supplied or error occured!");
      return;
    }
    if (callParticipant != null) {
      callParticipant.setDialog(retryTran.getDialog());
      callParticipant.setFirstTransaction(retryTran);
      callParticipant.setJainSipProvider(jainSipProvider);
    }
    retryTran.sendRequest();
  }
 catch (  Exception exc) {
    logErrorAndFailCallParticipant("We failed to authenticate an INVITE request.",exc,callParticipant);
  }
}
