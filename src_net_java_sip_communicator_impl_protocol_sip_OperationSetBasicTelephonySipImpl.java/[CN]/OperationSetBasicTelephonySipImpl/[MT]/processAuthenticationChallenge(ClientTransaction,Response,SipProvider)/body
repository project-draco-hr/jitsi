{
  CallParticipantSipImpl callParticipant=activeCallsRepository.findCallParticipant(clientTransaction.getDialog());
  try {
    logger.debug("Authenticating an INVITE request.");
    ClientTransaction retryTran=protocolProvider.getSipSecurityManager().handleChallenge(response,clientTransaction,jainSipProvider);
    callParticipant.setDialog(retryTran.getDialog());
    callParticipant.setFirstTransaction(retryTran);
    callParticipant.setJainSipProvider(jainSipProvider);
    retryTran.sendRequest();
    return;
  }
 catch (  Exception exc) {
    logger.error("We failed to authenticate an INVITE request.",exc);
    callParticipant.setState(CallParticipantState.FAILED);
  }
}
