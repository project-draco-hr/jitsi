{
  Request request=callParticipant.getFirstTransaction().getRequest();
  Request bye=null;
  try {
    bye=callParticipant.getDialog().createRequest(Request.BYE);
  }
 catch (  SipException ex) {
    logger.error("Failed to create bye request!",ex);
    throw new OperationFailedException("Failed to create bye request!",OperationFailedException.INTERNAL_ERROR,ex);
  }
  ClientTransaction clientTransaction=null;
  try {
    clientTransaction=callParticipant.getJainSipProvider().getNewClientTransaction(bye);
  }
 catch (  TransactionUnavailableException ex) {
    logger.error("Failed to construct a client transaction from the BYE request",ex);
    throw new OperationFailedException("Failed to construct a client transaction from the BYE request",OperationFailedException.INTERNAL_ERROR,ex);
  }
  try {
    callParticipant.getDialog().sendRequest(clientTransaction);
    logger.debug("sent request:\n" + bye);
  }
 catch (  SipException ex) {
    throw new OperationFailedException("Failed to send the BYE request",OperationFailedException.NETWORK_FAILURE,ex);
  }
}
