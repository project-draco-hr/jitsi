{
  int deviceIndex=PortAudioUtils.getDeviceIndexFromLocator(deviceConfiguration.getAudioCaptureDevice().getLocator());
  InputPortAudioStream portAudioStream=PortAudioManager.getInstance().getInputStream(deviceIndex,8000.0,1);
  Buffer firstBuf=new Buffer();
  Buffer secondBuf=new Buffer();
  portAudioStream.start();
  portAudioStream.read(firstBuf);
  portAudioStream.read(secondBuf);
  portAudioStream.stop();
  int length=firstBuf.getLength() + secondBuf.getLength();
  if (length < 64) {
    return null;
  }
  byte[] returnData=new byte[length];
  System.arraycopy(firstBuf.getData(),0,returnData,0,firstBuf.getLength());
  System.arraycopy(secondBuf.getData(),0,returnData,firstBuf.getLength(),secondBuf.getLength());
  return returnData;
}
