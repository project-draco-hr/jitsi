{
  MediaLocator audioCaptureDeviceLocator=deviceConfiguration.getAudioCaptureDevice().getLocator();
  if (audioCaptureDeviceLocator == null)   return false;
  try {
    dataSource=Manager.createDataSource(audioCaptureDeviceLocator);
  }
 catch (  NoDataSourceException e) {
    logger.warn("No data source during entropy preparation",e);
    return false;
  }
catch (  IOException e) {
    logger.warn("Got an IO Exception during entropy preparation",e);
    return false;
  }
  FormatControl fc=((CaptureDevice)dataSource).getFormatControls()[0];
  fc.setFormat(new AudioFormat(AudioFormat.LINEAR,8000,16,1,AudioFormat.LITTLE_ENDIAN,AudioFormat.SIGNED,Format.NOT_SPECIFIED,Format.NOT_SPECIFIED,Format.byteArray));
  if (dataSource instanceof PullBufferDataSource) {
    audioStream=((PullBufferDataSource)dataSource).getStreams()[0];
  }
 else {
    audioStream=((PushBufferDataSource)dataSource).getStreams()[0];
    ((PushBufferStream)audioStream).setTransferHandler(this);
  }
  return (audioStream != null);
}
