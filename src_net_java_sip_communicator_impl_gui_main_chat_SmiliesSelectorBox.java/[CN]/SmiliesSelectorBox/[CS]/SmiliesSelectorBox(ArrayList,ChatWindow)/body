{
  this.imageList=imageList;
  this.chatWindow=chatWindow;
  this.selectorBox.setUI(new SIPCommChatSelectorMenuUI());
  this.setOpaque(false);
  this.selectorBox.setOpaque(false);
  this.setPreferredSize(new Dimension(BUTTON_WIDTH,BUTTON_HEIGHT));
  this.selectorBox.setBorder(BorderFactory.createEmptyBorder(0,0,0,0));
  this.selectorBox.setIcon(new ImageIcon(ImageLoader.getImage(ImageLoader.SMILIES_ICON)));
  this.calculateGridDimensions(imageList.size());
  this.selectorBox.getPopupMenu().setLayout(new GridLayout(this.gridRowCount,this.gridColCount,5,5));
  for (int i=0; i < imageList.size(); i++) {
    Smiley smiley=(Smiley)this.imageList.get(i);
    ImageIcon imageIcon=new ImageIcon(ImageLoader.getImage(smiley.getImageID()));
    JMenuItem smileyItem=new JMenuItem(imageIcon);
    smileyItem.setToolTipText(smiley.getSmileyStrings()[0]);
    smileyItem.addActionListener(this);
    this.selectorBox.add(smileyItem);
  }
  this.add(selectorBox);
}
