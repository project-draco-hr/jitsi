{
  Hashtable icqAccountProperties=new Hashtable();
  icqAccountProperties.put(AccountProperties.PASSWORD,passwd);
  this.icqAccountID=this.accountManager.installAccount(this.bc,user,icqAccountProperties);
  this.osgiFilter="(&(" + AccountManager.PROTOCOL_PROPERTY_NAME + "="+ ProtocolNames.ICQ+ ")"+ "("+ AccountManager.ACCOUNT_ID_PROPERTY_NAME+ "="+ icqAccountID.getAccountID()+ "))";
  try {
    this.serRefs=this.bc.getServiceReferences(ProtocolProviderService.class.getName(),osgiFilter);
  }
 catch (  InvalidSyntaxException e) {
    this.logger.error("LoginManager: " + e.getMessage());
  }
  icqProtocolProvider=(ProtocolProviderService)this.bc.getService(serRefs[0]);
  icqProtocolProvider.addRegistrationStateChangeListener(this);
  icqProtocolProvider.register(new MySecurityAuthority());
}
