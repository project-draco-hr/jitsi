{
  String protocolName=evt.getProvider().getProtocolName();
  if (evt.getNewState().equals(RegistrationState.REGISTERED)) {
    Map supportedOpSets=evt.getProvider().getSupportedOperationSets();
    this.mainFrame.addProtocolProvider(evt.getProvider());
    this.mainFrame.addProtocolSupportedOperationSets(evt.getProvider(),supportedOpSets);
  }
 else   if (evt.getNewState().equals(RegistrationState.AUTHENTICATION_FAILED)) {
    StatusPanel statusPanel=this.mainFrame.getStatusPanel();
    statusPanel.stopConnecting(evt.getProvider().getProtocolName());
    statusPanel.setSelectedStatus(evt.getProvider().getProtocolName(),Constants.OFFLINE_STATUS);
    JOptionPane.showMessageDialog(null,Messages.getString("authenticationFailed"),Messages.getString("authenticationFailed"),JOptionPane.ERROR_MESSAGE);
    ((LoginWindow)this.loginWindows.get(protocolName)).showWindow();
  }
 else   if (evt.getNewState().equals(RegistrationState.CONNECTION_FAILED)) {
    this.mainFrame.getStatusPanel().stopConnecting(evt.getProvider().getProtocolName());
    this.mainFrame.getStatusPanel().setSelectedStatus(evt.getProvider().getProtocolName(),Constants.OFFLINE_STATUS);
    JOptionPane.showMessageDialog(null,Messages.getString("connectionFailedMessage"),Messages.getString("connectionFailed"),JOptionPane.ERROR_MESSAGE);
  }
 else   if (evt.getNewState().equals(RegistrationState.EXPIRED)) {
  }
 else   if (evt.getNewState().equals(RegistrationState.UNREGISTERED)) {
  }
}
