{
  protocolProvider.addRegistrationStateChangeListener(this);
  this.mainFrame.addProtocolProvider(protocolProvider);
  Object status=this.mainFrame.getProtocolProviderLastStatus(protocolProvider);
  if (status == null || status.equals(Constants.ONLINE_STATUS) || ((status instanceof PresenceStatus) && (((PresenceStatus)status).getStatus() > PresenceStatus.ONLINE_THRESHOLD))) {
    this.login(protocolProvider);
  }
}
