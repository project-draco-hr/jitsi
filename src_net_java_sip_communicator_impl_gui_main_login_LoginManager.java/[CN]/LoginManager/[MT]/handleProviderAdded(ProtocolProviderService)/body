{
  protocolProvider.addRegistrationStateChangeListener(this);
  this.mainFrame.addProtocolProvider(protocolProvider);
  PresenceStatus status=this.mainFrame.getProtocolProviderLastStatus(protocolProvider);
  if (status == null || status.getStatus() > PresenceStatus.ONLINE_THRESHOLD) {
    this.login(protocolProvider);
  }
}
