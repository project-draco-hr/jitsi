{
  String errorMessage="";
switch (ex.getErrorCode()) {
case OperationFailedException.GENERAL_ERROR:
{
      logger.error("Provider could not be registered" + " due to the following general error: ",ex);
      AccountID accountID=protocolProvider.getAccountID();
      errorMessage=GuiActivator.getResources().getI18NString("service.gui.LOGIN_GENERAL_ERROR",new String[]{accountID.getUserID(),accountID.getService()});
      new ErrorDialog(mainFrame,GuiActivator.getResources().getI18NString("service.gui.ERROR"),errorMessage,ex).showDialog();
    }
  break;
case OperationFailedException.INTERNAL_ERROR:
{
  logger.error("Provider could not be registered" + " due to the following internal error: ",ex);
  AccountID accountID=protocolProvider.getAccountID();
  errorMessage=GuiActivator.getResources().getI18NString("service.gui.LOGIN_INTERNAL_ERROR",new String[]{accountID.getUserID(),accountID.getService()});
  new ErrorDialog(mainFrame,GuiActivator.getResources().getI18NString("service.gui.ERROR"),errorMessage,ex).showDialog();
}
break;
case OperationFailedException.NETWORK_FAILURE:
{
logger.error("Provider could not be registered" + " due to a network failure: " + ex);
AccountID accountID=protocolProvider.getAccountID();
errorMessage=GuiActivator.getResources().getI18NString("service.gui.LOGIN_NETWORK_ERROR",new String[]{accountID.getUserID(),accountID.getService()});
int result=new MessageDialog(null,GuiActivator.getResources().getI18NString("service.gui.ERROR"),errorMessage,GuiActivator.getResources().getI18NString("service.gui.RETRY"),false).showDialog();
if (result == MessageDialog.OK_RETURN_CODE) {
login(protocolProvider);
}
}
break;
case OperationFailedException.INVALID_ACCOUNT_PROPERTIES:
{
logger.error("Provider could not be registered" + " due to an invalid account property: ",ex);
AccountID accountID=protocolProvider.getAccountID();
errorMessage=GuiActivator.getResources().getI18NString("service.gui.LOGIN_INVALID_PROPERTIES_ERROR",new String[]{accountID.getUserID(),accountID.getService()});
new ErrorDialog(mainFrame,GuiActivator.getResources().getI18NString("service.gui.ERROR"),errorMessage,ex).showDialog();
}
break;
default :
logger.error("Provider could not be registered.",ex);
}
}
