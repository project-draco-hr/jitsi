{
  String errorMessage="";
switch (ex.getErrorCode()) {
case OperationFailedException.GENERAL_ERROR:
{
      logger.error("Provider could not be registered" + " due to the following general error: ",ex);
      AccountID accountID=protocolProvider.getAccountID();
      errorMessage=Messages.getI18NString("loginGeneralError",new String[]{accountID.getUserID(),accountID.getService()}).getText();
      new ErrorDialog(mainFrame,Messages.getI18NString("error").getText(),errorMessage,ex).showDialog();
    }
  break;
case OperationFailedException.INTERNAL_ERROR:
{
  logger.error("Provider could not be registered" + " due to the following internal error: ",ex);
  AccountID accountID=protocolProvider.getAccountID();
  errorMessage=Messages.getI18NString("loginInternalError",new String[]{accountID.getUserID(),accountID.getService()}).getText();
  new ErrorDialog(mainFrame,Messages.getI18NString("error").getText(),errorMessage,ex).showDialog();
}
break;
case OperationFailedException.NETWORK_FAILURE:
{
logger.error("Provider could not be registered" + " due to a network failure: " + ex);
AccountID accountID=protocolProvider.getAccountID();
errorMessage=Messages.getI18NString("loginNetworkError",new String[]{accountID.getUserID(),accountID.getService()}).getText();
int result=new MessageDialog(null,Messages.getI18NString("error").getText(),errorMessage,Messages.getI18NString("retry").getText(),false).showDialog();
if (result == MessageDialog.OK_RETURN_CODE) {
login(protocolProvider);
}
}
break;
case OperationFailedException.INVALID_ACCOUNT_PROPERTIES:
{
logger.error("Provider could not be registered" + " due to an invalid account property: ",ex);
AccountID accountID=protocolProvider.getAccountID();
errorMessage=Messages.getI18NString("loginInvalidPropsError",new String[]{accountID.getUserID(),accountID.getService()}).getText();
new ErrorDialog(mainFrame,Messages.getI18NString("error").getText(),errorMessage,ex).showDialog();
}
break;
default :
logger.error("Provider could not be registered.",ex);
}
}
