{
  JButton sourceButton=(JButton)event.getSource();
  AccountRegistrationWizard wizard=(AccountRegistrationWizard)networkComboBox.getSelectedItem();
  AccountRegWizardContainerImpl wizardContainer=((AccountRegWizardContainerImpl)GuiActivator.getUIService().getAccountRegWizardContainer());
  if (sourceButton.equals(advancedButton)) {
    wizard.setModification(false);
    wizardContainer.setTitle(GuiActivator.getResources().getI18NString("service.gui.ACCOUNT_REGISTRATION_WIZARD"));
    wizardContainer.setCurrentWizard(wizard);
    wizardContainer.showDialog(false);
    this.dispose();
  }
 else   if (sourceButton.equals(addAccountButton)) {
    ProtocolProviderService protocolProvider;
    try {
      if (wizard == emptyWizard) {
        loadErrorMessage(GuiActivator.getResources().getI18NString("service.gui.CHOOSE_NETWORK"));
      }
      protocolProvider=wizard.signin();
      if (protocolProvider != null)       wizardContainer.saveAccountWizard(protocolProvider,wizard);
      this.dispose();
    }
 catch (    OperationFailedException e) {
      if (logger.isDebugEnabled())       logger.debug("The sign in operation has failed.");
      if (e.getErrorCode() == OperationFailedException.ILLEGAL_ARGUMENT) {
        loadErrorMessage(GuiActivator.getResources().getI18NString("service.gui.USERNAME_NULL"));
      }
 else       if (e.getErrorCode() == OperationFailedException.IDENTIFICATION_CONFLICT) {
        loadErrorMessage(GuiActivator.getResources().getI18NString("service.gui.USER_EXISTS_ERROR"));
      }
 else {
        loadErrorMessage(GuiActivator.getResources().getI18NString("service.gui.ACCOUNT_CREATION_FAILED",new String[]{e.getMessage()}));
      }
    }
catch (    Exception e) {
      if (logger.isDebugEnabled())       logger.debug("The sign in operation has failed.");
      loadErrorMessage(GuiActivator.getResources().getI18NString("service.gui.ACCOUNT_CREATION_FAILED",new String[]{e.getMessage()}));
    }
  }
 else   if (sourceButton.equals(cancelButton)) {
    this.dispose();
  }
}
