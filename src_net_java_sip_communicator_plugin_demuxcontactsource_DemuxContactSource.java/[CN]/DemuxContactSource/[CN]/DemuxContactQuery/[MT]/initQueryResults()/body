{
  List<SourceContact> sourceContacts=sourceQuery.getQueryResults();
  if (sourceContacts == null)   return;
  Iterator<SourceContact> contactIter=sourceContacts.iterator();
  while (contactIter.hasNext()) {
    SourceContact sourceContact=contactIter.next();
    Iterator<ContactDetail> detailsIter=sourceContact.getContactDetails().iterator();
    while (detailsIter.hasNext()) {
      ContactDetail detail=detailsIter.next();
      if (preferredProtocolProviders == null || isPreferredContactDetail(detail)) {
        SortedGenericSourceContact demuxContact=(SortedGenericSourceContact)createSourceContact(sourceContact,detail);
        demuxContacts.add(demuxContact);
      }
    }
  }
}
