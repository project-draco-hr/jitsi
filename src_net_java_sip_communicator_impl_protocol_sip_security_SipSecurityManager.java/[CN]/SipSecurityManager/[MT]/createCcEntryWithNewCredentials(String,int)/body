{
  CredentialsCacheEntry ccEntry=new CredentialsCacheEntry();
  UserCredentials defaultCredentials=new UserCredentials();
  defaultCredentials.setUserName(accountID.getUserID());
  UserCredentials newCredentials=getSecurityAuthority().obtainCredentials(realm,defaultCredentials,reasonCode);
  if (newCredentials == null)   return null;
  if (newCredentials.getPassword() == null)   return null;
  ccEntry.userCredentials=newCredentials;
  if (ccEntry.userCredentials != null && ccEntry.userCredentials.isPasswordPersistent())   SipActivator.getProtocolProviderFactory().storePassword(accountID,ccEntry.userCredentials.getPasswordAsString());
  return ccEntry;
}
