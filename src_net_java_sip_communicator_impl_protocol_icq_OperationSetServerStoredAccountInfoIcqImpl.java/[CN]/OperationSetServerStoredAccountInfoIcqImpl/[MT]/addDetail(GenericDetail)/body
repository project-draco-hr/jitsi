{
  if (!isDetailClassSupported(detail.getClass()))   throw new IllegalArgumentException("implementation does not support such details " + detail.getClass());
  Vector alreadySetDetails=new Vector();
  Iterator iter=getDetails(detail.getClass());
  while (iter.hasNext()) {
    alreadySetDetails.add(iter.next());
  }
  if (alreadySetDetails.size() >= getMaxDetailInstances(detail.getClass()))   throw new ArrayIndexOutOfBoundsException("Max count for this detail is already reached");
  alreadySetDetails.add(detail);
  SuccessResponseListener responseListener=new SuccessResponseListener();
  icqProvider.getAimConnection().getInfoService().sendSnacRequest(new FullInfoCmd(uin,alreadySetDetails,null),responseListener);
synchronized (responseListener.waitingForResponseLock) {
    try {
      responseListener.waitingForResponseLock.wait(2000);
    }
 catch (    InterruptedException ex) {
    }
  }
  if (!responseListener.success)   if (responseListener.timeout)   throw new OperationFailedException("Adding Detail Failed!",OperationFailedException.NETWORK_FAILURE);
 else   throw new OperationFailedException("Adding Detail Failed!",OperationFailedException.GENERAL_ERROR);
  infoRetreiver.detailsChanged(uin);
}
