{
  NSDictionary pixelBufferAttributes=captureOutput.pixelBufferAttributes();
  if (pixelBufferAttributes != null) {
    int pixelFormatType=pixelBufferAttributes.intForKey(CVPixelBufferAttributeKey.kCVPixelBufferPixelFormatTypeKey);
    int width=pixelBufferAttributes.intForKey(CVPixelBufferAttributeKey.kCVPixelBufferWidthKey);
    int height=pixelBufferAttributes.intForKey(CVPixelBufferAttributeKey.kCVPixelBufferHeightKey);
switch (pixelFormatType) {
case CVPixelFormatType.kCVPixelFormatType_32ARGB:
      return new RGBFormat(((width == 0) && (height == 0) ? null : new Dimension(width,height)),Format.NOT_SPECIFIED,Format.byteArray,Format.NOT_SPECIFIED,32,2,3,4);
case CVPixelFormatType.kCVPixelFormatType_420YpCbCr8Planar:
    if ((width == 0) && (height == 0))     return new YUVFormat(YUVFormat.YUV_420);
 else {
      int strideY=width;
      int strideUV=strideY / 2;
      int offsetY=0;
      int offsetU=strideY * height;
      int offsetV=offsetU + strideUV * height / 2;
      return new YUVFormat(new Dimension(width,height),Format.NOT_SPECIFIED,Format.byteArray,Format.NOT_SPECIFIED,YUVFormat.YUV_420,strideY,strideUV,offsetY,offsetU,offsetV);
    }
}
}
return null;
}
