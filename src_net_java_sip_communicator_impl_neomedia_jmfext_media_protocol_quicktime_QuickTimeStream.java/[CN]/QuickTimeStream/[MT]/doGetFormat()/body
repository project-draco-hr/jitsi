{
  Format format;
  if (this.format == null) {
    format=getCaptureOutputFormat();
    if (format == null)     format=super.doGetFormat();
 else {
      VideoFormat videoFormat=(VideoFormat)format;
      if (videoFormat.getSize() != null)       this.format=format;
 else       format=videoFormat.intersects(new VideoFormat(null,new Dimension(640,480),Format.NOT_SPECIFIED,Format.byteArray,Format.NOT_SPECIFIED));
    }
  }
 else   format=this.format;
  return format;
}
