{
synchronized (dataSyncRoot) {
    if (data == null)     buffer.setLength(0);
 else {
      buffer.setData(data);
      buffer.setFlags(Buffer.FLAG_LIVE_DATA | Buffer.FLAG_SYSTEM_TIME);
      if (dataFormat != null)       buffer.setFormat(dataFormat);
      buffer.setLength(data.length);
      buffer.setOffset(0);
      buffer.setTimeStamp(dataTimeStamp);
      data=null;
      if (!automaticallyDropsLateVideoFrames)       dataSyncRoot.notifyAll();
    }
  }
}
