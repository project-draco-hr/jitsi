{
  VideoFormat videoFormat=(VideoFormat)format;
  Dimension size=videoFormat.getSize();
  int width;
  int height;
  if (size == null) {
    width=DataSource.DEFAULT_WIDTH;
    height=DataSource.DEFAULT_HEIGHT;
  }
 else {
    width=size.width;
    height=size.height;
  }
  NSMutableDictionary pixelBufferAttributes=null;
  if ((width > 0) && (height > 0)) {
    if (pixelBufferAttributes == null)     pixelBufferAttributes=new NSMutableDictionary();
    pixelBufferAttributes.setIntForKey(width,CVPixelBufferAttributeKey.kCVPixelBufferWidthKey);
    pixelBufferAttributes.setIntForKey(height,CVPixelBufferAttributeKey.kCVPixelBufferHeightKey);
  }
  if (format.isSameEncoding(VideoFormat.RGB)) {
    if (pixelBufferAttributes == null)     pixelBufferAttributes=new NSMutableDictionary();
    pixelBufferAttributes.setIntForKey(CVPixelFormatType.kCVPixelFormatType_32ARGB,CVPixelBufferAttributeKey.kCVPixelBufferPixelFormatTypeKey);
  }
 else   if (format.isSameEncoding(VideoFormat.YUV)) {
    if (pixelBufferAttributes == null)     pixelBufferAttributes=new NSMutableDictionary();
    pixelBufferAttributes.setIntForKey(CVPixelFormatType.kCVPixelFormatType_420YpCbCr8Planar,CVPixelBufferAttributeKey.kCVPixelBufferPixelFormatTypeKey);
  }
 else   throw new IllegalArgumentException("format");
  if (pixelBufferAttributes != null)   captureOutput.setPixelBufferAttributes(pixelBufferAttributes);
}
