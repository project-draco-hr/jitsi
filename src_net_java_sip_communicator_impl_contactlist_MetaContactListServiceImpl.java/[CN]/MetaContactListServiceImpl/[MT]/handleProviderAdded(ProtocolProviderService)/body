{
  logger.debug("Adding protocol provider " + provider.getProtocolName());
  OperationSetPersistentPresence opSetPersPresence=(OperationSetPersistentPresence)provider.getSupportedOperationSets().get(OperationSetPersistentPresence.class.getName());
  this.currentlyInstalledProviders.put(provider.getAccountID().getAccountUID(),provider);
  if (opSetPersPresence != null) {
    storageManager.extractContactsForAccount(this,provider.getAccountID().getAccountUID());
    synchronizeOpSetWithLocalContactList(opSetPersPresence);
  }
 else {
    logger.debug("Service did not have a pers. pres. op. set.");
  }
  opSetPersPresence.addContactPresenceStatusListener(this);
}
