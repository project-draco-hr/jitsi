{
  logger.debug("Adding protocol provider " + provider.getProtocolName());
  OperationSetPersistentPresence opSetPersPresence=(OperationSetPersistentPresence)provider.getSupportedOperationSets().get(OperationSetPersistentPresence.class.getName());
  this.currentlyInstalledProviders.put(provider.getAccountID().getAccountUniqueID(),provider);
  if (opSetPersPresence != null) {
    try {
      storageManager.extractContactsForAccount(provider.getAccountID().getAccountUniqueID());
    }
 catch (    XMLException exc) {
      logger.error("Failed to load contacts for account " + provider.getAccountID().getAccountUniqueID(),exc);
    }
    synchronizeOpSetWithLocalContactList(opSetPersPresence);
  }
 else {
    logger.debug("Service did not have a pers. pres. op. set.");
  }
  opSetPersPresence.addContactPresenceStatusListener(this);
}
