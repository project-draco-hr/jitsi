{
  if (!(newParentMetaContact instanceof MetaContactImpl)) {
    throw new IllegalArgumentException(newParentMetaContact + " is not a MetaContactImpl instance.");
  }
  MetaContactImpl currentParentMetaContact=(MetaContactImpl)this.findMetaContactByContact(contact);
  currentParentMetaContact.removeProtoContact(contact);
  MetaContactGroup currentParentMetaGroup=this.findParentMetaContactGroup(currentParentMetaContact);
  OperationSetPersistentPresence opSetPresence=(OperationSetPersistentPresence)contact.getProtocolProvider().getSupportedOperationSets().get(OperationSetPersistentPresence.class.getName());
  if (opSetPresence == null) {
  }
  MetaContactGroup newParentGroup=findParentMetaContactGroup(newParentMetaContact);
  ContactGroup parentProtoGroup=resolveProtoPath(contact.getProtocolProvider(),(MetaContactGroupImpl)newParentGroup);
  if (contact.getParentContactGroup() != parentProtoGroup)   opSetPresence.moveContactToGroup(contact,parentProtoGroup);
  ((MetaContactImpl)newParentMetaContact).addProtoContact(contact);
  fireProtoContactEvent(contact,ProtoContactEvent.PROTO_CONTACT_MOVED,currentParentMetaContact,newParentMetaContact);
  if (currentParentMetaContact.getContactCount() == 0) {
    MetaContactGroupImpl parentMetaGroup=currentParentMetaContact.getParentGroup();
    parentMetaGroup.removeMetaContact(currentParentMetaContact);
    fireMetaContactEvent(currentParentMetaContact,parentMetaGroup,MetaContactEvent.META_CONTACT_REMOVED);
  }
}
