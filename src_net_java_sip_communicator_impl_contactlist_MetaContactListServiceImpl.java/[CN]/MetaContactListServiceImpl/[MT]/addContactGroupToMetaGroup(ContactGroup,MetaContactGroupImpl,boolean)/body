{
  metaGroup.addProtoGroup(protoGroup);
  Iterator subgroupsIter=protoGroup.subgroups();
  while (subgroupsIter.hasNext()) {
    ContactGroup group=(ContactGroup)subgroupsIter.next();
    if (metaGroup.findMetaContactGroupByContactGroup(group) != null)     continue;
    MetaContactGroupImpl newMetaGroup=new MetaContactGroupImpl(group.getGroupName());
    metaGroup.addSubgroup(newMetaGroup);
    addContactGroupToMetaGroup(group,newMetaGroup,false);
    if (fireEvents) {
      this.fireMetaContactGroupEvent(newMetaGroup,group.getProtocolProvider(),MetaContactGroupEvent.META_CONTACT_GROUP_ADDED);
    }
  }
  Iterator contactsIter=protoGroup.contacts();
  while (contactsIter.hasNext()) {
    Contact contact=(Contact)contactsIter.next();
    if (metaGroup.findMetaContactByContact(contact) != null)     continue;
    MetaContactImpl newMetaContact=new MetaContactImpl();
    newMetaContact.addProtoContact(contact);
    metaGroup.addMetaContact(newMetaContact);
    if (fireEvents) {
      this.fireMetaContactEvent(newMetaContact,metaGroup,MetaContactEvent.META_CONTACT_ADDED);
    }
  }
}
