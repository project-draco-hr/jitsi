{
  if (imageBytes == null || !(imageBytes.length > 0))   return null;
  Image imageIcon=null;
  try {
    Image image=null;
    try {
      image=ImageIO.read(new ByteArrayInputStream(imageBytes));
    }
 catch (    Exception e) {
      try {
        image=Toolkit.getDefaultToolkit().createImage(imageBytes);
      }
 catch (      Exception e1) {
        throw e;
      }
    }
    if (image != null)     imageIcon=scaleImageWithinBounds(image,width,height);
 else     if (logger.isTraceEnabled())     logger.trace("Unknown image format or error reading image");
  }
 catch (  Exception e) {
    if (logger.isDebugEnabled())     logger.debug("Could not create image.",e);
  }
  if (imageIcon != null)   return new ImageIcon(imageIcon);
  return null;
}
