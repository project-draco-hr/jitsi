{
  ImageIcon scaledImage=ImageUtils.scaleIconWithinBounds(image,width,height);
  int scaledImageWidth=scaledImage.getIconWidth();
  int scaledImageHeight=scaledImage.getIconHeight();
  BufferedImage destImage=new BufferedImage(scaledImageWidth,scaledImageHeight,BufferedImage.TYPE_INT_ARGB);
  Graphics2D g=destImage.createGraphics();
  try {
    AntialiasingManager.activateAntialiasing(g);
    g.setColor(Color.WHITE);
    g.fillRoundRect(0,0,scaledImageWidth,scaledImageHeight,10,10);
    g.setComposite(AlphaComposite.SrcIn);
    g.drawImage(scaledImage.getImage(),0,0,null);
  }
  finally {
    g.dispose();
  }
  return destImage;
}
