{
  BufferedImage destImage=null;
  ImageIcon scaledImage=ImageUtils.scaleIconWithinBounds(image,width,height);
  destImage=new BufferedImage(scaledImage.getImage().getWidth(null),scaledImage.getImage().getHeight(null),BufferedImage.TYPE_INT_ARGB);
  Graphics2D g=destImage.createGraphics();
  try {
    AntialiasingManager.activateAntialiasing(g);
    g.setColor(Color.WHITE);
    g.fillRoundRect(0,0,scaledImage.getIconWidth(),scaledImage.getIconHeight(),10,10);
    g.setComposite(AlphaComposite.SrcIn);
    g.drawImage(scaledImage.getImage(),0,0,null);
  }
  finally {
    g.dispose();
  }
  return new ImageIcon(destImage);
}
