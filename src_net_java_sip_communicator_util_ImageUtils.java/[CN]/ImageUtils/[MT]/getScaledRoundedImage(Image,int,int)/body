{
  ImageIcon scaledImage=ImageUtils.scaleIconWithinBounds(image,width,height);
  int scaledImageWidth=scaledImage.getIconWidth();
  int scaledImageHeight=scaledImage.getIconHeight();
  if (scaledImageHeight <= 0 || scaledImageWidth <= 0)   return null;
  RoundRectangle2D roundRect=new RoundRectangle2D.Double(0,0,scaledImageWidth,scaledImageHeight,10,10);
  int type=BufferedImage.TYPE_INT_ARGB_PRE;
  BufferedImage dstImage=new BufferedImage(scaledImageWidth,scaledImageHeight,type);
  Graphics2D g=dstImage.createGraphics();
  try {
    g.setRenderingHint(RenderingHints.KEY_INTERPOLATION,RenderingHints.VALUE_INTERPOLATION_BICUBIC);
    g.setClip(roundRect);
    g.drawImage(scaledImage.getImage(),0,0,null);
  }
  finally {
    g.dispose();
  }
  return dstImage;
}
