{
  try {
    this.secureJainSipProvider.removeSipListener(this);
    this.stack.deleteSipProvider(this.secureJainSipProvider);
    this.secureJainSipProvider=null;
    this.clearJainSipProvider.removeSipListener(this);
    this.stack.deleteSipProvider(this.clearJainSipProvider);
    this.clearJainSipProvider=null;
    Iterator<ListeningPoint> it=this.stack.getListeningPoints();
    while (it.hasNext()) {
      this.stack.deleteListeningPoint(it.next());
      it=this.stack.getListeningPoints();
    }
    this.stack.stop();
    logger.trace("stopped listening");
  }
 catch (  ObjectInUseException ex) {
    logger.fatal("Failed to stop listening",ex);
    throw new OperationFailedException("A unexpected error occurred while stopping " + "the SIP listening.",OperationFailedException.INTERNAL_ERROR,ex);
  }
}
