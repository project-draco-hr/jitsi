{
  this.imageList=imageList;
  this.chatWindow=chatWindow;
  this.selectorBox.setUI(new SIPCommChatSelectorMenuUI());
  this.selectorBox.setPreferredSize(new Dimension(24,24));
  this.selectorBox.setBorder(BorderFactory.createEmptyBorder(0,0,0,0));
  this.selectorBox.setIcon(new ImageIcon(ImageLoader.getImage(ImageLoader.SMILIES_ICON)));
  this.calculateGridDimensions(imageList.size());
  this.selectorBox.getPopupMenu().setLayout(new GridLayout(this.gridRowCount,this.gridColCount,5,5));
  for (int i=0; i < imageList.size(); i++) {
    Smiley smiley=(Smiley)this.imageList.get(i);
    ChatToolbarButton imageButton=new ChatToolbarButton(ImageLoader.getImage(smiley.getImageID()));
    imageButton.setToolTipText(smiley.getSmileyStrings()[0]);
    imageButton.addActionListener(this);
    this.selectorBox.add(imageButton);
  }
  this.add(selectorBox);
}
