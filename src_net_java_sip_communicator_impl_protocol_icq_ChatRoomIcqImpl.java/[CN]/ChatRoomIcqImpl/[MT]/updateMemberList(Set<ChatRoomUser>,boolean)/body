{
  for (  ChatRoomUser user : chatRoomUserSet) {
    String uid=user.getScreenname().getFormatted();
    if (!removeMember && !members.containsKey(uid) && !uid.equals(provider.getAccountID().getUserID())) {
      String userNickName=provider.getInfoRetreiver().getNickName(uid);
      ChatRoomMemberIcqImpl member=new ChatRoomMemberIcqImpl(this,userNickName,uid,ChatRoomMemberRole.MEMBER);
      members.put(uid,member);
      fireMemberPresenceEvent(member,ChatRoomMemberPresenceChangeEvent.MEMBER_JOINED,null);
    }
    if (removeMember && members.containsKey(uid)) {
      ChatRoomMemberIcqImpl member=(ChatRoomMemberIcqImpl)members.get(uid);
      members.remove(uid);
      fireMemberPresenceEvent(member,ChatRoomMemberPresenceChangeEvent.MEMBER_LEFT,null);
    }
  }
}
