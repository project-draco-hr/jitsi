{
  try {
    String globalConnectionAddress=null;
    if (globalConnParam != null)     globalConnectionAddress=globalConnParam.getAddress();
    Iterator mediaDescsIter=mediaDescriptions.iterator();
    while (mediaDescsIter.hasNext()) {
      SessionAddress target=null;
      MediaDescription mediaDescription=(MediaDescription)mediaDescsIter.next();
      int port=mediaDescription.getMedia().getMediaPort();
      String type=mediaDescription.getMedia().getMediaType();
      String address;
      if (globalConnectionAddress != null) {
        address=globalConnectionAddress;
      }
 else {
        address=mediaDescription.getConnection().getAddress();
      }
      Connection mediaLevelConnection=mediaDescription.getConnection();
      if (mediaLevelConnection != null) {
        address=mediaLevelConnection.getAddress();
      }
      InetAddress inetAddress=null;
      try {
        inetAddress=InetAddress.getByName(address);
      }
 catch (      UnknownHostException exc) {
        throw new MediaException("Failed to resolve address " + address,MediaException.NETWORK_ERROR,exc);
      }
      target=new SessionAddress(inetAddress,port);
      RTPManager rtpManager=type.equals("video") ? getVideoRtpManager() : getAudioRtpManager();
      try {
        rtpManager.addTarget(target);
        logger.trace("added target " + target + " for type "+ type);
      }
 catch (      Exception exc) {
        throw new MediaException("Failed to add RTPManager target.",MediaException.INTERNAL_ERROR,exc);
      }
    }
  }
 catch (  SdpParseException exc) {
    throw new ParseException("Failed to parse SDP data. Error on line " + exc.getLineNumber() + " "+ exc.getMessage(),exc.getCharOffset());
  }
}
