{
  SessionDescription peerDescription=null;
  try {
    peerDescription=mediaServCallback.getSdpFactory().createSessionDescription(peerSdpDescription);
  }
 catch (  SdpParseException ex) {
    throw new MediaException("Failed to parse the SDP description of the peer.",MediaException.INTERNAL_ERROR,ex);
  }
  SessionDescription sdpOffer=createSessionDescription(peerDescription,null);
  Vector<MediaDescription> mediaDescriptions;
  try {
    mediaDescriptions=sdpOffer.getMediaDescriptions(true);
  }
 catch (  SdpException ex) {
    throw new MediaException("Failed to get media descriptions from SDP offer.",MediaException.INTERNAL_ERROR,ex);
  }
  for (  MediaDescription mediaDescription : mediaDescriptions) {
    Vector<Attribute> attributes=mediaDescription.getAttributes(false);
    try {
      modifyMediaDescriptionForHold(on,mediaDescription,attributes);
    }
 catch (    SdpException ex) {
      throw new MediaException("Failed to modify media description for hold.",MediaException.INTERNAL_ERROR,ex);
    }
  }
  try {
    sdpOffer.setMediaDescriptions(mediaDescriptions);
  }
 catch (  SdpException ex) {
    throw new MediaException("Failed to set media descriptions to SDP offer.",MediaException.INTERNAL_ERROR,ex);
  }
  return sdpOffer;
}
