{
  InetAddress inAddrAny=null;
  try {
    inAddrAny=InetAddress.getByName(NetworkUtils.IN_ADDR_ANY);
  }
 catch (  UnknownHostException ex) {
    throw new MediaException("Failed to create the ANY inet address.",MediaException.INTERNAL_ERROR,ex);
  }
  String bindRetriesStr=MediaActivator.getConfigurationService().getString(MediaService.BIND_RETRIES_PROPERTY_NAME);
  int bindRetries=MediaService.BIND_RETRIES_DEFAULT_VALUE;
  try {
    if (bindRetriesStr != null && bindRetriesStr.length() > 0)     bindRetries=Integer.parseInt(bindRetriesStr);
  }
 catch (  NumberFormatException ex) {
    logger.warn(bindRetriesStr + " is not a valid value for number of bind retries.",ex);
  }
  audioSessionAddress=new SessionAddress(inAddrAny,minPortNumber);
  audioPublicAddress=allocatePort(intendedDestination,audioSessionAddress,bindRetries);
  audioSessionAddress.setControlHostAddress(audioPublicAddress.getAddress());
  audioSessionAddress.setDataHostAddress(audioPublicAddress.getAddress());
  logger.debug("AudioSessionAddress=" + audioSessionAddress);
  logger.debug("AudioPublicAddress=" + audioPublicAddress);
  minPortNumber=audioSessionAddress.getDataPort() + 2;
  videoSessionAddress=new SessionAddress(inAddrAny,minPortNumber);
  videoPublicAddress=allocatePort(intendedDestination,videoSessionAddress,bindRetries);
  videoSessionAddress.setControlHostAddress(videoPublicAddress.getAddress());
  videoSessionAddress.setDataHostAddress(videoPublicAddress.getAddress());
  minPortNumber=videoSessionAddress.getDataPort() + 2;
  if (minPortNumber > maxPortNumber - 2)   initializePortNumbers();
  initializeRtpManager(audioRtpManager,audioSessionAddress);
  initializeRtpManager(videoRtpManager,videoSessionAddress);
}
