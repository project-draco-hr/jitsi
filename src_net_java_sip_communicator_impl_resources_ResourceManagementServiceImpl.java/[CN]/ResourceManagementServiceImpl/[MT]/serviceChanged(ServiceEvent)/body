{
  Object sService=ResourceManagementActivator.bundleContext.getService(event.getServiceReference());
  if (!(sService instanceof ResourcePack)) {
    return;
  }
  ResourcePack resource=(ResourcePack)sService;
  if (event.getType() == ServiceEvent.REGISTERED) {
    logger.info("Resource registered " + resource);
    String resourceBaseName=resource.getResourcePackBaseName();
    ResourceBundle resourceBundle=ResourceBundle.getBundle(resourceBaseName,Locale.getDefault(),resource.getClass().getClassLoader());
    if (resource instanceof ColorPack && colorPack == null) {
      colorPack=resource;
      colorResourceBundle=resourceBundle;
    }
 else     if (resource instanceof ImagePack && imagePack == null) {
      imagePack=resource;
      imageResourceBundle=resourceBundle;
    }
 else     if (resource instanceof LanguagePack && languagePack == null) {
      languagePack=(LanguagePack)resource;
    }
 else     if (resource instanceof SettingsPack && settingsPack == null) {
      settingsPack=resource;
      settingsResourceBundle=resourceBundle;
    }
 else     if (resource instanceof SoundPack && soundPack == null) {
      soundPack=resource;
      soundResourceBundle=resourceBundle;
    }
  }
 else   if (event.getType() == ServiceEvent.UNREGISTERING) {
    if (resource instanceof ColorPack && colorPack.equals(resource)) {
      colorPack=null;
      colorResourceBundle=null;
    }
 else     if (resource instanceof ImagePack && imagePack.equals(resource)) {
      imagePack=null;
      imageResourceBundle=null;
    }
 else     if (resource instanceof LanguagePack && languagePack.equals(resource)) {
      languagePack=null;
    }
 else     if (resource instanceof SettingsPack && settingsPack.equals(resource)) {
      settingsPack=null;
      settingsResourceBundle=null;
    }
 else     if (resource instanceof SoundPack && soundPack.equals(resource)) {
      soundPack=null;
      soundResourceBundle=null;
    }
  }
}
