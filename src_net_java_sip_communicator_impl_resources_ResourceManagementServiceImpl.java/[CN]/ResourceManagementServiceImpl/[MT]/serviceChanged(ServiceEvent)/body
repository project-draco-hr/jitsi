{
  Object sService=ResourceManagementActivator.bundleContext.getService(event.getServiceReference());
  if (!(sService instanceof ResourcePack)) {
    return;
  }
  ResourcePack resourcePack=(ResourcePack)sService;
  if (event.getType() == ServiceEvent.REGISTERED) {
    logger.info("Resource registered " + resourcePack);
    String resourceBaseName=resourcePack.getResourcePackBaseName();
    ResourceBundle resourceBundle=ResourceBundle.getBundle(resourceBaseName,Locale.getDefault(),resourcePack.getClass().getClassLoader());
    if (resourcePack instanceof ColorPack) {
      if (colorPacks == null)       colorPacks=new Hashtable();
      colorPacks.put(resourcePack,getResourceBundle(resourcePack));
    }
 else     if (resourcePack instanceof ImagePack) {
      if (imagePacks == null)       imagePacks=new Hashtable();
      imagePacks.put(resourcePack,getResourceBundle(resourcePack));
    }
 else     if (resourcePack instanceof LanguagePack) {
      if (languagePacks == null)       languagePacks=new Hashtable();
      languagePacks.put(resourcePack,getResourceBundle(resourcePack));
    }
 else     if (resourcePack instanceof SettingsPack) {
      if (settingsPacks == null)       settingsPacks=new Hashtable();
      settingsPacks.put(resourcePack,getResourceBundle(resourcePack));
    }
 else     if (resourcePack instanceof SoundPack) {
      if (soundPacks == null)       soundPacks=new Hashtable();
      soundPacks.put(resourcePack,getResourceBundle(resourcePack));
    }
  }
 else   if (event.getType() == ServiceEvent.UNREGISTERING) {
    if (resourcePack instanceof ColorPack) {
      colorPacks=getDefaultPacks(ColorPack.class.getName(),ColorPack.RESOURCE_NAME_DEFAULT_VALUE);
    }
 else     if (resourcePack instanceof ImagePack) {
      imagePacks=getDefaultPacks(ImagePack.class.getName(),ImagePack.RESOURCE_NAME_DEFAULT_VALUE);
    }
 else     if (resourcePack instanceof LanguagePack) {
      languagePacks=getDefaultPacks(LanguagePack.class.getName(),LanguagePack.RESOURCE_NAME_DEFAULT_VALUE);
    }
 else     if (resourcePack instanceof SettingsPack) {
      settingsPacks=getDefaultPacks(SettingsPack.class.getName(),SettingsPack.RESOURCE_NAME_DEFAULT_VALUE);
    }
 else     if (resourcePack instanceof SoundPack) {
      soundPacks=getDefaultPacks(SoundPack.class.getName(),SoundPack.RESOURCE_NAME_DEFAULT_VALUE);
    }
  }
}
