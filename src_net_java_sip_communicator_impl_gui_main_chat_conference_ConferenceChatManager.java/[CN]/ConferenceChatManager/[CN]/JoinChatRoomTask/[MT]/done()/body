{
  String returnCode=null;
  try {
    returnCode=get();
  }
 catch (  InterruptedException ignore) {
  }
catch (  ExecutionException ignore) {
  }
  ConfigurationManager.updateChatRoomStatus(chatRoomWrapper.getParentProvider().getProtocolProvider(),chatRoomWrapper.getChatRoomID(),Constants.ONLINE_STATUS);
  String errorMessage=null;
  if (returnCode.equals(AUTHENTICATION_FAILED)) {
    ChatRoomAuthenticationWindow authWindow=new ChatRoomAuthenticationWindow(chatRoomWrapper);
    authWindow.setVisible(true);
  }
 else   if (returnCode.equals(REGISTRATION_REQUIRED)) {
    errorMessage=GuiActivator.getResources().getI18NString("service.gui.CHAT_ROOM_REGISTRATION_REQUIRED",new String[]{chatRoomWrapper.getChatRoomName()});
  }
 else   if (returnCode.equals(PROVIDER_NOT_REGISTERED)) {
    errorMessage=GuiActivator.getResources().getI18NString("service.gui.CHAT_ROOM_NOT_CONNECTED",new String[]{chatRoomWrapper.getChatRoomName()});
  }
 else   if (returnCode.equals(SUBSCRIPTION_ALREADY_EXISTS)) {
    errorMessage=GuiActivator.getResources().getI18NString("service.gui.CHAT_ROOM_ALREADY_JOINED",new String[]{chatRoomWrapper.getChatRoomName()});
  }
 else {
    errorMessage=GuiActivator.getResources().getI18NString("service.gui.FAILED_TO_JOIN_CHAT_ROOM",new String[]{chatRoomWrapper.getChatRoomName()});
  }
  if (!returnCode.equals(SUCCESS) && !returnCode.equals(AUTHENTICATION_FAILED)) {
    new ErrorDialog(GuiActivator.getUIService().getMainFrame(),GuiActivator.getResources().getI18NString("service.gui.ERROR"),errorMessage).showDialog();
  }
}
