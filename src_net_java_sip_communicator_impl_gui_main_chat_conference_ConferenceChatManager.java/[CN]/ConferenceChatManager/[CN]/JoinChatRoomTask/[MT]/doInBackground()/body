{
  ChatRoom chatRoom=chatRoomWrapper.getChatRoom();
  try {
    if (password != null && password.length > 0)     chatRoom.joinAs(nickName,password);
 else     if (nickName != null)     chatRoom.joinAs(nickName);
 else     chatRoom.join();
    return SUCCESS;
  }
 catch (  OperationFailedException e) {
    if (logger.isTraceEnabled())     logger.trace("Failed to join chat room: " + chatRoom.getName(),e);
switch (e.getErrorCode()) {
case OperationFailedException.AUTHENTICATION_FAILED:
      return AUTHENTICATION_FAILED;
case OperationFailedException.REGISTRATION_REQUIRED:
    return REGISTRATION_REQUIRED;
case OperationFailedException.PROVIDER_NOT_REGISTERED:
  return PROVIDER_NOT_REGISTERED;
case OperationFailedException.SUBSCRIPTION_ALREADY_EXISTS:
return SUBSCRIPTION_ALREADY_EXISTS;
default :
return UNKNOWN_ERROR;
}
}
}
