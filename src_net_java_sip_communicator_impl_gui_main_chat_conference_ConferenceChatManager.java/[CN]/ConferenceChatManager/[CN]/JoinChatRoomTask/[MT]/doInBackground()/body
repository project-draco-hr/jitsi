{
  ChatRoom chatRoom=chatRoomWrapper.getChatRoom();
  try {
    if (password != null && password.length > 0)     chatRoom.joinAs(nickName,password);
 else     if (nickName != null)     chatRoom.joinAs(nickName);
 else     chatRoom.join();
    return SUCCESS;
  }
 catch (  OperationFailedException e) {
    logger.trace("Failed to join chat room: " + chatRoom.getName(),e);
    if (e.getErrorCode() == OperationFailedException.AUTHENTICATION_FAILED) {
      return AUTHENTICATION_FAILED;
    }
 else     if (e.getErrorCode() == OperationFailedException.REGISTRATION_REQUIRED) {
      return REGISTRATION_REQUIRED;
    }
 else     if (e.getErrorCode() == OperationFailedException.PROVIDER_NOT_REGISTERED) {
      return PROVIDER_NOT_REGISTERED;
    }
 else     if (e.getErrorCode() == OperationFailedException.SUBSCRIPTION_ALREADY_EXISTS) {
      return SUBSCRIPTION_ALREADY_EXISTS;
    }
 else     return UNKNOWN_ERROR;
  }
}
