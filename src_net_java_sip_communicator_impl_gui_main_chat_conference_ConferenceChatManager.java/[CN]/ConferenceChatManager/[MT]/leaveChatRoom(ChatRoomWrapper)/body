{
  ChatRoom chatRoom=chatRoomWrapper.getChatRoom();
  if (chatRoom == null) {
    new ErrorDialog(GuiActivator.getUIService().getMainFrame(),GuiActivator.getResources().getI18NString("service.gui.WARNING"),GuiActivator.getResources().getI18NString("service.gui.CHAT_ROOM_LEAVE_NOT_CONNECTED=")).showDialog();
    return;
  }
  if (chatRoom.isJoined())   chatRoom.leave();
  ChatRoomWrapper existChatRoomWrapper=chatRoomList.findChatRoomWrapperFromChatRoom(chatRoom);
  if (existChatRoomWrapper == null)   return;
  ConfigurationManager.updateChatRoomStatus(chatRoomWrapper.getParentProvider().getProtocolProvider(),chatRoomWrapper.getChatRoomID(),Constants.OFFLINE_STATUS);
}
