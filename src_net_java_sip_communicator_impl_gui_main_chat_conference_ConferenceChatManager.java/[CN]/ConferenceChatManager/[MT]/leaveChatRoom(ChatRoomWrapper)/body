{
  ChatRoom chatRoom=chatRoomWrapper.getChatRoom();
  if (chatRoom == null) {
    ResourceManagementService resources=GuiActivator.getResources();
    new ErrorDialog(GuiActivator.getUIService().getMainFrame(),resources.getI18NString("service.gui.WARNING"),resources.getI18NString("service.gui.CHAT_ROOM_LEAVE_NOT_CONNECTED")).showDialog();
    return;
  }
  if (chatRoom.isJoined())   chatRoom.leave();
  ChatRoomWrapper existChatRoomWrapper=chatRoomList.findChatRoomWrapperFromChatRoom(chatRoom);
  if (existChatRoomWrapper == null)   return;
  ConfigurationUtils.updateChatRoomStatus(chatRoomWrapper.getParentProvider().getProtocolProvider(),chatRoomWrapper.getChatRoomID(),GlobalStatusEnum.OFFLINE_STATUS);
  this.closeChatRoom(existChatRoomWrapper);
}
