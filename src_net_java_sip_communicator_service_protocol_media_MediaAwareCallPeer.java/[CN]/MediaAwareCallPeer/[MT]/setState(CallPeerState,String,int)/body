{
  CallPeerMediaHandler<?> mediaHandler=getMediaHandler();
synchronized (mediaHandler) {
    super.setState(newState,reason,reasonCode);
    if (CallPeerState.DISCONNECTED.equals(newState) || CallPeerState.FAILED.equals(newState)) {
      mediaHandler.close();
    }
  }
}
