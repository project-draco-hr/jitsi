{
  this.chatWritePanel=writePanel;
  this.setOpaque(false);
  this.selectorBox.setOpaque(false);
  this.selectorBox.setBorder(BorderFactory.createEmptyBorder());
  this.selectorBox.setIcon(new ImageIcon(ImageLoader.getImage(ImageLoader.SMILIES_ICON)));
  this.calculateGridDimensions(imageList.size());
  JPopupMenu popupMenu=this.selectorBox.getPopupMenu();
  popupMenu.setLayout(new GridBagLayout());
  popupMenu.setBackground(Color.WHITE);
  int count=0;
  for (  Smiley smiley : imageList) {
    this.addSmileyToGrid(smiley,count);
    count++;
  }
  smileyTextLabel.setPreferredSize(new Dimension(50,25));
  smileyTextLabel.setBorder(BorderFactory.createEmptyBorder(0,0,0,5));
  smileyDescriptionLabel.setBorder(BorderFactory.createEmptyBorder(0,5,0,0));
  gridBagConstraints.fill=GridBagConstraints.HORIZONTAL;
  gridBagConstraints.gridx=0;
  gridBagConstraints.gridy=gridRowCount;
  gridBagConstraints.gridwidth=gridColCount;
  popupMenu.add(smileyDescriptionLabel,gridBagConstraints);
  gridBagConstraints.fill=GridBagConstraints.HORIZONTAL;
  gridBagConstraints.gridx=gridColCount / 2;
  gridBagConstraints.gridy=gridRowCount;
  smileyTextLabel.setHorizontalAlignment(SwingConstants.RIGHT);
  popupMenu.add(smileyTextLabel,gridBagConstraints);
  this.add(selectorBox);
}
