{
  PresenceStatus oldPresenceStatus=this.presenceStatus;
  this.presenceStatus=status;
  this.statusMessage=statusMessage;
  this.fireProviderStatusChangeEvent(oldPresenceStatus);
  changePresenceStatusForAllContacts(getServerStoredContactListRoot(),getPresenceStatus());
  List contacts=findContactsPointingToUs();
  Iterator contactsIter=contacts.iterator();
  while (contactsIter.hasNext()) {
    ContactDictImpl contact=(ContactDictImpl)contactsIter.next();
    PresenceStatus oldStatus=contact.getPresenceStatus();
    contact.setPresenceStatus(status);
    contact.getParentPresenceOperationSet().fireContactPresenceStatusChangeEvent(contact,contact.getParentContactGroup(),oldStatus);
  }
}
