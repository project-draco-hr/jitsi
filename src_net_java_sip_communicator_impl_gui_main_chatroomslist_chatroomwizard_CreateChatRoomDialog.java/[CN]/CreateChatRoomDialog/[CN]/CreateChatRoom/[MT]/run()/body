{
  String chatRoomName=chatRoomPanel.getChatRoomName();
  ChatRoom chatRoom=null;
  try {
    chatRoom=mainFrame.getMultiUserChatOpSet(pps).createChatRoom(chatRoomName,null);
  }
 catch (  OperationFailedException ex) {
    logger.error("Failed to create chat room.",ex);
    new ErrorDialog(mainFrame,Messages.getI18NString("error").getText(),Messages.getI18NString("createChatRoomError",new String[]{chatRoomName}).getText(),ex).showDialog();
  }
catch (  OperationNotSupportedException ex) {
    logger.error("Failed to create chat room.",ex);
    new ErrorDialog(mainFrame,Messages.getI18NString("error").getText(),Messages.getI18NString("createChatRoomError",new String[]{chatRoomName}).getText(),ex).showDialog();
  }
  if (chatRoom != null)   mainFrame.getMultiUserChatManager().getChatRoomList().addChatRoom(new ChatRoomWrapper(chatRoom));
}
