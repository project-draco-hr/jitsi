{
  String chatRoomName=chatRoomPanel.getChatRoomName();
  ChatRoom chatRoom=null;
  try {
    chatRoom=mainFrame.getMultiUserChatOpSet(pps).createChatRoom(chatRoomName,null);
  }
 catch (  OperationFailedException ex) {
    logger.error("Failed to create chat room.",ex);
    new ErrorDialog(mainFrame,Messages.getI18NString("createChatRoomError",new String[]{chatRoomName}).getText(),ex,Messages.getI18NString("error").getText()).showDialog();
  }
catch (  OperationNotSupportedException ex) {
    logger.error("Failed to create chat room.",ex);
    new ErrorDialog(mainFrame,Messages.getI18NString("createChatRoomError",new String[]{chatRoomName}).getText(),ex,Messages.getI18NString("error").getText()).showDialog();
  }
  if (chatRoom != null)   mainFrame.getChatRoomsListPanel().getChatRoomsList().addChatRoom(chatRoom,pps);
}
