{
  this.moveToMenu.setIcon(new ImageIcon(ImageLoader.getImage(ImageLoader.GROUPS_16x16_ICON)));
  this.addSubcontactMenu.setIcon(new ImageIcon(ImageLoader.getImage(ImageLoader.ADD_CONTACT_16x16_ICON)));
  this.removeContactMenu.setIcon(new ImageIcon(ImageLoader.getImage(ImageLoader.DELETE_16x16_ICON)));
  this.moveSubcontactMenu.setIcon(new ImageIcon(ImageLoader.getImage(ImageLoader.MOVE_CONTACT_ICON)));
  this.userInfoMenu.setIcon(new ImageIcon(ImageLoader.getImage(ImageLoader.INFO_16x16_ICON)));
  Iterator providers=this.mainFrame.getProtocolProviders();
  if (providers.hasNext()) {
    JLabel infoLabel=new JLabel(Messages.getString("selectAccount"));
    infoLabel.setBorder(BorderFactory.createEmptyBorder(0,5,0,0));
    infoLabel.setFont(Constants.FONT.deriveFont(Font.BOLD));
    this.addSubcontactMenu.add(infoLabel);
    this.addSubcontactMenu.addSeparator();
  }
  while (providers.hasNext()) {
    ProtocolProviderService pps=(ProtocolProviderService)providers.next();
    String protocolName=pps.getProtocolName();
    JMenuItem menuItem=new JMenuItem(pps.getAccountID().getUserID(),new ImageIcon(Constants.getProtocolIcon(protocolName)));
    menuItem.setName(addSubcontactPrefix + protocolName);
    menuItem.addActionListener(this);
    this.addSubcontactMenu.add(menuItem);
  }
  Iterator groups=this.mainFrame.getAllGroups();
  if (groups.hasNext()) {
    JLabel infoLabel=new JLabel(Messages.getString("selectGroup"));
    infoLabel.setBorder(BorderFactory.createEmptyBorder(0,5,0,0));
    infoLabel.setFont(Constants.FONT.deriveFont(Font.BOLD));
    this.moveToMenu.add(infoLabel);
    this.moveToMenu.addSeparator();
  }
  while (groups.hasNext()) {
    MetaContactGroup group=(MetaContactGroup)groups.next();
    JMenuItem menuItem=new JMenuItem(group.getGroupName());
    menuItem.setName(moveToPrefix + group.getMetaUID());
    menuItem.addActionListener(this);
    this.moveToMenu.add(menuItem);
  }
  Iterator contacts=contactItem.getContacts();
  if (contactItem.getContactCount() > 1) {
    JMenuItem allItem=new JMenuItem(Messages.getString("allContacts"));
    JMenuItem allItem1=new JMenuItem(Messages.getString("allContacts"));
    allItem.setFont(Constants.FONT.deriveFont(Font.BOLD));
    allItem1.setFont(Constants.FONT.deriveFont(Font.BOLD));
    allItem.addActionListener(this);
    allItem1.addActionListener(this);
    allItem.setName(removeContactPrefix + "allContacts");
    allItem1.setName(moveSubcontactPrefix + "allContacts");
    this.removeContactMenu.add(allItem);
    this.moveSubcontactMenu.add(allItem1);
    this.removeContactMenu.addSeparator();
    this.moveSubcontactMenu.addSeparator();
  }
  while (contacts.hasNext()) {
    Contact contact=(Contact)contacts.next();
    ProtocolProviderService protocolProvider=contact.getProtocolProvider();
    String contactDisplayName=contact.getDisplayName();
    JMenuItem contactItem=new JMenuItem(contactDisplayName);
    JMenuItem contactItem1=new JMenuItem(contactDisplayName);
    JMenuItem contactItem2=new JMenuItem(contactDisplayName);
    String protocolName=contact.getProtocolProvider().getProtocolName();
    Icon protocolIcon=new ImageIcon(Constants.getProtocolIcon(protocolName));
    contactItem.setIcon(protocolIcon);
    contactItem1.setIcon(protocolIcon);
    contactItem.setName(removeContactPrefix + contact.getAddress() + protocolProvider.getProtocolName());
    contactItem1.setName(moveSubcontactPrefix + contact.getAddress() + protocolProvider.getProtocolName());
    contactItem2.setName(infoSubcontactPrefix + contact.getAddress() + protocolProvider.getProtocolName());
    contactItem.addActionListener(this);
    contactItem1.addActionListener(this);
    contactItem2.addActionListener(this);
    this.removeContactMenu.add(contactItem);
    this.moveSubcontactMenu.add(contactItem1);
    OperationSetWebContactInfo wContactInfo=mainFrame.getWebContactInfo(protocolProvider);
    if (wContactInfo == null) {
      contactItem2.setEnabled(false);
      contactItem2.setToolTipText(Messages.getString("dontSupportWebInfo"));
    }
    this.userInfoMenu.add(contactItem2);
  }
  this.add(sendMessageItem);
  this.add(sendFileItem);
  this.addSeparator();
  this.add(moveToMenu);
  this.add(moveSubcontactMenu);
  this.addSeparator();
  this.add(addSubcontactMenu);
  this.addSeparator();
  this.add(removeContactMenu);
  this.add(renameContactItem);
  this.addSeparator();
  this.add(viewHistoryItem);
  this.add(userInfoMenu);
  this.sendMessageItem.setName("sendMessage");
  this.sendFileItem.setName("sendFile");
  this.moveToMenu.setName("moveToGroup");
  this.addSubcontactMenu.setName("addSubcontact");
  this.renameContactItem.setName("renameContact");
  this.viewHistoryItem.setName("viewHistory");
  this.userInfoMenu.setName("userInfo");
  this.sendMessageItem.addActionListener(this);
  this.sendFileItem.addActionListener(this);
  this.renameContactItem.addActionListener(this);
  this.viewHistoryItem.addActionListener(this);
  this.userInfoMenu.addActionListener(this);
  this.sendFileItem.setEnabled(false);
}
