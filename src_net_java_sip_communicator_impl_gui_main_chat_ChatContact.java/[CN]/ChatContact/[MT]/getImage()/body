{
  byte[] contactImage=null;
  if (!(sourceContact instanceof Contact))   return null;
  Contact contact=(Contact)sourceContact;
  MetaContact metaContact=GuiActivator.getMetaContactListService().findMetaContactByContact(contact);
  if (metaContact != null) {
    contactImage=metaContact.getAvatar();
  }
 else   if (contact != null) {
    try {
      contactImage=contact.getImage();
    }
 catch (    Exception ex) {
      logger.error("Failed to load contact photo.",ex);
    }
  }
  if (contactImage != null) {
    Image image=ImageLoader.getBytesInImage(contactImage);
    if (image == null)     return null;
    return ImageUtils.scaleIconWithinBounds(new ImageIcon(image),AVATAR_ICON_WIDTH,AVATAR_ICON_HEIGHT);
  }
 else   return null;
}
