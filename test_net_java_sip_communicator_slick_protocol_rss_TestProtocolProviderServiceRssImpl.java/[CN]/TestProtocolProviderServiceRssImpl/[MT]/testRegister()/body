{
  fixture.provider.addRegistrationStateChangeListener(this.eventCollector);
  fixture.provider.register(new NullSecurityAuthority());
  logger.debug("Waiting for registration to complete...");
  eventCollector.waitForEvent(WAIT_DELAY);
  assertTrue("No events were dispatched during the registration process.",eventCollector.collectedStates.size() > 0);
  assertTrue("No registration event notifying of registration was" + " dispatched." + " All events were:"+ eventCollector.collectedStates,eventCollector.collectedStates.contains(RegistrationState.REGISTERED));
  fixture.provider.removeRegistrationStateChangeListener(eventCollector);
}
