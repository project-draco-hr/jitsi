{
  StringBuffer buf=new StringBuffer();
  for (int i=0, len=text.length; i < len; i++) {
    if (i >= 20) {
      buf.append("...");
      break;
    }
    int ch=text[i] & 0xFF;
    if ((ch < ' ') || (ch > 127)) {
      buf.append("\\0");
      buf.append(Integer.toString(ch,8));
    }
 else {
      buf.append((char)ch);
    }
  }
  return buf.toString();
}
