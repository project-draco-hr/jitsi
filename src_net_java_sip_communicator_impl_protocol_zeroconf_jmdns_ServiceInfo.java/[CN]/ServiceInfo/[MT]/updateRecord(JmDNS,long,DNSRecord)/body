{
  if ((rec != null) && !rec.isExpired(now)) {
switch (rec.type) {
case DNSConstants.TYPE_A:
case DNSConstants.TYPE_AAAA:
      if (rec.name.equals(server)) {
        addr=((DNSRecord.Address)rec).getAddress();
      }
    break;
case DNSConstants.TYPE_SRV:
  if (rec.name.equals(getQualifiedName())) {
    DNSRecord.Service srv=(DNSRecord.Service)rec;
    server=srv.server;
    port=srv.port;
    weight=srv.weight;
    priority=srv.priority;
    addr=null;
    updateRecord(jmdns,now,(DNSRecord)jmdns.getCache().get(server,DNSConstants.TYPE_A,DNSConstants.CLASS_IN));
  }
break;
case DNSConstants.TYPE_TXT:
if (rec.name.equals(getQualifiedName())) {
DNSRecord.Text txt=(DNSRecord.Text)rec;
text=txt.text;
}
break;
}
if (hasData() && dns != null) {
dns.handleServiceResolved(this);
dns=null;
}
synchronized (this) {
notifyAll();
}
}
}
