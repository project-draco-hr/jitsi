{
  Object data=buffer.getData();
  short[] newShorts;
  if (data instanceof short[]) {
    short[] shorts=(short[])data;
    if (shorts.length >= newSize)     return shorts;
    newShorts=new short[newSize];
    System.arraycopy(shorts,0,newShorts,0,shorts.length);
  }
 else {
    newShorts=new short[newSize];
    buffer.setLength(0);
    buffer.setOffset(0);
  }
  buffer.setData(newShorts);
  return newShorts;
}
