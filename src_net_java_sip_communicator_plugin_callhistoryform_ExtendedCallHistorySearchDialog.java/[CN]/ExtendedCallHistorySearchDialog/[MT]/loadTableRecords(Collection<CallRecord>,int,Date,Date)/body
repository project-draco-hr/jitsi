{
  boolean addMe=true;
  lastDateFromHistory=null;
  callList.removeAll();
  Iterator<CallRecord> lastCalls=historyCalls.iterator();
  while (lastCalls.hasNext()) {
    addMe=true;
    CallRecord callRecord=lastCalls.next();
    Date callStartDate=callRecord.getStartTime();
    if (checkDate(callStartDate,since,before)) {
      if (lastDateFromHistory == null) {
        callList.addItem(processDate(callStartDate));
        lastDateFromHistory=callStartDate;
      }
 else {
        int compareResult=GuiUtils.compareDates(callStartDate,lastDateFromHistory);
        if (compareResult != 0) {
          callList.addItem(processDate(callStartDate));
          lastDateFromHistory=callStartDate;
        }
      }
    }
 else     addMe=false;
    if (addMe) {
      Iterator<CallPeerRecord> peers=callRecord.getPeerRecords().iterator();
      while (peers.hasNext() && addMe) {
        CallPeerRecord peerRecord=peers.next();
        String peerName=peerRecord.getPeerAddress();
        if (peerName.matches("(?i).*" + contactNameField.getText() + ".*")) {
          String direction;
          direction=checkCallType(calltype,callRecord);
          if (direction != null)           callList.addItem(new GuiCallPeerRecord(peerRecord,direction));
 else           addMe=false;
        }
 else         addMe=false;
      }
    }
  }
  if (callList.getModel().getSize() > 0)   callList.addItem(ExtendedCallHistorySearchActivator.getResources().getI18NString("service.gui.OLDER_CALLS") + "...");
}
