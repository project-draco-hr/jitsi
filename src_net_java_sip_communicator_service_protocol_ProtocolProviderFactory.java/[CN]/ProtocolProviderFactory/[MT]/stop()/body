{
  if (logger.isTraceEnabled())   logger.trace("Preparing to stop all protocol providers of" + this);
synchronized (registeredAccounts) {
    for (Enumeration<ServiceRegistration> registrations=registeredAccounts.elements(); registrations.hasMoreElements(); ) {
      ServiceRegistration reg=registrations.nextElement();
      stop(reg);
      reg.unregister();
    }
    registeredAccounts.clear();
  }
}
