{
  String userID=accountID.getAccountPropertyString(ProtocolProviderFactory.USER_ID);
  ProtocolProviderService service=createService(userID,accountID);
  Dictionary<String,String> properties=new Hashtable<String,String>();
  properties.put(PROTOCOL,protocolName);
  properties.put(USER_ID,userID);
  ServiceRegistration serviceRegistration=bundleContext.registerService(ProtocolProviderService.class.getName(),service,properties);
  if (serviceRegistration == null) {
    return false;
  }
synchronized (registeredAccounts) {
    registeredAccounts.put(accountID,serviceRegistration);
  }
  return true;
}
