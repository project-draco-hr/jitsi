{
  String sourcePackageName=getFactoryImplPackageName();
  String accNodeName="acc" + Long.toString(System.currentTimeMillis());
  ServiceReference confReference=bundleContext.getServiceReference(ConfigurationService.class.getName());
  ConfigurationService configurationService=(ConfigurationService)bundleContext.getService(confReference);
  configurationService.setProperty(sourcePackageName + "." + accNodeName,accNodeName);
  configurationService.setProperty(sourcePackageName + "." + accNodeName+ "."+ ACCOUNT_UID,accountID.getAccountUniqueID());
  Iterator accountPropKeys=accountID.getAccountProperties().keySet().iterator();
  while (accountPropKeys.hasNext()) {
    String propKey=(String)accountPropKeys.next();
    String propValue=(String)accountID.getAccountProperties().get(propKey);
    if (propKey.equals(PASSWORD))     propValue=new String(Base64.encode(propValue.getBytes()));
    configurationService.setProperty(sourcePackageName + "." + accNodeName+ "."+ propKey,propValue);
  }
  logger.debug("Stored account for id " + accountID.getAccountUniqueID() + " for package "+ getFactoryImplPackageName());
}
