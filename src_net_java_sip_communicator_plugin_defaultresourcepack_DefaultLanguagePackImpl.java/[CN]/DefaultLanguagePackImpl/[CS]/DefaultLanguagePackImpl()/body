{
  try {
    JarFile jf=new JarFile(getJarfileName());
    Enumeration resources=jf.entries();
    while (resources.hasMoreElements()) {
      JarEntry je=(JarEntry)resources.nextElement();
      Locale locale;
      String entryName=je.getName();
      if (entryName.matches("resources/languages/.*\\.properties")) {
        int localeIndex=entryName.indexOf('_');
        if (localeIndex == -1)         locale=new Locale("EN");
 else {
          String localeName=entryName.substring(localeIndex + 1,entryName.indexOf('.'));
          locale=new Locale(localeName);
        }
        localeList.add(locale);
      }
    }
  }
 catch (  java.io.IOException e) {
    logger.error("Cannot load locales.",e);
  }
}
