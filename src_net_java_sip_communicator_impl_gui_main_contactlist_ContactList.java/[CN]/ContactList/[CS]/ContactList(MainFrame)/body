{
  this.mainFrame=mainFrame;
  this.contactList=mainFrame.getContactList();
  this.listModel=new ContactListModel(contactList);
  this.setModel(listModel);
  this.setOpaque(false);
  this.setBorder(BorderFactory.createEmptyBorder(3,3,3,3));
  this.getSelectionModel().setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
  this.setCellRenderer(new ContactListCellRenderer(mainFrame));
  this.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));
  this.contactList.addMetaContactListListener(this);
  this.addMouseListener(this);
  this.addMouseMotionListener(this);
  this.addFocusListener(new FocusAdapter(){
    public void focusLost(    FocusEvent e){
      if (draggedElement != null) {
        draggedElement.setVisible(false);
        draggedElement=null;
      }
    }
  }
);
  this.addKeyListener(new KeyAdapter(){
    public void keyPressed(    KeyEvent e){
      if (e.getKeyCode() == KeyEvent.VK_ESCAPE) {
        if (draggedElement != null) {
          draggedElement.setVisible(false);
          draggedElement=null;
        }
      }
    }
  }
);
  this.addListSelectionListener(new ListSelectionListener(){
    public void valueChanged(    ListSelectionEvent e){
      if (!e.getValueIsAdjusting()) {
        currentlySelectedObject=getSelectedValue();
      }
    }
  }
);
  this.setShowOffline(ConfigurationManager.isShowOffline());
  new ContactListRefresh().start();
}
