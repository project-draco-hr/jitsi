{
  try {
    Map copyContentToRefresh=null;
    while (refreshEnabled) {
synchronized (contentToRefresh) {
        if (contentToRefresh.isEmpty())         contentToRefresh.wait();
        copyContentToRefresh=new Hashtable(contentToRefresh);
        contentToRefresh.clear();
      }
      Iterator i=copyContentToRefresh.entrySet().iterator();
      while (i.hasNext()) {
        Map.Entry groupEntry=(Map.Entry)i.next();
        String operation=(String)groupEntry.getValue();
        Object o=groupEntry.getKey();
        if (o instanceof MetaContactGroup) {
          MetaContactGroup group=(MetaContactGroup)o;
          SwingUtilities.invokeLater(new RefreshGroup(group,operation));
        }
 else         if (o instanceof MetaContact) {
          MetaContact contact=(MetaContact)o;
          SwingUtilities.invokeLater(new RefreshContact(contact,contact.getParentMetaContactGroup(),operation));
        }
 else         if (o instanceof MetaContactEvent) {
          MetaContactEvent event=(MetaContactEvent)o;
          MetaContact contact=event.getSourceMetaContact();
          MetaContactGroup parentGroup=event.getParentGroup();
          SwingUtilities.invokeLater(new RefreshContact(contact,parentGroup,operation));
        }
      }
    }
  }
 catch (  InterruptedException e) {
    e.printStackTrace();
  }
}
