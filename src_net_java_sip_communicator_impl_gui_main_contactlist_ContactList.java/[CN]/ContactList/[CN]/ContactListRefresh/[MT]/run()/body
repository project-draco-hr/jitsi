{
  while (refreshEnabled) {
synchronized (refreshLock) {
      if (!isModified) {
        try {
          refreshLock.wait(9000);
          isModified=true;
        }
 catch (        InterruptedException exc) {
          logger.error("Storing contact list failed",exc);
        }
      }
    }
    if (isModified) {
      if (groupsToModify.size() > 0) {
        for (int i=0; i < groupsToModify.size(); i++) {
          MetaContactGroup group=(MetaContactGroup)groupsToModify.get(i);
          this.refreshGroup(group);
        }
        groupsToModify.removeAllElements();
      }
 else {
        this.refreshAll();
      }
      isModified=false;
    }
  }
}
