{
  Object selectedObject=null;
  int currentlySelectedIndex=this.getSelectedIndex();
  if (currentlySelectedIndex != -1) {
    selectedObject=listModel.getElementAt(currentlySelectedIndex);
  }
  int listSize=listModel.getSize();
  listModel.setShowOffline(isShowOffline);
  ConfigurationManager.setShowOffline(isShowOffline);
  int newListSize=listModel.getSize();
  if (!isShowOffline && listSize > 0) {
    if (newListSize > 0) {
      listModel.contentChanged(0,newListSize - 1);
      listModel.contentRemoved(newListSize - 1,listSize - 1);
    }
 else     listModel.contentRemoved(0,listSize - 1);
  }
 else   if (isShowOffline && newListSize > 0) {
    if (listSize > 0) {
      listModel.contentChanged(0,listSize - 1);
      listModel.contentAdded(listSize - 1,newListSize - 1);
    }
 else     listModel.contentAdded(0,newListSize - 1);
  }
  if (selectedObject != null) {
    if (selectedObject instanceof MetaContact) {
      this.setSelectedIndex(listModel.indexOf((MetaContact)selectedObject));
    }
 else {
      this.setSelectedIndex(listModel.indexOf((MetaContactGroup)selectedObject));
    }
  }
}
