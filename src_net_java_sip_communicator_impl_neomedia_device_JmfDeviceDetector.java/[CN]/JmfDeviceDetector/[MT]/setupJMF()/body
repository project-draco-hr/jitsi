{
  logger.logEntry();
  try {
    File jmfPropsFile=null;
    try {
      FileAccessService faService=NeomediaActivator.getFileAccessService();
      if (faService != null) {
        jmfPropsFile=faService.getPrivatePersistentFile(JMF_PROPERTIES_FILE_NAME);
      }
 else {
        jmfPropsFile=new File(System.getProperty("user.home") + File.separator + ".sip-communicator/jmf.properties");
      }
      if (jmfPropsFile.exists())       jmfPropsFile.delete();
      jmfPropsFile.createNewFile();
    }
 catch (    Exception exc) {
      throw new RuntimeException("Failed to create the jmf.properties file.",exc);
    }
    String classpath=System.getProperty("java.class.path");
    classpath=jmfPropsFile.getParentFile().getAbsolutePath() + System.getProperty("path.separator") + classpath;
    System.setProperty("java.class.path",classpath);
    JmfDeviceDetector detector=new JmfDeviceDetector();
    detector.initialize();
  }
  finally {
    logger.logExit();
  }
  setupRenderers();
}
