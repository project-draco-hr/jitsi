{
  @SuppressWarnings("unchecked") Vector<CaptureDeviceInfo> devices=(Vector<CaptureDeviceInfo>)CaptureDeviceManager.getDeviceList(null);
  List<CaptureDeviceInfo> devicesToRemove=new ArrayList<CaptureDeviceInfo>(devices.size());
  for (  CaptureDeviceInfo device : devices) {
    Format formats[]=device.getFormats();
    if ((formats.length > 0) && (formats[0] instanceof VideoFormat)) {
      MediaLocator locator=device.getLocator();
      if ((locator != null) && ImageStreamingAuto.LOCATOR_PROTOCOL.equals(locator.getProtocol())) {
        devicesToRemove.add(device);
      }
    }
  }
  for (  CaptureDeviceInfo deviceToRemove : devicesToRemove)   CaptureDeviceManager.removeDevice(deviceToRemove);
  if (!NeomediaActivator.getConfigurationService().getBoolean(MediaServiceImpl.DISABLE_VIDEO_SUPPORT_PNAME,false)) {
    try {
      new ImageStreamingAuto();
    }
 catch (    Throwable t) {
      logger.debug("No desktop streaming available: " + t.getMessage(),t);
      if (t instanceof ThreadDeath)       throw (ThreadDeath)t;
    }
  }
}
