{
  int count=0;
  if (parentGroup != null && !this.isGroupClosed(parentGroup)) {
    if (showOffline) {
      count=parentGroup.countChildContacts();
    }
 else {
      Iterator i=parentGroup.getChildContacts();
      while (i.hasNext()) {
        MetaContact contact=(MetaContact)i.next();
        if (!offlineContacts.contains(contact))         count++;
      }
    }
    Iterator subgroups=parentGroup.getSubgroups();
    while (subgroups.hasNext()) {
      MetaContactGroup subgroup=(MetaContactGroup)subgroups.next();
      count+=countContactsAndSubgroups(subgroup);
    }
  }
  return count;
}
