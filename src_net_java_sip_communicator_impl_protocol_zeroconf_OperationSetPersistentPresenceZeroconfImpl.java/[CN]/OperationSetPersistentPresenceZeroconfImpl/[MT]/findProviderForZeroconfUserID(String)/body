{
  BundleContext bc=ZeroconfActivator.getBundleContext();
  String osgiQuery="(&" + "(" + ProtocolProviderFactory.PROTOCOL + "=Zeroconf)"+ "("+ ProtocolProviderFactory.USER_ID+ "="+ zeroconfUserID+ ")"+ ")";
  ServiceReference[] refs=null;
  try {
    refs=bc.getServiceReferences(ProtocolProviderService.class.getName(),osgiQuery);
  }
 catch (  InvalidSyntaxException ex) {
    logger.error("Failed to execute the following osgi query: " + osgiQuery,ex);
  }
  if (refs != null && refs.length > 0) {
    return (ProtocolProviderServiceZeroconfImpl)bc.getService(refs[0]);
  }
  return null;
}
