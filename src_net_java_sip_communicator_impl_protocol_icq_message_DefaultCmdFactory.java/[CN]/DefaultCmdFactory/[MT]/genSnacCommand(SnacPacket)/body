{
  FromIcqCmd fromICQCmd=new FromIcqCmd(packet);
  if (fromICQCmd.getType().equals(AbstractIcqCmd.CMD_META_SHORT_INFO_CMD)) {
    return new MetaShortInfoCmd(fromICQCmd);
  }
 else   if (FullInfoCmd.isOfType(fromICQCmd.getType())) {
    return new FullInfoCmd(fromICQCmd);
  }
 else   if (fromICQCmd.getType().equals(AbstractIcqCmd.CMD_OFFLINE_MSG) || fromICQCmd.getType().equals(AbstractIcqCmd.CMD_OFFLINE_MSG_DONE)) {
    return new OfflineMsgCmd(fromICQCmd);
  }
 else   if (fromICQCmd.getType().equals(FullInfoAck.SET_FULLINFO_ACK)) {
    return new FullInfoAck(fromICQCmd);
  }
 else {
    logger.debug("Packet Received we don't know about! " + packet);
    logger.debug("Packet primary : " + fromICQCmd.getType().getPrimary());
    logger.debug("Packet secondary : " + fromICQCmd.getType().getSecondary());
    return null;
  }
}
