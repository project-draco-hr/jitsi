{
  if (captureDevice instanceof PullBufferDataSource) {
    captureDevice=new PushBufferDataSourceAdapter((PullBufferDataSource)captureDevice);
  }
  if (logger.isTraceEnabled()) {
    captureDevice=MediaDeviceImpl.createTracingCaptureDevice(captureDevice,logger);
  }
  this.captureDevice=captureDevice;
  this.localOutputDataSource=createOutputDataSource();
  addInputDataSource((DataSource)this.captureDevice,this.localOutputDataSource);
}
