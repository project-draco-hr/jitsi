{
  String formatControlType=FormatControl.class.getName();
  AudioFormat outputFormat=null;
synchronized (inputDataSources) {
    for (    InputDataSourceDesc inputDataSource : inputDataSources) {
      DataSource effectiveInputDataSource=inputDataSource.getEffectiveInputDataSource();
      if (effectiveInputDataSource == null)       continue;
      FormatControl formatControl=(FormatControl)effectiveInputDataSource.getControl(formatControlType);
      if (formatControl != null) {
        AudioFormat format=(AudioFormat)formatControl.getFormat();
        if (format != null) {
          int signed=format.getSigned();
          if ((AudioFormat.SIGNED == signed) || (Format.NOT_SPECIFIED == signed)) {
            int endian=format.getEndian();
            if ((AudioFormat.LITTLE_ENDIAN == endian) || (Format.NOT_SPECIFIED == endian)) {
              outputFormat=format;
              break;
            }
          }
        }
      }
    }
  }
  if (outputFormat == null)   outputFormat=DEFAULT_OUTPUT_FORMAT;
  if (logger.isTraceEnabled()) {
    logger.trace("Determined outputFormat of AudioMixer" + " from inputDataSources to be " + outputFormat);
  }
  return outputFormat;
}
