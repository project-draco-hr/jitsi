{
  byte[] input=(byte[])inputBuffer.getData();
  int outputOffset=outputBuffer.getOffset();
  int outputLength=inputBuffer.getLength() * 4;
  byte[] output=validateByteArraySize(outputBuffer,outputOffset + outputLength);
  g722_decoder_process(decoder,input,inputBuffer.getOffset(),output,outputOffset,outputLength);
  for (int i=outputOffset; i < outputLength; i+=2) {
    short sample=ArrayIOUtils.readShort(output,i);
    sample<<=2;
    ArrayIOUtils.writeShort(sample,output,i);
  }
  outputBuffer.setDuration((outputLength * 1000000L) / (16L * 2L));
  outputBuffer.setFormat(getOutputFormat());
  outputBuffer.setLength(outputLength);
  return BUFFER_PROCESSED_OK;
}
