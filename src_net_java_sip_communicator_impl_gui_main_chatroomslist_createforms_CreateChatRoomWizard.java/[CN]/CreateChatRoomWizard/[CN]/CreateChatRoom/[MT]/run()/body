{
  ChatRoom chatRoom=null;
  try {
    chatRoom=mainFrame.getMultiUserChatOpSet(newChatRoom.getProtocolProvider()).createChatRoom(newChatRoom.getChatRoomName(),null);
  }
 catch (  OperationFailedException ex) {
    logger.error("Failed to create chat room.",ex);
    new ErrorDialog(mainFrame,Messages.getI18NString("error").getText(),Messages.getI18NString("createChatRoomError",new String[]{newChatRoom.getChatRoomName()}).getText(),ex).showDialog();
  }
catch (  OperationNotSupportedException ex) {
    logger.error("Failed to create chat room.",ex);
    new ErrorDialog(mainFrame,Messages.getI18NString("error").getText(),Messages.getI18NString("createChatRoomError",new String[]{newChatRoom.getChatRoomName()}).getText(),ex).showDialog();
  }
  if (chatRoom != null)   mainFrame.getChatRoomsListPanel().getChatRoomsList().addChatRoom(new ChatRoomWrapper(chatRoom));
}
