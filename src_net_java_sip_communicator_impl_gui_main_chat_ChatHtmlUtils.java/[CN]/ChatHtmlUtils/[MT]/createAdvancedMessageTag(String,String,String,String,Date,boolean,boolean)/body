{
  StringBuilder messageTag=new StringBuilder();
  SimpleDateFormat sdf=new SimpleDateFormat(HistoryService.DATE_FORMAT);
  messageTag.append(String.format("<div id='%s' %s = '%s' ",MESSAGE_TEXT_ID + messageID,NAME_ATTRIBUTE,contactName));
  messageTag.append(DATE_ATTRIBUTE + "=\"" + sdf.format(date)+ "\" ");
  messageTag.append(String.format("%s = '%s' ",ORIGINAL_MESSAGE_ATTRIBUTE,GuiUtils.escapeHTMLChars(message)));
  messageTag.append(IncomingMessageStyle.createSingleMessageStyle(isHistory,isEdited,false));
  messageTag.append(">");
  messageTag.append(createStartPlainTextTag(contentType));
  messageTag.append(message);
  if (isEdited)   messageTag.append("    ");
  messageTag.append(createEndPlainTextTag(contentType));
  if (isEdited)   messageTag.append(createEditedAt(date));
  messageTag.append("</div>");
  return messageTag.toString();
}
