{
  StringBuffer headerBuffer=new StringBuffer();
  SimpleDateFormat sdf=new SimpleDateFormat(HistoryService.DATE_FORMAT);
  headerBuffer.append("<h2 id=\"" + MESSAGE_HEADER_ID + "\" ");
  headerBuffer.append(DATE_ATTRIBUTE + "='" + sdf.format(date)+ "'"+ ">");
  headerBuffer.append("<a style=\"color:#488fe7;");
  headerBuffer.append("font-weight:bold;");
  headerBuffer.append("text-decoration:none;\" ");
  headerBuffer.append("href=\"" + contactName + "\">");
  headerBuffer.append(contactDisplayName + createEditedAtTag(messageID,-1));
  headerBuffer.append("</a>");
  headerBuffer.append("</h2>");
  StringBuffer messageBuff=new StringBuffer();
  messageBuff.append("<table width=\"100%\" ");
  messageBuff.append(NAME_ATTRIBUTE + "=\"" + Tag.TABLE.toString()+ "\" ");
  messageBuff.append("style=\"background-color:#efefef;\">");
  messageBuff.append("<tr>");
  messageBuff.append("<td align=\"left\" >");
  messageBuff.append(headerBuffer.toString());
  messageBuff.append("</td>");
  messageBuff.append("<td align=\"right\"><h2>");
  messageBuff.append(getDateString(date) + GuiUtils.formatTime(date));
  messageBuff.append("</h2></td>");
  messageBuff.append("</tr>");
  messageBuff.append("</table>");
  messageBuff.append(createSimpleMessageTag(messageID,contactName,message,contentType,date,false,isHistory));
  return messageBuff.toString();
}
