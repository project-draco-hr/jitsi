{
  Thread shutdownTimeoutThread=new Thread(){
    public void run(){
synchronized (this) {
        try {
          if (logger.isTraceEnabled())           logger.trace("Starting shutdown countdown of " + SHUTDOWN_TIMEOUT + "ms.");
          wait(SHUTDOWN_TIMEOUT);
          logger.error("Failed to gently shutdown. Forcing exit.");
          System.exit(500);
        }
 catch (        InterruptedException ex) {
          if (logger.isDebugEnabled())           logger.debug("Interrupted shutdown timer.");
        }
      }
    }
  }
;
  if (logger.isTraceEnabled())   logger.trace("Created the shutdown timer thread.");
  shutdownTimeoutThread.setDaemon(true);
  shutdownTimeoutThread.start();
}
