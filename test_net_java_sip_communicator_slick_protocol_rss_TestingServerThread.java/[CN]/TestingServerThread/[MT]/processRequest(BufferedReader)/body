{
  String crtLine;
  String httpVersion=null;
  boolean gotRequest=false;
  while (!"".equals(crtLine=in.readLine().trim()) && crtLine != null) {
    if (crtLine.startsWith("GET /")) {
      gotRequest=true;
      int httpPos=-1;
      httpPos=crtLine.lastIndexOf(" HTTP/");
      if (httpPos != -1)       httpVersion=crtLine.substring(httpPos + 1);
 else       httpVersion="HTTP/1.0";
    }
  }
  if (!gotRequest)   return;
  BufferedWriter out=new BufferedWriter(new OutputStreamWriter(socket.getOutputStream()));
  sendResponse(out,httpVersion);
}
