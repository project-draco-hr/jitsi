{
  String content="";
  SimpleDateFormat dateFormatter=new SimpleDateFormat("EEE, d MMM yyyy HH:mm:ss Z");
switch (launcher.getServerBehaviour()) {
case TestingServer.INVALID:
    content=launcher.usesAtom() ? FeedFactory.getAtomInvalid() : FeedFactory.getRssInvalid();
  break;
case TestingServer.VALID:
content=launcher.usesAtom() ? FeedFactory.getAtom() : FeedFactory.getRss();
break;
case TestingServer.VALID_UPDATE:
content=launcher.usesAtom() ? FeedFactory.getAtomUpdated() : FeedFactory.getRssUpdated();
break;
case TestingServer.VALID_NEW:
content=launcher.usesAtom() ? FeedFactory.getAtomNew() : FeedFactory.getRssNew();
break;
}
out.write(httpVersion + "200 OK\r\n");
out.write("Server: RssTestingServer/0.0.1\r\n");
out.write("Date: " + dateFormatter.format(new Date()) + "\r\n");
out.write("Content-Type: text/html; charset=utf-8\r\n");
out.write("Content-length: " + content.length() + "\r\n");
out.write("\r\n");
out.write(content);
out.close();
socket.close();
socket=null;
}
