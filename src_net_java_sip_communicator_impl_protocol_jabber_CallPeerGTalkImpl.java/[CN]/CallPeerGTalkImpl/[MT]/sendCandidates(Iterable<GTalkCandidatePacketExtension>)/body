{
  ProtocolProviderServiceJabberImpl protocolProvider=getProtocolProvider();
  SessionIQ candidatesIQ=new SessionIQ();
  candidatesIQ.setGTalkType(GTalkType.CANDIDATES);
  candidatesIQ.setFrom(protocolProvider.getOurJID());
  candidatesIQ.setInitiator(isInitiator() ? getAddress() : protocolProvider.getOurJID());
  candidatesIQ.setID(getSID());
  candidatesIQ.setTo(getAddress());
  candidatesIQ.setType(IQ.Type.SET);
  for (  GTalkCandidatePacketExtension candidate : candidates) {
    if (isAndroidOrVtokOrTalkClient(getAddress()) && NetworkUtils.isIPv6Address(candidate.getAddress()))     continue;
    candidatesIQ.addExtension(candidate);
  }
  protocolProvider.getConnection().sendPacket(candidatesIQ);
}
