{
  for (int i=0; i < floats.length; i++) {
    float f=floats[i];
    if (f >= 0.0f)     f+=0.5f;
 else     f-=0.5f;
    if (f > 32767.0f)     f=32767.0f;
    if (f < -32768.0f)     f=-32768.0f;
    shorts[i]=(short)f;
  }
}
