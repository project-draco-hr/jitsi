{
  xml.append('<').append(ELEMENT_NAME);
  MediaDirection direction=getDirection();
  if ((direction != null) && (direction != MediaDirection.SENDRECV)) {
    xml.append(' ').append(DIRECTION_ATTR_NAME).append("='").append(direction.toString()).append('\'');
  }
  int expire=getExpire();
  if (expire >= 0) {
    xml.append(' ').append(EXPIRE_ATTR_NAME).append("='").append(expire).append('\'');
  }
  String host=getHost();
  if (host != null) {
    xml.append(' ').append(HOST_ATTR_NAME).append("='").append(host).append('\'');
  }
  String id=getID();
  if (id != null) {
    xml.append(' ').append(ID_ATTR_NAME).append("='").append(id).append('\'');
  }
  Boolean initiator=isInitiator();
  if (initiator != null) {
    xml.append(' ').append(INITIATOR_ATTR_NAME).append("='").append(initiator).append('\'');
  }
  int rtcpPort=getRTCPPort();
  if (rtcpPort > 0) {
    xml.append(' ').append(RTCP_PORT_ATTR_NAME).append("='").append(rtcpPort).append('\'');
  }
  int rtpPort=getRTPPort();
  if (rtpPort > 0) {
    xml.append(' ').append(RTP_PORT_ATTR_NAME).append("='").append(rtpPort).append('\'');
  }
  List<PayloadTypePacketExtension> payloadTypes=getPayloadTypes();
  boolean hasPayloadTypes=(payloadTypes.size() != 0);
  long[] ssrcs=getSSRCs();
  boolean hasSSRCs=(ssrcs.length != 0);
  IceUdpTransportPacketExtension transport=getTransport();
  boolean hasTransport=(transport != null);
  if (hasPayloadTypes || hasSSRCs || hasTransport) {
    xml.append('>');
    if (hasPayloadTypes) {
      for (      PayloadTypePacketExtension payloadType : payloadTypes)       xml.append(payloadType.toXML());
    }
    if (hasSSRCs) {
      for (      long ssrc : ssrcs) {
        xml.append('<').append(SSRC_ELEMENT_NAME).append('>').append(ssrc).append("</").append(SSRC_ELEMENT_NAME).append('>');
      }
    }
    if (hasTransport)     xml.append(transport.toXML());
    xml.append("</").append(ELEMENT_NAME).append('>');
  }
 else {
    xml.append(" />");
  }
}
