{
  if (call != null) {
    OperationSetBasicTelephony telephony=call.getProtocolProvider().getOperationSet(OperationSetBasicTelephony.class);
    Iterator<? extends CallPeer> peers=call.getCallPeers();
    boolean isHoldSelected=isSelected();
    while (peers.hasNext()) {
      CallPeer callPeer=peers.next();
      try {
        if (isHoldSelected)         telephony.putOnHold(callPeer);
 else         telephony.putOffHold(callPeer);
      }
 catch (      OperationFailedException ex) {
        if (isHoldSelected)         logger.error("Failed to put on hold.",ex);
 else         logger.error("Failed to put off hold.",ex);
      }
    }
  }
}
