{
  Contact chatProtocolContact=chatPanel.getProtocolContact();
  OperationSetTypingNotifications tnOperationSet=(OperationSetTypingNotifications)chatProtocolContact.getProtocolProvider().getOperationSet(OperationSetTypingNotifications.class);
  typingTimer.stop();
  if (typingState == OperationSetTypingNotifications.STATE_TYPING) {
    try {
      tnOperationSet.sendTypingNotification(chatProtocolContact,OperationSetTypingNotifications.STATE_PAUSED);
      typingState=OperationSetTypingNotifications.STATE_PAUSED;
      stoppedTypingTimer.setDelay(3 * 1000);
    }
 catch (    Exception ex) {
      logger.error("Failed to send typing notifications.",ex);
    }
  }
 else   if (typingState == OperationSetTypingNotifications.STATE_PAUSED) {
    stopTypingTimer();
  }
}
