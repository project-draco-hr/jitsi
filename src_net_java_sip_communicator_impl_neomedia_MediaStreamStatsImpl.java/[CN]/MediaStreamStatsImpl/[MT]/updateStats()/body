{
  long currentTimeMs=System.currentTimeMillis();
  long downloadNewNbLost=this.getDownloadNbPDULost();
  long downloadNewNbRecv=this.getDownloadNbPDUProcessed();
  long uploadNewNbRecv=this.getUploadNbPDUProcessed();
  long downloadNewNbByte=this.getDownloadNbByte();
  long uploadNewNbByte=this.getDownloadNbByte();
  long downloadNbSteps=downloadNewNbRecv - this.downloadNbPackets;
  long uploadNbSteps=uploadNewNbRecv - this.uploadNbPackets;
  double downloadNewPercentLoss=MediaStreamStatsImpl.computePercentLoss(downloadNewNbRecv - this.downloadNbPackets,downloadNewNbLost - this.downloadNbLost);
  this.downloadPercentLoss=MediaStreamStatsImpl.computeEWMA(downloadNbSteps,this.downloadPercentLoss,downloadNewPercentLoss);
  double downloadNewRateKiloBitPerSec=MediaStreamStatsImpl.computeRateKiloBitPerSec(downloadNewNbByte - this.downloadNbByte,currentTimeMs - this.updateTimeMs);
  this.downloadRateKiloBitPerSec=MediaStreamStatsImpl.computeEWMA(downloadNbSteps,this.downloadRateKiloBitPerSec,downloadNewRateKiloBitPerSec);
  double uploadNewRateKiloBitPerSec=MediaStreamStatsImpl.computeRateKiloBitPerSec(uploadNewNbByte - this.uploadNbByte,currentTimeMs - this.updateTimeMs);
  this.uploadRateKiloBitPerSec=MediaStreamStatsImpl.computeEWMA(uploadNbSteps,this.uploadRateKiloBitPerSec,uploadNewRateKiloBitPerSec);
  this.updateTimeMs=currentTimeMs;
  this.downloadNbLost=downloadNewNbLost;
  this.downloadNbPackets=downloadNewNbRecv;
  this.uploadNbPackets=uploadNewNbRecv;
  this.downloadNbByte=downloadNewNbByte;
  this.uploadNbByte=uploadNewNbByte;
}
