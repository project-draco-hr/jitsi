{
  Object syncRoot=getSyncRoot();
synchronized (syncRoot) {
    boolean interrupted=false;
    try {
      while (cache != null) {
        try {
          syncRoot.wait();
        }
 catch (        InterruptedException ie) {
          interrupted=true;
        }
      }
    }
  finally {
      if (interrupted)       Thread.currentThread().interrupt();
    }
    cache=new Buffer();
    try {
      stream.read(cache);
      readException=null;
    }
 catch (    IOException ioe) {
      readException=ioe;
    }
  }
}
