{
  FileTransfer fileTransfer=event.getFileTransfer();
  fileTransfer.addStatusListener(this);
  if (fileTransfer.getDirection() == FileTransfer.IN)   return;
  try {
    History history=getHistory(null,fileTransfer.getContact());
    HistoryWriter historyWriter=history.getWriter();
    historyWriter.addRecord(new String[]{fileTransfer.getFile().getCanonicalPath(),getDirection(FileTransfer.OUT),String.valueOf(event.getTimestamp().getTime()),FILE_TRANSFER_ACTIVE,fileTransfer.getID()});
  }
 catch (  IOException e) {
    logger.error("Could not add file transfer log to history",e);
  }
}
