{
  try {
    FileTransfer ft=event.getFileTransfer();
    String status=getStatus(ft.getStatus());
    if (status == null)     return;
    History history=getHistory(null,ft.getContact());
    HistoryWriter historyWriter=history.getWriter();
    historyWriter.addRecord(new String[]{ft.getFile().getCanonicalPath(),getDirection(ft.getDirection()),String.valueOf(new Date().getTime()),status});
  }
 catch (  IOException e) {
    logger.error("Could not add file transfer log to history",e);
  }
}
