{
  if (messagesPerPage >= Constants.CHAT_BUFFER_SIZE) {
    Element firstHeaderElement=this.document.getElement("header");
    Element firstMessageElement=this.document.getElement("message");
    try {
      this.document.remove(firstHeaderElement.getStartOffset(),firstHeaderElement.getEndOffset() - firstHeaderElement.getStartOffset());
      this.document.remove(firstMessageElement.getStartOffset(),firstMessageElement.getEndOffset() - firstMessageElement.getStartOffset());
    }
 catch (    BadLocationException e) {
      LOGGER.error("Error removing messages from chat: ",e);
    }
    Element newHeaderElement=this.document.getElement("header");
    String dateString=(String)newHeaderElement.getAttributes().getAttribute("date");
    try {
      Date newFirstMsgTimestamp;
      newFirstMsgTimestamp=DateFormat.getDateTimeInstance(DateFormat.LONG,DateFormat.LONG).parse(dateString);
      if (chatContainer instanceof ChatPanel) {
        ((ChatPanel)chatContainer).getChatWindow().getMainToolBar().setBeginLastPageTimeStamp(pageFirstMsgTimestamp);
        pageFirstMsgTimestamp=newFirstMsgTimestamp;
      }
    }
 catch (    ParseException e) {
      LOGGER.error("Error removing messages from chat: ",e);
    }
  }
}
