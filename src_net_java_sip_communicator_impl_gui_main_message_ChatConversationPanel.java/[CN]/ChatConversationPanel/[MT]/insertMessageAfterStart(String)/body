{
  Element root=this.document.getDefaultRootElement();
  try {
    this.document.insertBeforeStart(root.getElement(0),chatString);
  }
 catch (  BadLocationException e) {
    LOGGER.error("Insert in the HTMLDocument failed.",e);
  }
catch (  IOException e) {
    LOGGER.error("Insert in the HTMLDocument failed.",e);
  }
  if (!isHistory)   this.ensureDocumentSize();
  this.setCarretToEnd();
}
