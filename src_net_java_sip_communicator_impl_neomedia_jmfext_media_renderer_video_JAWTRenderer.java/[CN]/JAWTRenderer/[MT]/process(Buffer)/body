{
  if (buffer.isDiscard())   return BUFFER_PROCESSED_OK;
  int bufferLength=buffer.getLength();
  if (bufferLength == 0)   return BUFFER_PROCESSED_OK;
  Format bufferFormat=buffer.getFormat();
  if ((bufferFormat != null) && (bufferFormat != this.inputFormat) && !bufferFormat.equals(this.inputFormat)) {
    if (setInputFormat(bufferFormat) == null)     return BUFFER_PROCESSED_FAILED;
  }
  if (handle == 0)   return BUFFER_PROCESSED_FAILED;
 else {
    Dimension size=null;
    if (bufferFormat != null)     size=((VideoFormat)bufferFormat).getSize();
    if (size == null) {
      size=this.inputFormat.getSize();
      if (size == null)       return BUFFER_PROCESSED_FAILED;
    }
    Component component=getComponent();
    boolean repaint=false;
    repaint=process(handle,component,(int[])buffer.getData(),buffer.getOffset(),bufferLength,size.width,size.height);
    if (repaint)     component.repaint();
    return BUFFER_PROCESSED_OK;
  }
}
