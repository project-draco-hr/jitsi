{
  Format matchingFormat=null;
  for (  Format supportedInputFormat : getSupportedInputFormats()) {
    if (supportedInputFormat.matches(format)) {
      matchingFormat=supportedInputFormat.intersects(format);
      break;
    }
  }
  if (matchingFormat == null)   return null;
  inputFormat=(VideoFormat)format;
  Dimension inputSize=inputFormat.getSize();
  if (inputSize != null) {
    inputWidth=inputSize.width;
    inputHeight=inputSize.height;
  }
  if ((inputWidth > 0) && (inputHeight > 0)) {
    Component component=getComponent();
    Dimension preferredSize=component.getPreferredSize();
    if ((preferredSize == null) || (preferredSize.width < 1) || (preferredSize.height < 1)) {
      component.setPreferredSize(new Dimension(inputWidth,inputHeight));
    }
  }
  return inputFormat;
}
