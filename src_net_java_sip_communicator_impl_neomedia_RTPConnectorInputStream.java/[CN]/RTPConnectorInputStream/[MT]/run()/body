{
  while (!closed) {
    DatagramPacket p=new DatagramPacket(buffer,0,PACKET_RECEIVE_BUFFER);
    try {
      receivePacket(p);
      numberOfPackets++;
    }
 catch (    IOException e) {
      ioError=true;
      break;
    }
    if (RTPConnectorOutputStream.logPacket(numberOfPackets)) {
      PacketLoggingService packetLogging=NeomediaActivator.getPacketLogging();
      if ((packetLogging != null) && packetLogging.isLoggingEnabled(PacketLoggingService.ProtocolName.RTP))       doLogPacket(p);
    }
    DatagramPacketFilter datagramPacketFilter=getDatagramPacketFilter();
    if ((datagramPacketFilter == null) || datagramPacketFilter.accept(p)) {
      pkt=createRawPacket(p);
      if ((pkt != null) && (transferHandler != null) && !closed)       transferHandler.transferData(this);
    }
  }
}
