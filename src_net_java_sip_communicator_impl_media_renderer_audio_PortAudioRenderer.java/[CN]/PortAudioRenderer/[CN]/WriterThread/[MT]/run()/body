{
  while (true) {
    try {
synchronized (bufferSync) {
        if (buffer == null) {
          buffer=new byte[1024];
        }
        PortAudio.Pa_WriteStream(stream,buffer,buffer.length / frameSize);
        buffer=null;
        bufferSync.wait(90);
      }
      if (!started)       return;
    }
 catch (    Exception e) {
      logger.error("writing to stream",e);
    }
  }
}
