{
  for (int i=0; i < numOfRetries; i++) {
    try {
      long streamParameters=PortAudio.PaStreamParameters_new(deviceIndex,audioFormat.getChannels(),PortAudio.SAMPLE_FORMAT_INT16);
      return PortAudio.Pa_OpenStream(0,streamParameters,audioFormat.getSampleRate(),PortAudio.FRAMES_PER_BUFFER_UNSPECIFIED,PortAudio.STREAM_FLAGS_CLIP_OFF | PortAudio.STREAM_FLAGS_DITHER_OFF,null);
    }
 catch (    PortAudioException e) {
      if (i == numOfRetries - 1)       throw e;
 else       try {
        Thread.sleep(interval);
      }
 catch (      InterruptedException ex) {
      }
    }
  }
  return 0;
}
