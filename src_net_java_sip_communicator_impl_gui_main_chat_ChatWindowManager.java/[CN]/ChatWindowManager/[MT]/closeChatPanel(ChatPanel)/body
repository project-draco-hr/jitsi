{
  ChatWindow chatWindow=chatPanel.getChatWindow();
  chatWindow.removeChat(chatPanel);
  if (chatWindow.getChatCount() == 0)   disposeChatWindow(chatWindow);
  boolean isChatPanelContained=false;
synchronized (chatPanels) {
    isChatPanelContained=chatPanels.remove(chatPanel);
  }
  if (isChatPanelContained)   chatPanel.dispose();
}
