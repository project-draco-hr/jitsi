{
  logger.debug("The provider changed state from: " + evt.getOldState() + " to: "+ evt.getNewState());
  if (evt.getNewState() == RegistrationState.REGISTERED) {
    opSetPersPresence=(OperationSetPersistentPresenceMsnImpl)msnProvider.getOperationSet(OperationSetPersistentPresence.class);
    msnProvider.getMessenger().addMessageListener(new MsnMessageListener());
    msnProvider.getMessenger().addEmailListener(new MsnMessageListener());
  }
}
