{
  if ((message.getFromAddr() == null) || (message.getFromAddr().indexOf('@') < 0)) {
    return;
  }
  String subject=message.getSubject();
  try {
    subject=MimeUtility.decodeText(subject);
  }
 catch (  Exception exception) {
    exception.printStackTrace();
  }
  Message newMailMessage=new MessageMsnImpl(MessageFormat.format(MsnActivator.getResources().getI18NString("service.gui.NEW_MAIL"),new Object[]{message.getFrom(),message.getFromAddr(),subject}),DEFAULT_MIME_TYPE,DEFAULT_MIME_ENCODING,subject);
  Contact sourceContact=opSetPersPresence.findContactByID(message.getFromAddr());
  if (sourceContact == null) {
    logger.debug("received a new mail from an unknown contact: " + message.getFrom() + " &lt;"+ message.getFromAddr()+ "&gt;");
    sourceContact=opSetPersPresence.createVolatileContact(contact);
  }
  MessageReceivedEvent msgReceivedEvt=new MessageReceivedEvent(newMailMessage,sourceContact,System.currentTimeMillis(),MessageReceivedEvent.SYSTEM_MESSAGE_RECEIVED);
  fireMessageEvent(msgReceivedEvt);
}
