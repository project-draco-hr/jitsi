{
  T callPeer=(T)evt.getSourceCallPeer();
  if (!getCallPeersVector().contains(callPeer))   return;
  int elementPeerIx=getCallPeersVector().indexOf(callPeer);
  getCallPeersVector().remove(callPeer);
  callPeer.removeCallPeerListener(this);
synchronized (localUserAudioLevelListenersSyncRoot) {
    callPeer.getMediaHandler().setLocalUserAudioLevelListener(null);
    if (!getCallPeersVector().isEmpty() && (elementPeerIx == 0)) {
      getCallPeersVector().firstElement().getMediaHandler().setLocalUserAudioLevelListener(localAudioLevelDelegator);
    }
  }
  try {
    fireCallPeerEvent(callPeer,CallPeerEvent.CALL_PEER_REMOVED);
  }
  finally {
    callPeer.setCall(null);
  }
  if (getCallPeersVector().isEmpty() && getCrossProtocolCallPeersVector().isEmpty()) {
    setCallState(CallState.CALL_ENDED,evt);
    if (getCallGroup() != null) {
      for (      Call c : getCallGroup().getCalls()) {
        if (c == this)         continue;
        ((MediaAwareCall<?,?,?>)c).setCallState(CallState.CALL_ENDED,evt);
      }
    }
  }
}
