{
  DataSource captureDevice=getCaptureDevice();
  if (captureDevice != null) {
    FormatControl[] formatControls=null;
    if (captureDevice instanceof CaptureDevice) {
      formatControls=((CaptureDevice)captureDevice).getFormatControls();
    }
    if ((formatControls == null) || (formatControls.length == 0)) {
      FormatControl formatControl=(FormatControl)captureDevice.getControl(FormatControl.class.getName());
      if (formatControl != null)       formatControls=new FormatControl[]{formatControl};
    }
    if (formatControls != null) {
      for (      FormatControl formatControl : formatControls) {
        Format format=formatControl.getFormat();
        if (format != null)         return format;
      }
    }
  }
  return null;
}
