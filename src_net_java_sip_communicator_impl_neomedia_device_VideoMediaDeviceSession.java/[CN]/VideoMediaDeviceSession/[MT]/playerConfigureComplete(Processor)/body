{
  super.playerConfigureComplete(player);
  TrackControl[] trackControls=player.getTrackControls();
  SwScaler playerScaler=null;
  if ((trackControls != null) && (trackControls.length != 0)) {
    try {
      for (      TrackControl trackControl : trackControls) {
        playerScaler=new PlayerScaler(player);
        if ("h264/rtp".equalsIgnoreCase(getFormat().getJMFEncoding())) {
          DePacketizer depacketizer=new DePacketizer();
          if (usePLI) {
            depacketizer.setRtcpFeedbackPLI(usePLI);
            try {
              depacketizer.setConnector(rtpConnector.getControlOutputStream());
            }
 catch (            Exception e) {
              logger.error("Error cannot get RTCP output stream",e);
            }
            depacketizer.setSSRC(localSSRC,remoteSSRC);
          }
          if (keyFrameControl != null)           depacketizer.setKeyFrameControl(keyFrameControl);
          trackControl.setCodecChain(new Codec[]{depacketizer,playerScaler});
        }
 else {
          trackControl.setCodecChain(new Codec[]{playerScaler});
        }
        break;
      }
    }
 catch (    UnsupportedPlugInException upiex) {
      logger.error("Failed to add SwScaler or H.264 DePacketizer to codec" + " chain",upiex);
      playerScaler=null;
    }
  }
  this.playerScaler=playerScaler;
}
