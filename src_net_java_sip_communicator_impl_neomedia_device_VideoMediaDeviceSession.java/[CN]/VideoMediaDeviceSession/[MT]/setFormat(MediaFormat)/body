{
  if (format instanceof VideoMediaFormat && ((VideoMediaFormat)format).getFrameRate() != -1) {
    FrameRateControl frameRateControl=(FrameRateControl)getCaptureDevice().getControl(FrameRateControl.class.getName());
    if (frameRateControl != null) {
      float frameRate=((VideoMediaFormat)format).getFrameRate();
      float maxSupportedFrameRate=frameRateControl.getMaxSupportedFrameRate();
      if ((maxSupportedFrameRate > 0) && (frameRate > maxSupportedFrameRate))       frameRate=maxSupportedFrameRate;
      if (frameRate > 0) {
        frameRateControl.setFrameRate(frameRate);
      }
    }
  }
  super.setFormat(format);
}
