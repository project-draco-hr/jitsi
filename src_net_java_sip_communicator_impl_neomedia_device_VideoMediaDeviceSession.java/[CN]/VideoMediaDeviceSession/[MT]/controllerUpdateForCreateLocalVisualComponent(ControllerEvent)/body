{
  if (controllerEvent instanceof ConfigureCompleteEvent) {
    Processor player=(Processor)controllerEvent.getSourceController();
    TrackControl[] trackControls=player.getTrackControls();
    if ((trackControls != null) && (trackControls.length != 0))     try {
      for (      TrackControl trackControl : trackControls) {
        if (!this.flipLocalVideoDisplay) {
          trackControl.setCodecChain(new Codec[]{new SwScaler()});
        }
 else {
          trackControl.setCodecChain(new Codec[]{new HFlip(),new SwScaler()});
        }
        break;
      }
    }
 catch (    UnsupportedPlugInException upiex) {
      logger.warn("Failed to add SwScaler/VideoFlipEffect to " + "codec chain",upiex);
    }
    try {
      player.setContentDescriptor(null);
    }
 catch (    NotConfiguredError nce) {
      logger.error("Failed to set ContentDescriptor of Processor",nce);
    }
    player.realize();
  }
 else   if (controllerEvent instanceof RealizeCompleteEvent) {
    Player player=(Player)controllerEvent.getSourceController();
    Component visualComponent=player.getVisualComponent();
    boolean start;
    if (visualComponent == null)     start=false;
 else {
      start=fireVideoEvent(VideoEvent.VIDEO_ADDED,visualComponent,VideoEvent.LOCAL,true);
    }
    if (start)     player.start();
 else {
synchronized (localPlayerSyncRoot) {
        if (localPlayer == player)         localPlayer=null;
      }
      player.stop();
      player.deallocate();
      player.close();
    }
  }
}
