{
synchronized (initializationLock) {
    this.accountID=accountID;
    OperationSetPersistentPresenceFacebookImpl persistentPresence=new OperationSetPersistentPresenceFacebookImpl(this);
    addSupportedOperationSet(OperationSetPersistentPresence.class,persistentPresence);
    addSupportedOperationSet(OperationSetPresence.class,persistentPresence);
    OperationSetBasicInstantMessagingFacebookImpl basicInstantMessaging=new OperationSetBasicInstantMessagingFacebookImpl(this,persistentPresence);
    addSupportedOperationSet(OperationSetBasicInstantMessaging.class,basicInstantMessaging);
    addSupportedOperationSet(OperationSetSmsMessaging.class,new OperationSetSmsMessagingFacebookImpl(this,persistentPresence));
    OperationSetTypingNotificationsFacebookImpl typingNotifications=new OperationSetTypingNotificationsFacebookImpl(this);
    addSupportedOperationSet(OperationSetTypingNotifications.class,typingNotifications);
    addSupportedOperationSet(OperationSetServerStoredContactInfo.class,new OperationSetServerStoredContactInfoFacebookImpl(this));
    facebookAdapter=new FacebookAdapter(this,persistentPresence,basicInstantMessaging,typingNotifications);
    isInitialized=true;
  }
}
