{
synchronized (initializationLock) {
    this.accountID=accountID;
    OperationSetPersistentPresenceFacebookImpl persistentPresence=new OperationSetPersistentPresenceFacebookImpl(this);
    supportedOperationSets.put(OperationSetPersistentPresence.class.getName(),persistentPresence);
    supportedOperationSets.put(OperationSetPresence.class.getName(),persistentPresence);
    OperationSetBasicInstantMessagingFacebookImpl basicInstantMessaging=new OperationSetBasicInstantMessagingFacebookImpl(this,(OperationSetPersistentPresenceFacebookImpl)persistentPresence);
    supportedOperationSets.put(OperationSetBasicInstantMessaging.class.getName(),basicInstantMessaging);
    OperationSetSmsMessagingFacebookImpl basicMessaging=new OperationSetSmsMessagingFacebookImpl(this,(OperationSetPersistentPresenceFacebookImpl)persistentPresence);
    supportedOperationSets.put(OperationSetSmsMessaging.class.getName(),basicMessaging);
    supportedOperationSets.put(OperationSetTypingNotifications.class.getName(),new OperationSetTypingNotificationsFacebookImpl(this));
    OperationSetServerStoredContactInfo contactInfo=new OperationSetServerStoredContactInfoFacebookImpl(this);
    supportedOperationSets.put(OperationSetServerStoredContactInfo.class.getName(),contactInfo);
    facebookAdapter=new FacebookAdapter(ProtocolProviderServiceFacebookImpl.this);
    isInitialized=true;
  }
}
