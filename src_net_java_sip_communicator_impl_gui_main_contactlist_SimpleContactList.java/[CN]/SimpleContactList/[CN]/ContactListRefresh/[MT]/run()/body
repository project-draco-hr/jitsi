{
  try {
    while (refreshEnabled) {
      Map<Object,String> copyContentToRefresh;
synchronized (contentToRefresh) {
        if (contentToRefresh.isEmpty())         contentToRefresh.wait();
        copyContentToRefresh=new Hashtable<Object,String>(contentToRefresh);
        contentToRefresh.clear();
      }
      for (      Map.Entry<Object,String> groupEntry : copyContentToRefresh.entrySet()) {
        String operation=groupEntry.getValue();
        Object o=groupEntry.getKey();
        if (o instanceof MetaContactGroup) {
          MetaContactGroup group=(MetaContactGroup)o;
          SwingUtilities.invokeLater(new RefreshGroup(group,operation));
        }
 else         if (o instanceof MetaContact) {
          MetaContact contact=(MetaContact)o;
          SwingUtilities.invokeLater(new RefreshContact(contact,contact.getParentMetaContactGroup(),operation));
        }
 else         if (o instanceof MetaContactEvent) {
          MetaContactEvent event=(MetaContactEvent)o;
          MetaContact contact=event.getSourceMetaContact();
          MetaContactGroup parentGroup=event.getParentGroup();
          SwingUtilities.invokeLater(new RefreshContact(contact,parentGroup,operation));
        }
      }
    }
  }
 catch (  InterruptedException e) {
    e.printStackTrace();
  }
}
