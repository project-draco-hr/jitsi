{
  UserPacketExtension ext=new UserPacketExtension(callPeer.getAddress());
  ext.setDisplayText(callPeer.getDisplayName());
  EndpointPacketExtension endpoint=new EndpointPacketExtension(callPeer.getURI());
  endpoint.setStatus(getEndpointStatus(callPeer));
  if (callPeer instanceof MediaAwareCallPeer<?,?,?>) {
    List<MediaPacketExtension> medias=getMedia((MediaAwareCallPeer<?,?,?>)callPeer,true);
    if (medias != null) {
      for (      MediaPacketExtension media : medias)       endpoint.addChildExtension(media);
    }
  }
  ext.addChildExtension(endpoint);
  return ext;
}
