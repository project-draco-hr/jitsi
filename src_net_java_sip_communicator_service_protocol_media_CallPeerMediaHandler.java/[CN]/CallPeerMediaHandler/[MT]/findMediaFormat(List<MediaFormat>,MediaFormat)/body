{
  MediaType mediaType=format.getMediaType();
  String encoding=format.getEncoding();
  double clockRate=format.getClockRate();
  int channels=MediaType.AUDIO.equals(mediaType) ? ((AudioMediaFormat)format).getChannels() : MediaFormatFactory.CHANNELS_NOT_SPECIFIED;
  Map<String,String> formatParameters=format.getFormatParameters();
  for (  MediaFormat match : formats) {
    if (AbstractMediaStream.matches(match,mediaType,encoding,clockRate,channels,formatParameters))     return match;
  }
  return null;
}
