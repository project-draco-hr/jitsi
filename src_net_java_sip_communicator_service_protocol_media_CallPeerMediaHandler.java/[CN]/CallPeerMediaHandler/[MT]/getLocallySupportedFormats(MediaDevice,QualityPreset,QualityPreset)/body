{
  if (mediaDevice == null)   return new LinkedList<MediaFormat>();
  boolean accountOverridesEncodings=false;
  Map<String,String> accountProperties=getPeer().getProtocolProvider().getAccountID().getAccountProperties();
  if (accountProperties.containsKey(ProtocolProviderFactory.OVERRIDE_ENCODINGS) && Boolean.parseBoolean(accountProperties.get(ProtocolProviderFactory.OVERRIDE_ENCODINGS))) {
    accountOverridesEncodings=true;
  }
  if (accountOverridesEncodings) {
    EncodingConfiguration encodingConfiguration=ProtocolMediaActivator.getMediaService().createEmptyEncodingConfiguration();
    encodingConfiguration.loadProperties(accountProperties,ProtocolProviderFactory.ENCODING_PROP_PREFIX);
    return mediaDevice.getSupportedFormats(sendPreset,receivePreset,encodingConfiguration);
  }
 else {
    return mediaDevice.getSupportedFormats(sendPreset,receivePreset);
  }
}
