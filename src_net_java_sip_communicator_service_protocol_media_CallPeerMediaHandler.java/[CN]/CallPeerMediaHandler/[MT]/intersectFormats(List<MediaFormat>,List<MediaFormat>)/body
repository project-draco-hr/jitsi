{
  List<MediaFormat> ret=new ArrayList<MediaFormat>();
  MediaFormat telephoneEvents=null;
  for (  MediaFormat remoteFormat : remoteFormats) {
    MediaFormat localFormat=findMediaFormat(localFormats,remoteFormat);
    if (localFormat != null) {
      if (Constants.TELEPHONE_EVENT.equals(localFormat.getEncoding())) {
        telephoneEvents=localFormat;
        continue;
      }
      ret.add(localFormat);
    }
  }
  if ((!ret.isEmpty()) && (telephoneEvents != null))   ret.add(telephoneEvents);
  return ret;
}
