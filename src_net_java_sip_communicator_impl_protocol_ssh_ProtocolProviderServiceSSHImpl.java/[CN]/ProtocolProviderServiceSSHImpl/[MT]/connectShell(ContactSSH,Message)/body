{
  sshContact.setConnectionInProgress(true);
  final Thread newConnection=new Thread((new Runnable(){
    public void run(){
      OperationSetPersistentPresenceSSHImpl persistentPresence=(OperationSetPersistentPresenceSSHImpl)sshContact.getParentPresenceOperationSet();
      persistentPresence.changeContactPresenceStatus(sshContact,SSHStatusEnum.CONNECTING);
      try {
        if (!isSessionValid(sshContact))         createSSHSessionAndLogin(sshContact);
        createShellChannel(sshContact);
        persistentPresence.changeContactPresenceStatus(sshContact,SSHStatusEnum.CONNECTED);
        showWelcomeMessage(sshContact);
        sshContact.setMessageType(ContactSSH.CONVERSATION_MESSAGE_RECEIVED);
        sshContact.setConnectionInProgress(false);
        Thread.sleep(1500);
        sshContact.setCommandSent(true);
        basicInstantMessaging.sendInstantMessage(sshContact,firstMessage);
      }
 catch (      Exception ex) {
        persistentPresence.changeContactPresenceStatus(sshContact,SSHStatusEnum.NOT_AVAILABLE);
        ex.printStackTrace();
      }
 finally {
        sshContact.setConnectionInProgress(false);
      }
    }
  }
));
  newConnection.start();
}
