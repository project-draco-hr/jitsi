{
  final JComboBox comboBox=new JComboBox();
  comboBox.setEditable(false);
  comboBox.setModel(new DeviceConfigurationComboBoxModel(mediaService.getDeviceConfiguration(),type));
  final Container portAudioPanel=new TransparentPanel(new GridLayout(3,2,HGAP,VGAP));
  comboBox.addItemListener(new ItemListener(){
    public void itemStateChanged(    ItemEvent e){
      if (e.getStateChange() == ItemEvent.SELECTED) {
        if (e.getItem().equals(DeviceConfiguration.AUDIO_SYSTEM_PORTAUDIO)) {
          createPortAudioControls(portAudioPanel);
        }
 else {
          portAudioPanel.removeAll();
          revalidate();
          repaint();
        }
      }
    }
  }
);
  if (comboBox.getSelectedItem().equals(DeviceConfiguration.AUDIO_SYSTEM_PORTAUDIO))   createPortAudioControls(portAudioPanel);
  JLabel label=new JLabel(getLabelText(type));
  label.setDisplayedMnemonic(getDisplayedMnemonic(type));
  label.setLabelFor(comboBox);
  Container firstContainer=new TransparentPanel(new GridBagLayout());
  GridBagConstraints firstConstraints=new GridBagConstraints();
  firstConstraints.anchor=GridBagConstraints.NORTHWEST;
  firstConstraints.gridx=0;
  firstConstraints.gridy=0;
  firstConstraints.weightx=0;
  firstContainer.add(label,firstConstraints);
  firstConstraints.gridx=1;
  firstConstraints.weightx=1;
  firstContainer.add(comboBox,firstConstraints);
  firstConstraints.gridx=0;
  firstConstraints.gridy=1;
  firstConstraints.weightx=1;
  firstConstraints.gridwidth=2;
  firstConstraints.insets=new Insets(VGAP,0,0,0);
  firstContainer.add(portAudioPanel,firstConstraints);
  Container secondContainer=new TransparentPanel(new GridLayout(1,0,HGAP,VGAP));
  secondContainer.add(createPreview(type,comboBox));
  secondContainer.add(createEncodingControls(type));
  Container container=new TransparentPanel(new GridBagLayout());
  GridBagConstraints constraints=new GridBagConstraints();
  constraints.fill=GridBagConstraints.HORIZONTAL;
  constraints.gridx=0;
  constraints.gridy=0;
  constraints.weightx=1;
  constraints.weighty=0;
  container.add(firstContainer,constraints);
  constraints.fill=GridBagConstraints.BOTH;
  constraints.gridy=1;
  constraints.weighty=1;
  container.add(secondContainer,constraints);
  return container;
}
