{
  GTalkCandidatePacketExtension packet=new GTalkCandidatePacketExtension();
  Component component=candidate.getParentComponent();
  packet.setName(name);
  packet.setGeneration(component.getParentStream().getParentAgent().getGeneration());
  TransportAddress transportAddress=candidate.getTransportAddress();
  packet.setUsername(((LocalCandidate)candidate).getUfrag());
  if (candidate instanceof GoogleRelayedCandidate) {
    packet.setPassword(((GoogleRelayedCandidate)candidate).getPassword());
  }
 else {
    packet.setPassword("");
  }
  packet.setAddress(transportAddress.getHostAddress());
  packet.setPort(transportAddress.getPort());
  if (transportAddress.getPort() != 443) {
    packet.setProtocol(candidate.getTransport().toString());
  }
 else {
    packet.setProtocol("ssltcp");
  }
  packet.setNetwork(0);
  packet.setFoundation("0");
  packet.setComponent(component.getComponentID());
  CandidateType candType=CandidateType.valueOf(candidate.getType().toString());
  if (candType == CandidateType.srflx) {
    candType=CandidateType.stun;
  }
 else   if (candType == CandidateType.host) {
    candType=CandidateType.local;
  }
  packet.setType(candType);
  double priority=candidate.getPriority();
  packet.setPreference((priority / 1000));
  return packet;
}
