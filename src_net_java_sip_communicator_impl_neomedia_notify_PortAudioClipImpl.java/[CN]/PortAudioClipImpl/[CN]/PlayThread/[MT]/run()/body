{
  try {
    while (true) {
      AudioInputStream audioStream=AudioSystem.getAudioInputStream(url);
      AudioFormat audioStreamFormat=audioStream.getFormat();
      if (portAudioStream == null) {
        int deviceIndex=PortAudioUtils.getDeviceIndexFromLocator(audioNotifier.getDeviceConfiguration().getAudioNotifyDevice().getLocator());
        portAudioStream=PortAudioManager.getInstance().getOutputStream(deviceIndex,audioStreamFormat.getSampleRate(),audioStreamFormat.getChannels(),PortAudioUtils.getPortAudioSampleFormat(audioStreamFormat.getSampleSizeInBits()));
        portAudioStream.start();
      }
      if (!started) {
        portAudioStream.stop();
        portAudioStream.close();
        return;
      }
      while (started && audioStream.read(buffer) != -1)       portAudioStream.write(buffer);
      if (!isLooping()) {
        portAudioStream.stop();
        portAudioStream.close();
        break;
      }
 else {
synchronized (syncObject) {
          if (started) {
            try {
              syncObject.wait(getLoopInterval());
            }
 catch (            InterruptedException e) {
            }
          }
        }
      }
    }
  }
 catch (  PortAudioException e) {
    logger.error("Cannot open portaudio device for notifications",e);
  }
catch (  IOException e) {
    logger.error("Error reading from audio resource",e);
  }
catch (  UnsupportedAudioFileException e) {
    logger.error("Unknown file format",e);
  }
}
