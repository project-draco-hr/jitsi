{
  if (!allowsInstantMessage())   return;
  OperationSetBasicInstantMessaging imOpSet=(OperationSetBasicInstantMessaging)contact.getProtocolProvider().getOperationSet(OperationSetBasicInstantMessaging.class);
  Message msg;
  if (mimeType.equals(OperationSetBasicInstantMessaging.HTML_MIME_TYPE) && imOpSet.isContentTypeSupported(OperationSetBasicInstantMessaging.HTML_MIME_TYPE)) {
    msg=imOpSet.createMessage(message,OperationSetBasicInstantMessaging.HTML_MIME_TYPE,"utf-8","");
  }
 else {
    msg=imOpSet.createMessage(message);
  }
  imOpSet.sendInstantMessage(contact,msg);
}
