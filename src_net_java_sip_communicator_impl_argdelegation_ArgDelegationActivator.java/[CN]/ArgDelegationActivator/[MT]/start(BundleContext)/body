{
  bundleContext=bc;
  delegationPeer=new ArgDelegationPeerImpl(bc);
  bc.addServiceListener(delegationPeer);
  LaunchArgHandler.getInstance().setDelegationPeer(delegationPeer);
  if (OSUtils.IS_MAC) {
    Application application=Application.getApplication();
    if (application != null) {
      application.setOpenURIHandler(new OpenURIHandler(){
        public void openURI(        OpenURIEvent evt){
          delegationPeer.handleUri(evt.getURI().toString());
        }
      }
);
    }
  }
}
