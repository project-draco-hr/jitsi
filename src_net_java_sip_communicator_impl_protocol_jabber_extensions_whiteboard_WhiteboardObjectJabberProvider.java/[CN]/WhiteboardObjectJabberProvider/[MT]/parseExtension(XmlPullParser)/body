{
  StringBuilder sb=new StringBuilder();
  boolean done=false;
  while (!done) {
    int eventType=parser.next();
    if (eventType == XmlPullParser.START_TAG && !parser.getName().equals(WhiteboardObjectPacketExtensionImpl.ELEMENT_NAME)) {
      sb.append(parser.getText());
    }
 else     if (eventType == XmlPullParser.TEXT) {
      sb.append(parser.getText());
    }
 else     if (eventType == XmlPullParser.END_TAG && parser.getName().equals("image")) {
      sb.append(parser.getText());
    }
 else     if (eventType == XmlPullParser.END_TAG && parser.getName().equals("text")) {
      sb.append(parser.getText());
    }
 else     if (eventType == XmlPullParser.END_TAG && parser.getName().equals(WhiteboardObjectPacketExtensionImpl.ELEMENT_NAME)) {
      done=true;
    }
  }
  WhiteboardObjectPacketExtensionImpl wbo=new WhiteboardObjectPacketExtensionImpl(sb.toString());
  return wbo;
}
