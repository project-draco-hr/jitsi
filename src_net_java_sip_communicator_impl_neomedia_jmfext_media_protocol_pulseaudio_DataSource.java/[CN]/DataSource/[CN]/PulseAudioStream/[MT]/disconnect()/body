{
  pulseAudioSystem.lockMainloop();
  try {
    long stream=this.stream;
    if (stream != 0) {
      try {
        stopWithMainloopLock();
      }
  finally {
        long cvolume=this.cvolume;
        this.cvolume=0;
        this.stream=0;
        buffer=null;
        corked=true;
        fragsize=0;
        length=0;
        offset=0;
        pulseAudioSystem.signalMainloop(false);
        if (cvolume != 0)         PA.cvolume_free(cvolume);
        PA.stream_disconnect(stream);
        PA.stream_unref(stream);
      }
    }
  }
  finally {
    pulseAudioSystem.unlockMainloop();
  }
}
