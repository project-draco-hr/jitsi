{
  pulseAudioSystem.lockMainloop();
  try {
    long stream=this.stream;
    if (stream != 0) {
      try {
        stopWithMainloopLock();
      }
  finally {
        this.stream=0;
        buffer=null;
        corked=true;
        fragsize=0;
        length=0;
        offset=0;
        pulseAudioSystem.signalMainloop(false);
        PA.stream_disconnect(stream);
        PA.stream_unref(stream);
      }
    }
  }
  finally {
    pulseAudioSystem.unlockMainloop();
  }
}
