{
  PortAudio.initialize();
  int deviceCount=PortAudio.Pa_GetDeviceCount();
  int deviceIndex=0;
  Vector<CaptureDeviceInfo> playbackDevVector=new Vector<CaptureDeviceInfo>();
  for (; deviceIndex < deviceCount; deviceIndex++) {
    long deviceInfo=PortAudio.Pa_GetDeviceInfo(deviceIndex);
    int maxInputChannels=PortAudio.PaDeviceInfo_getMaxInputChannels(deviceInfo);
    int maxOutputChannels=PortAudio.PaDeviceInfo_getMaxOutputChannels(deviceInfo);
    CaptureDeviceInfo jmfInfo=new CaptureDeviceInfo(PortAudio.PaDeviceInfo_getName(deviceInfo),new MediaLocator(PortAudioStream.LOCATOR_PREFIX + deviceIndex),PortAudioStream.getFormats());
    if (maxInputChannels > 0) {
      CaptureDeviceManager.addDevice(jmfInfo);
    }
    if (maxOutputChannels > 0) {
      playbackDevVector.add(jmfInfo);
    }
  }
  playbackDevices=playbackDevVector.toArray(new CaptureDeviceInfo[0]);
  CaptureDeviceManager.commit();
  DeviceConfiguration.initPortAudioRenderer();
  DeviceConfiguration.addAudioSystem(DeviceConfiguration.AUDIO_SYSTEM_PORTAUDIO);
}
