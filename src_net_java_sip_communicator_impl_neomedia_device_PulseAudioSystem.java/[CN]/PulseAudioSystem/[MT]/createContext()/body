{
  if (this.context != 0)   throw new IllegalStateException("context");
  startMainloop();
  try {
    long proplist=PA.proplist_new();
    if (proplist == 0)     throw new RuntimeException("pa_proplist_new");
    try {
      populateContextProplist(proplist);
      long context=PA.context_new_with_proplist(PA.threaded_mainloop_get_api(mainloop),null,proplist);
      if (context == 0)       throw new RuntimeException("pa_context_new_with_proplist");
      try {
        if (proplist != 0) {
          PA.proplist_free(proplist);
          proplist=0;
        }
        Runnable stateCallback=new Runnable(){
          public void run(){
            signalMainloop(false);
          }
        }
;
        lockMainloop();
        try {
          PA.context_set_state_callback(context,stateCallback);
          PA.context_connect(context,null,PA.CONTEXT_NOFAIL,0);
          try {
            int state=waitForContextState(context,PA.CONTEXT_READY);
            if (state != PA.CONTEXT_READY)             throw new IllegalStateException("context.state");
            this.context=context;
          }
  finally {
            if (this.context == 0)             PA.context_disconnect(context);
          }
        }
  finally {
          unlockMainloop();
        }
      }
  finally {
        if (this.context == 0)         PA.context_unref(context);
      }
    }
  finally {
      if (proplist != 0)       PA.proplist_free(proplist);
    }
  }
  finally {
    if (this.context == 0)     stopMainloop();
  }
}
