{
  int state;
  while (true) {
    state=PA.stream_get_state(stream);
    if ((stateToWaitFor == state) || (PA.STREAM_FAILED == state) || (PA.STREAM_TERMINATED == state))     break;
    waitMainloop();
  }
  return state;
}
