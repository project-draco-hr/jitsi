{
  int state;
  while (true) {
    state=PA.context_get_state(context);
    if ((PA.CONTEXT_FAILED == state) || (stateToWaitFor == state) || (PA.CONTEXT_TERMINATED == state))     break;
    waitMainloop();
  }
  return state;
}
