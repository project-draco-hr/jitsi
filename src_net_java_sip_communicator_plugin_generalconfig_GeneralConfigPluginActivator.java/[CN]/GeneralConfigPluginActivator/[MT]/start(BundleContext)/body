{
  bundleContext=bc;
  ServiceReference uiServiceRef=bundleContext.getServiceReference(UIService.class.getName());
  uiService=(UIService)bundleContext.getService(uiServiceRef);
  ConfigurationManager.loadGuiConfigurations();
  Dictionary<String,String> properties=new Hashtable<String,String>();
  properties.put(ConfigurationForm.FORM_TYPE,ConfigurationForm.GENERAL_TYPE);
  bundleContext.registerService(ConfigurationForm.class.getName(),new LazyConfigurationForm("net.java.sip.communicator.plugin.generalconfig.GeneralConfigurationPanel",getClass().getClassLoader(),"plugin.generalconfig.PLUGIN_ICON","service.gui.GENERAL",0),properties);
  bundleContext.addServiceListener(this);
  if (logger.isInfoEnabled())   logger.info("PREFERENCES PLUGIN... [REGISTERED]");
}
