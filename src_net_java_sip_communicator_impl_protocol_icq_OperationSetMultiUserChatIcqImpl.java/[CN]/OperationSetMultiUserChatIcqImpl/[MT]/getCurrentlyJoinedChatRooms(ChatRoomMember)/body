{
synchronized (chatRoomCache) {
    List joinedRooms=new LinkedList(this.chatRoomCache.values());
    Iterator joinedRoomsIter=joinedRooms.iterator();
    while (joinedRoomsIter.hasNext()) {
      if (!((ChatRoom)joinedRoomsIter.next()).isJoined())       joinedRoomsIter.remove();
    }
    return joinedRooms;
  }
}
