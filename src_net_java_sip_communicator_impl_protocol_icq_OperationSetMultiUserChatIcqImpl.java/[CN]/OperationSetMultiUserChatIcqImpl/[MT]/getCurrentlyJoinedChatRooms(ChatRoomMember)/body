{
synchronized (chatRoomCache) {
    List<String> joinedRooms=new LinkedList<String>();
    for (    Map.Entry<String,ChatRoom> chatRoomEntry : chatRoomCache.entrySet())     if (chatRoomEntry.getValue().isJoined())     joinedRooms.add(chatRoomEntry.getKey());
    return joinedRooms;
  }
}
