{
  final JDialog dialog=new SIPCommDialog(){
    protected void close(    boolean isEscaped){
    }
  }
;
  dialog.setTitle(getResources().getI18NString("plugin.updatechecker.DIALOG_TITLE"));
  JEditorPane contentMessage=new JEditorPane();
  contentMessage.setContentType("text/html");
  contentMessage.setOpaque(false);
  contentMessage.setEditable(false);
  String dialogMsg=getResources().getI18NString("plugin.updatechecker.DIALOG_MESSAGE",new String[]{getResources().getSettingsString("service.gui.APPLICATION_NAME")});
  if (lastVersion != null)   dialogMsg+=getResources().getI18NString("plugin.updatechecker.DIALOG_MESSAGE_2",new String[]{getResources().getSettingsString("service.gui.APPLICATION_NAME"),lastVersion});
  contentMessage.setText(dialogMsg);
  JPanel contentPane=new SIPCommFrame.MainContentPane();
  contentMessage.setBorder(BorderFactory.createEmptyBorder(10,0,20,0));
  contentPane.setBorder(BorderFactory.createEmptyBorder(0,10,0,10));
  contentPane.add(contentMessage,BorderLayout.NORTH);
  JScrollPane scrollChanges=new JScrollPane();
  scrollChanges.setPreferredSize(new Dimension(550,200));
  JEditorPane changesHtml=new JEditorPane();
  changesHtml.setContentType("text/html");
  changesHtml.setEditable(false);
  changesHtml.setBorder(BorderFactory.createLoweredBevelBorder());
  scrollChanges.setViewportView(changesHtml);
  contentPane.add(scrollChanges,BorderLayout.CENTER);
  try {
    changesHtml.setPage(new URL(changesLink));
  }
 catch (  Exception e) {
    logger.error("Cannot set changes Page",e);
  }
  JPanel buttonPanel=new TransparentPanel(new FlowLayout(FlowLayout.CENTER,10,10));
  JButton closeButton=new JButton(getResources().getI18NString("plugin.updatechecker.BUTTON_CLOSE"));
  closeButton.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      dialog.setVisible(false);
    }
  }
);
  if (downloadLink != null) {
    JButton installButton=new JButton(getResources().getI18NString("plugin.updatechecker.BUTTON_INSTALL"));
    installButton.addActionListener(new ActionListener(){
      public void actionPerformed(      ActionEvent e){
        if (OSUtils.IS_WINDOWS64)         downloadLink=downloadLink.replace("x86","x64");
        dialog.dispose();
        windowsUpdate();
      }
    }
);
    buttonPanel.add(installButton);
  }
  buttonPanel.add(closeButton);
  contentPane.add(buttonPanel,BorderLayout.SOUTH);
  dialog.setContentPane(contentPane);
  dialog.pack();
  dialog.setLocation(Toolkit.getDefaultToolkit().getScreenSize().width / 2 - dialog.getWidth() / 2,Toolkit.getDefaultToolkit().getScreenSize().height / 2 - dialog.getHeight() / 2);
  dialog.setVisible(true);
}
