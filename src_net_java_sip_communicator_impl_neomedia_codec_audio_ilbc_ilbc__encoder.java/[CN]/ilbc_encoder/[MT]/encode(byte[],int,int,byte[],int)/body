{
  float block[]=new float[this.ULP_inst.blockl];
  bitstream en_data=new bitstream(this.ULP_inst.no_of_bytes * 2);
  int k;
  for (k=0; k < this.ULP_inst.blockl; k++, decodedOffset+=2)   block[k]=ArrayIOUtils.readShort(decoded,decodedOffset);
  iLBC_encode(en_data,block);
  for (k=0; k < encodedLength; k++, encodedOffset++)   encoded[encodedOffset]=(byte)(((short)en_data.buffer[k]) & 0xff);
  return ((short)this.ULP_inst.no_of_bytes);
}
