{
  processor.addControllerListener(this);
  setFailed(false);
  if (state == Processor.Configured)   processor.configure();
 else   if (state == Processor.Realized)   processor.realize();
  while ((processor.getState() < state) && !failed) {
    Object stateLock=getStateLock();
synchronized (stateLock) {
      try {
        stateLock.wait();
      }
 catch (      InterruptedException ie) {
        logger.warn("Failed while waiting on Processor " + processor + " for state "+ state,ie);
        processor.removeControllerListener(this);
        return false;
      }
    }
  }
  processor.removeControllerListener(this);
  return !failed;
}
