{
  CallPeer sourcePeer=evt.getSourceCallPeer();
  if (!sourcePeer.equals(callPeer))   return;
  CallPeerState newState=(CallPeerState)evt.getNewValue();
  CallPeerState oldState=(CallPeerState)evt.getOldValue();
  String newStateString=sourcePeer.getState().getLocalizedStateString();
  if (newState == CallPeerState.CONNECTED) {
    if (!CallPeerState.isOnHold(oldState)) {
      if (!renderer.getCallPanel().isCallTimerStarted())       renderer.getCallPanel().startCallTimer();
      renderer.getCallPanel().enableButtons(true);
    }
 else {
      renderer.setOnHold(false);
      renderer.getCallPanel().updateHoldButtonState();
      renderer.getCallPanel().enableButtonsWhileOnHold(false);
    }
  }
 else   if (newState == CallPeerState.DISCONNECTED) {
  }
 else   if (newState == CallPeerState.FAILED) {
  }
 else   if (CallPeerState.isOnHold(newState)) {
    renderer.setOnHold(true);
    renderer.getCallPanel().enableButtonsWhileOnHold(true);
    renderer.getCallPanel().updateHoldButtonState();
  }
  renderer.setPeerState(newStateString);
  String reasonString=evt.getReasonString();
  if (reasonString != null)   renderer.setErrorReason(reasonString);
}
