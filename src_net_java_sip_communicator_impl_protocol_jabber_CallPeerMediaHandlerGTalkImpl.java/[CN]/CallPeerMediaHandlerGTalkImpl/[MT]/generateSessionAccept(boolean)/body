{
  RtpDescriptionPacketExtension description=new RtpDescriptionPacketExtension();
  List<PayloadTypePacketExtension> lst=localContentMap.get("audio");
  description.setNamespace(SessionIQProvider.GTALK_AUDIO_NAMESPACE);
  boolean masterStreamSet=false;
  for (  MediaType mediaType : MediaType.values()) {
    MediaFormat format=null;
    String ns=getNamespaceForMediaType(mediaType);
    String mediaName=getNameForMediaType(mediaType);
    for (    PayloadTypePacketExtension ext : lst) {
      if (ext.getNamespace().equals(ns)) {
        if (mediaType.equals(MediaType.VIDEO)) {
          description.setNamespace(SessionIQProvider.GTALK_VIDEO_NAMESPACE);
          getPeer().getCall().setLocalVideoAllowed(true,MediaUseCase.CALL);
          ext.setAttribute("width",320);
          ext.setAttribute("height",200);
          ext.setAttribute("framerate",30);
        }
        format=JingleUtils.payloadTypeToMediaFormat(ext,getDynamicPayloadTypes());
        description.addPayloadType(ext);
        if (format != null)         break;
      }
    }
    if (format == null)     continue;
    if (!initStream)     continue;
    StreamConnector connector=transportManager.getStreamConnector(mediaType);
    MediaDevice dev=getDefaultDevice(mediaType);
    MediaStreamTarget target=transportManager.getStreamTarget(mediaType);
    List<RTPExtension> rtpExtensions=new ArrayList<RTPExtension>();
    MediaDirection direction=MediaDirection.SENDRECV;
    boolean masterStream=false;
    if (!masterStreamSet) {
      if (MediaType.values().length > 1) {
        if (mediaType.equals(MediaType.AUDIO)) {
          masterStream=true;
          masterStreamSet=true;
        }
      }
 else {
        masterStream=true;
        masterStreamSet=true;
      }
    }
    setAndAddPreferredEncryptionProtocol(mediaType,description,remoteDescription);
    initStream(mediaName,connector,dev,format,target,direction,rtpExtensions,masterStream);
  }
  return description;
}
