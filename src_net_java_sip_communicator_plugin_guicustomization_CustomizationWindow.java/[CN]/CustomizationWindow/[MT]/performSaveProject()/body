{
  try {
    File file=null;
    JFileChooser fileChooser=new JFileChooser();
    fileChooser.setDialogType(JFileChooser.SAVE_DIALOG);
    fileChooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
    fileChooser.setDialogTitle("Select Destination");
    fileChooser.setCurrentDirectory(new File(System.getProperty("user.home")));
    int result=fileChooser.showOpenDialog(CustomizationWindow.this);
    if (result == JFileChooser.APPROVE_OPTION) {
      file=fileChooser.getSelectedFile();
      file=new File(file,"customresources.jar");
    }
 else     return;
    InputStream manifestIs=CustomizationWindow.class.getResource(srcPackagePath + "/" + manifestFileName).openStream();
    JarOutputStream outFile=new JarOutputStream(new FileOutputStream(file),new Manifest(manifestIs));
    for (int i=0; i < customClassFiles.length; i++) {
      String cf=customClassFiles[i];
      InputStream clIs=CustomizationWindow.class.getResourceAsStream(srcPackagePath + "/" + cf+ ".class");
      byte[] bs=new byte[clIs.available()];
      clIs.read(bs);
      clIs.close();
      addNewZipEntry(dstPackagePath + "/" + cf+ ".class",outFile,bs);
    }
    saveColorPack(outFile);
    saveImagePack(outFile);
    saveLanguagePack(outFile);
    saveSettingsPack(outFile);
    saveSoundsPack(outFile);
    outFile.flush();
    outFile.close();
    manifestIs.close();
  }
 catch (  Exception e) {
    logger.error("",e);
  }
}
