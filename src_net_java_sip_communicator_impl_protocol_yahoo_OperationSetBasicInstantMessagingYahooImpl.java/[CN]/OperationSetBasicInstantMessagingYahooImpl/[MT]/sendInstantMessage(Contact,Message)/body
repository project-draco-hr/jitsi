{
  assertConnected();
  if (!(to instanceof ContactYahooImpl))   throw new IllegalArgumentException("The specified contact is not a Yahoo contact." + to);
  try {
    String toUserID=((ContactYahooImpl)to).getID();
    yahooProvider.getYahooSession().sendMessage(toUserID,message.getContent());
    MessageDeliveredEvent msgDeliveredEvt=new MessageDeliveredEvent(message,to,new Date());
    fireMessageEvent(msgDeliveredEvt);
  }
 catch (  IOException ex) {
    logger.fatal("Cannot Send Message! " + ex.getMessage());
    MessageDeliveryFailedEvent evt=new MessageDeliveryFailedEvent(message,to,MessageDeliveryFailedEvent.NETWORK_FAILURE,new Date());
    fireMessageEvent(evt);
    return;
  }
}
