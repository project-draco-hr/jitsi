{
  if (format == null)   throw new NullPointerException("format");
  this.format=format;
  this.formatParameters=((formatParameters == null) || formatParameters.isEmpty()) ? EMPTY_FORMAT_PARAMETERS : new HashMap<String,String>(formatParameters);
  this.advancedParameters=((advancedParameters == null) || advancedParameters.isEmpty()) ? EMPTY_FORMAT_PARAMETERS : new HashMap<String,String>(advancedParameters);
}
