{
  int k, d, in16;
  int out32;
  for (k=0; k < len; k++) {
    in16=in[in_offset + k];
    out32=(in16 << 12) - S[0];
    out32=Silk_SigProc_FIX.SKP_RSHIFT_ROUND(out32,12);
    for (d=0; d < order - 1; d++) {
      S[d]=Silk_SigProc_FIX.SKP_SMLABB_ovflw(S[d + 1],in16,B[B_offset + d]);
    }
    S[order - 1]=Silk_macros.SKP_SMULBB(in16,B[B_offset + order - 1]);
    out[out_offset + k]=(short)Silk_SigProc_FIX.SKP_SAT16(out32);
  }
}
