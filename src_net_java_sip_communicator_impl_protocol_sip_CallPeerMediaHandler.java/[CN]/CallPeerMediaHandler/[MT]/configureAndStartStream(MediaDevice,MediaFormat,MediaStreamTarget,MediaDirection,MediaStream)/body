{
  registerDynamicPTsWithStream(stream);
  stream.setDevice(device);
  stream.setTarget(target);
  stream.setDirection(direction);
  stream.setFormat(format);
  if (stream instanceof AudioMediaStream) {
    this.audioStream=(AudioMediaStream)stream;
synchronized (localAudioLevelListenerLock) {
      if (localAudioLevelListener != null) {
        audioStream.setLocalUserAudioLevelListener(localAudioLevelListener);
      }
    }
synchronized (streamAudioLevelListenerLock) {
      if (streamAudioLevelListener != null) {
        audioStream.setStreamAudioLevelListener(streamAudioLevelListener);
      }
    }
  }
 else   setVideoStream((VideoMediaStream)stream);
  if (!stream.isStarted())   stream.start();
  return stream;
}
