{
  Vector<MediaDescription> mediaDescs=new Vector<MediaDescription>();
  for (  MediaType mediaType : MediaType.values()) {
    MediaDevice dev=getDefaultDevice(mediaType);
    if (dev != null) {
      MediaDirection direction=dev.getDirection().and(getDirectionUserPreference(mediaType));
      if (locallyOnHold)       direction=direction.and(MediaDirection.SENDONLY);
      if (direction != MediaDirection.INACTIVE)       mediaDescs.add(createMediaDescription(dev,getStreamConnector(mediaType),direction));
    }
  }
  if (mediaDescs.size() == 0) {
    ProtocolProviderServiceSipImpl.throwOperationFailedException("We couldn't find any active Audio/Video devices and " + "couldn't create a call",OperationFailedException.GENERAL_ERROR,null,logger);
  }
  return mediaDescs;
}
