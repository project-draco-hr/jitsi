{
  if (response == null)   return -1;
  String prefix="for (;;);";
  if (response.startsWith(prefix))   response=response.substring(prefix.length());
  JSONObject respObjs=new JSONObject(response);
  if (respObjs == null)   return FacebookErrorCode.Error_Global_JSONError;
  logger.info("error: " + respObjs.getInt("error"));
  if (respObjs.get("error") != null) {
    int errorCode=respObjs.getInt("error");
    if (errorCode == 0) {
      try {
        JSONObject payload=(JSONObject)respObjs.get("payload");
        if (payload != null) {
          JSONObject buddyList=(JSONObject)payload.get("buddy_list");
          if (buddyList != null) {
            adapter.updateBuddyList(buddyList);
          }
        }
      }
 catch (      ClassCastException cce) {
        cce.printStackTrace();
      }
    }
 else {
      logger.warn("Error(" + errorCode + "): "+ (String)respObjs.get("errorSummary")+ ";"+ (String)respObjs.get("errorDescription"));
    }
    return errorCode;
  }
  return FacebookErrorCode.Error_Global_JSONError;
}
